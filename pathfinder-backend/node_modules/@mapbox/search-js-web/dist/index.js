var Qn=Object.create;var Pt=Object.defineProperty,Jn=Object.defineProperties,er=Object.getOwnPropertyDescriptor,tr=Object.getOwnPropertyDescriptors,sr=Object.getOwnPropertyNames,$o=Object.getOwnPropertySymbols,ir=Object.getPrototypeOf,zo=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable;var Uo=(o,e,s)=>e in o?Pt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,p=(o,e)=>{for(var s in e||(e={}))zo.call(e,s)&&Uo(o,s,e[s]);if($o)for(var s of $o(e))or.call(e,s)&&Uo(o,s,e[s]);return o},E=(o,e)=>Jn(o,tr(e)),qo=o=>Pt(o,"__esModule",{value:!0});var nr=(o,e)=>{for(var s in e)Pt(o,s,{get:e[s],enumerable:!0})},Xo=(o,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sr(e))!zo.call(o,n)&&(s||n!=="default")&&Pt(o,n,{get:()=>e[n],enumerable:!(i=er(e,n))||i.enumerable});return o},Si=(o,e)=>Xo(qo(Pt(o!=null?Qn(ir(o)):{},"default",!e&&o&&o.__esModule?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o),rr=(o=>(e,s)=>o&&o.get(e)||(s=Xo(qo({}),e,1),o&&o.set(e,s),s))(typeof WeakMap!="undefined"?new WeakMap:0);var xo=(o,e,s)=>{if(!e.has(o))throw TypeError("Cannot "+s)};var t=(o,e,s)=>(xo(o,e,"read from private field"),s?s.call(o):e.get(o)),r=(o,e,s)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,s)},d=(o,e,s,i)=>(xo(o,e,"write to private field"),i?i.call(o,s):e.set(o,s),s);var ge=(o,e,s)=>(xo(o,e,"access private method"),s);var y=(o,e,s)=>new Promise((i,n)=>{var a=u=>{try{c(s.next(u))}catch(m){n(m)}},l=u=>{try{c(s.throw(u))}catch(m){n(m)}},c=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,l);c((s=s.apply(o,e)).next())});var oa={};nr(oa,{MapboxAddressAutofill:()=>ut,MapboxAddressConfirmation:()=>Pe,MapboxAddressMinimap:()=>Tt,MapboxGeocoder:()=>vt,MapboxHTMLEvent:()=>h,MapboxSearchBox:()=>mt,autofill:()=>Zn,config:()=>x,confirmAddress:()=>Ri,getAutofillSearchText:()=>Qe,getFormAutofillValues:()=>Oi});var Yo=document.implementation.createHTMLDocument();function F(o,e){let s={};for(let[i,n]of Object.entries(e))s[i]=o.querySelector(n);return s}function Vo(o){return Array.from(o.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function T(o){let e=document.createElement("template");return e.innerHTML=o,e.content.firstElementChild}function Wo(o){let e=Yo.createElement("style");return e.textContent=o,Yo.head.appendChild(e),e.sheet}function Ko(o){return window.getComputedStyle(o).display!=="none"}function V(o,e){if(!o)return;Object.getOwnPropertyDescriptor(o.constructor.prototype,"value").set.call(o,e);let i=o;i._valueTracker&&i._valueTracker.setValue("");let n=new Event("input",{bubbles:!0});n.simulated=!0,o.dispatchEvent(n);let a=new Event("change",{bubbles:!0});a.simulated=!0,o.dispatchEvent(a)}function Ai(o,e=!1){let s,i,n=o.getBoundingClientRect();if(o.style.display==="none"||n.height===0&&n.width===0){let a=o.cloneNode(e);o.parentElement.appendChild(a),a.style.setProperty("display","block","important");let l=a.getBoundingClientRect();s=l.width,i=l.height,a.style.setProperty("display","none"),a.remove()}else s=n.width,i=n.height;return{height:Math.floor(i),width:Math.floor(s)}}function Zo(o){let e=document.createElement("style");e.innerHTML=o,document.head.appendChild(e)}var ar=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),lr=new RegExp(`\\.${ar.source}`,"g"),dr=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function Rt(o,e){return o.replace(lr,s=>"."+e(s.slice(1)))}function So(o,e){let i=Wo(o).cssRules;function n(l){if(l instanceof CSSStyleRule)return`${Rt(l.selectorText,e)} { ${l.style.cssText} }`;let c=dr.exec(l.cssText.split(`
`).join(""));if(c&&c.length>2){let u=c[1],m=c[2];return`${u} { ${So(m,e)} }`}return l.cssText}let a="";for(let l of Array.from(i))a+=n(l)+`

`;return a.trim()}function Ao(o,e){let s=Array.from(o.querySelectorAll("[class]"));s.push(o);for(let i of s){let{classList:n}=i;for(let a of Array.from(n))n.remove(a),n.add(e(a))}return o}var rn=require("@mapbox/search-js-core");var Ft=1.4;function Mi(o,e,s=.5){let{center:i,zoom:n}=o.cameraForBounds(e),a=Math.max(n-s,0);return{center:i,zoom:a,speed:Ft}}function yi(o){switch(o){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function Ti(o,e){return`https://api.mapbox.com/styles/v1/${o}/${e}/static/`}var _t='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var Mo='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg>';var Qo=Ti("mapbox","satellite-streets-v11"),Jo="20d01",en=["mapbox.com","mapbox.cn","tilestream.net"],tn=T(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),sn=T(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`),on=T(`
<template>
  <div class="SearchBox">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${_t}</button>
      <div class="LoadingIcon">${Mo}</div>
    </div>
  </div>
</template>
`),nn=T(`
<template>
  <div class="Geocoder">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${_t}</button>
      <div class="LoadingIcon">${Mo}</div>
    </div>
  </div>
</template>
`);function te(){return"mbx"+new rn.SessionToken().id.slice(0,8)}function ae(o){try{return JSON.parse(o)}catch(e){return null}}function Ce(o,e){if(o==null||e==null||typeof o!="object"||typeof e!="object")return o===e;let s=Object.keys(o),i=Object.keys(e);if(s.length!==i.length)return!1;for(let n of s)if(!Ce(o[n],e[n]))return!1;return!0}function yo(o,e){let s=Math.pow(10,e);return Math.round(o*s)/s}function an(o){return Boolean(o.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function ln(o){return Boolean(en.some(e=>o.includes(e)))}var Ye,ke,we,I=class extends HTMLElement{constructor(){super(...arguments);r(this,Ye,te());r(this,ke,void 0);r(this,we,e=>`${t(this,Ye)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,s){let i=l=>l.replace(e,s);Ao(this,i);let n=Array.from(this.querySelectorAll("style"));for(let l of n)l.textContent=Rt(l.textContent,i);n.length&&d(this,ke,n[n.length-1]);let a=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let l of a)l.id=l.id.replace(e,s)}connectedCallback(){if(this.childElementCount>0){let n=this.dataset.seed,a=t(this,Ye);n&&n!==a&&(this.clonedCallback(n,a),this.dataset.seed=a);return}this.dataset.seed=t(this,Ye);let e=this.template;if(e){let n=this.prepareTemplate(e);this.appendChild(n)}let s=this.templateStyle;if(s){let n=document.createElement("style");n.textContent=this.prepareCSS(s),this.appendChild(n)}let i=document.createElement("style");this.templateUserStyle&&(i.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(i),d(this,ke,i)}prepareTemplate(e){let s=e.content.firstElementChild;return Ao(s.cloneNode(!0),t(this,we))}prepareCSS(e){return So(e,t(this,we))}updateTemplateUserStyle(e){!t(this,ke)||(t(this,ke).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(Rt(e,t(this,we)))}querySelectorAll(e){return super.querySelectorAll(Rt(e,t(this,we)))}addEventListener(e,s,i){super.addEventListener(e,s,i)}removeEventListener(e,s,i){super.removeEventListener(e,s,i)}dispatchEvent(e){return super.dispatchEvent(e)}};Ye=new WeakMap,ke=new WeakMap,we=new WeakMap;var dn='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var cn='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var un=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`;var pn=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`;var hn=`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>
</svg>`;var gn="@mapbox/search-js-web",Ie="1.5.0";var vr=`https://api.mapbox.com/search-js/v${Ie}/img/style-toggle-satellite.jpg`,br=`https://api.mapbox.com/search-js/v${Ie}/img/style-toggle-default.jpg`,Er=768-1,xr=`@media only screen and (max-width: ${Er}px)`,To={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:_t,question:dn,marker:cn,street:un,addressMarker:pn,search:hn},images:{styleToggleDefault:br,styleToggleSatellite:vr}};function A(o,e={}){let s=p(p({},To.variables),e.variables||{}),i=e.cssText||"",n="";for(let[a,l]of Object.entries(s)){if(!Array.isArray(l)){n+=`--${a}: ${l};`;continue}if(l[0]!=="mobile"){let m=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${a} ${m}`)}let[,c,u]=l;i+=`${xr} { ${o} { --${a}: ${c} !important; } }`,n+=`--${a}: ${u};`}return i+`${o} { ${n} }`}function k(o,e={}){return p(p({},To.icons),e.icons||{})[o]}function fn(o,e={}){return p(p({},To.images),e.images||{})[o]}var fe=require("@floating-ui/dom"),Oe,Li,Ci=class{constructor(e,s,i){r(this,Oe,void 0);r(this,Li,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>y(this,null,function*(){let e={placement:this.options.placement,middleware:[(0,fe.offset)(this.options.offset),this.options.flip&&(0,fe.flip)()].filter(Boolean)},{x:s,y:i}=yield(0,fe.computePosition)(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${s}px`,top:`${i}px`})});this.referenceEl=e,this.floatingEl=s,d(this,Oe,p(p({},t(this,Li)),i)),this.destroy=(0,fe.autoUpdate)(this.referenceEl,this.floatingEl,this.update)}get options(){return t(this,Oe)}set options(e){d(this,Oe,p(p({},t(this,Oe)),e))}};Oe=new WeakMap,Li=new WeakMap;var _=".Geocoder *,.MapboxAddressConfirmation *,.MapboxAddressConfirmationFeature *,.MapboxAddressConfirmationNoFeature *,.MapboxAddressMinimap *,.MapboxSearch *,.SearchBox *{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Geocoder,.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.ClearBtn:focus{border:1.5px solid #909090;border-radius:4px}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var h=class extends CustomEvent{constructor(e,s){super(e,{composed:!0,detail:s})}clone(e){let s=new h(this.type,this.detail);return e&&Object.defineProperty(s,"target",{value:e}),s}};var vn="Type in 2 or more characters for results.",bn="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",En="No search results.",xn=(o,e,s)=>`${e} ${e===1?"result is":"results are"} available. ${o}. ${s} of ${e} is selected.`,Sn=o=>`${o} ${o===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function ki(o){let e=o.currentTarget;(o.key===" "||o.key==="Enter")&&(o.preventDefault(),o.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var An="search-listbox__description",ve=o=>{let e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.setAttribute("role","status"),e.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let s=document.createElement("div");return s.setAttribute("id",`${o}--${An}`),e.appendChild(s),e},Lo=(o,e)=>{var i;let s=(i=document.body.querySelector(`[id="${e}--${An}"]`))!=null?i:null;s&&(s.textContent=o)},wi=o=>{o.name=o.name+" address-search",o.setAttribute("data-lpignore","true")},Mn=(o,e,s)=>{let i=null,n=!e||e.length===0;if((o==null?void 0:o.length)<2)i=vn+" "+bn;else if(n)i=En;else if(s!==void 0){let a=e[s],l=a.name||a.feature_name||a.properties.name;i=xn(l,e.length,s+1)}else i=Sn(e.length);return i};var Dt=(o,e)=>{switch(e){case 0:return o.matching_name||o.feature_name||o.address_line1;case 2:return o.name;case 1:return o.properties.name;default:return""}},yn=(o,e)=>{switch(e){case 0:return o.description;case 2:return o.feature_type==="poi"?o.full_address:o.place_formatted;case 1:return o.properties.place_formatted;default:return""}};function Co(o,e){return`${o}-${e}`}var O,B,Ve,se,We,Nt,Ke,Gt,Tn,Ii,Ar,jt,$t,Ut,zt,Ze,qt,Xt,Yt,W=class extends I{constructor(){super(...arguments);r(this,Gt);r(this,Ii);this.suggestions=null;r(this,O,null);r(this,B,void 0);r(this,Ve,void 0);r(this,se,void 0);r(this,We,void 0);r(this,Nt,null);r(this,Ke,void 0);r(this,jt,{});r(this,$t,{});r(this,Ut,e=>{let{Results:s}=t(this,B),i=e.target;if(i.dataset.mapboxSuccess){delete i.dataset.mapboxSuccess;return}let n=i.value;this.renderAriaMessage(),s.setAttribute("aria-busy","true"),this.dispatchEvent(new h("input",{lastInput:e.data,inputText:n}))});this.renderAriaMessage=()=>{var s;let e=Mn((s=this.input)==null?void 0:s.value,this.suggestions,this.selectedIndex);Lo(e,this.dataset.seed)};this.clearAriaMessage=()=>{Lo("",this.dataset.seed)};this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}ge(this,Ii,Ar).call(this),e.length&&ge(this,Gt,Tn).call(this);let{Results:s}=t(this,B);s.setAttribute("aria-busy","false")};this.handleError=()=>{let{Results:e}=t(this,B);e.setAttribute("aria-busy","false"),this.hideResults()};r(this,zt,(e,s)=>y(this,null,function*(){let i=this.input;i&&(i.dataset.mapboxSuccess="true");let n={suggestion:e,selectedIndex:s};this.dispatchEvent(new h("select",n)),this.hideResults()}));r(this,Ze,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new h("focus")),this.renderAriaMessage(),ge(this,Gt,Tn).call(this)});r(this,qt,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new h("blur")),this.clearAriaMessage())});r(this,Xt,e=>{t(this,B).MapboxSearch.contains(e.relatedTarget)||this.hideResults()});this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)};this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)};r(this,Yt,e=>{var s;if(!!((s=this.suggestions)==null?void 0:s.length)){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0&&e.key==="Enter"){e.preventDefault(),t(this,zt).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}}})}get template(){return tn}get templateStyle(){return _}get templateUserStyle(){return A(".MapboxSearch",this.theme)}get input(){return t(this,We)}set input(e){let s=t(this,We);s&&(s.removeEventListener("input",t(this,Ut)),s.removeEventListener("focus",t(this,Ze)),s.removeEventListener("blur",t(this,qt)),s.removeEventListener("keydown",t(this,Yt)),t(this,O)&&t(this,O).destroy()),e&&(e.addEventListener("input",t(this,Ut)),e.addEventListener("focus",t(this,Ze)),e.addEventListener("blur",t(this,qt)),e.addEventListener("keydown",t(this,Yt)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",t(this,se)),this.isConnected&&d(this,O,new Ci(e,t(this,B).Results,this.popoverOptions))),d(this,We,e)}get searchService(){return t(this,Nt)}set searchService(e){d(this,Nt,e)}get selectedIndex(){return t(this,Ke)}set selectedIndex(e){let s=t(this,Ke);d(this,Ke,e);let{ResultsList:i}=t(this,B),n=Co(t(this,se),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",n),i.setAttribute("aria-activedescendant",n)):(this.input.removeAttribute("aria-activedescendant"),i.removeAttribute("aria-activedescendant")),s!==e){let a=Co(t(this,se),s),l=i.querySelector(`#${a}`);if(l==null||l.removeAttribute("aria-selected"),l==null||l.setAttribute("tabindex","-1"),e!==void 0){let c=i.querySelector(`#${n}`);c==null||c.setAttribute("aria-selected","true"),c==null||c.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:s}=t(this,B);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),s.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let s=this.prepareTemplate(sn);return s.id=Co(t(this,se),e),s}fillItem(e,s,i,n){let a=e.querySelector('[class$="SuggestionIcon"]'),l=e.querySelector('[class$="SuggestionName"]'),c=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(a.innerHTML=k(s.accuracy==="street"?"street":"addressMarker",this.theme),a.removeAttribute("aria-hidden")):a.setAttribute("aria-hidden","true"),l.textContent=c.textContent="",l.textContent=Dt(s,this.searchService),c.textContent=yn(s,this.searchService),i===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(i+1).toString()),e.setAttribute("aria-setsize",n.toString())}get theme(){return t(this,jt)}set theme(e){d(this,jt,e),!(!t(this,B)||!e)&&this.updateTemplateUserStyle(A(".MapboxSearch",e))}get popoverOptions(){return t(this,$t)}set popoverOptions(e){d(this,$t,e),t(this,O)&&(t(this,O).options=e,t(this,O).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,d(this,Ve,this.dataset.seed+"-Label"),d(this,se,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",t(this,se)),d(this,B,F(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:s,Label:i}=t(this,B);i.id=t(this,Ve),s.id=t(this,se),s.setAttribute("aria-labelledby",t(this,Ve)),e.addEventListener("focusout",t(this,Xt)),!t(this,O)&&this.input&&d(this,O,new Ci(this.input,t(this,B).Results,this.popoverOptions)),requestAnimationFrame(()=>{t(this,O)&&t(this,O).update()})}disconnectedCallback(){this.input=null;let{Results:e}=t(this,B);e.removeEventListener("focusout",t(this,Xt)),t(this,O)&&t(this,O).destroy()}focus(){document.activeElement===this.input?t(this,Ze).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){t(this,O)&&t(this,O).update()}};O=new WeakMap,B=new WeakMap,Ve=new WeakMap,se=new WeakMap,We=new WeakMap,Nt=new WeakMap,Ke=new WeakMap,Gt=new WeakSet,Tn=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:s}=t(this,B),i=this.input.getBoundingClientRect();s.style.setProperty("--width",`${i.width}px`),s.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},Ii=new WeakSet,Ar=function(){let{ResultsList:e}=t(this,B);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let s=Vo(e);if(this.suggestions.length>s.length)for(let i=s.length;i<this.suggestions.length;i++){let n=this.renderItem(i);s.push(n),n.onmouseenter=()=>{this.selectedIndex=i},n.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(n)}if(this.suggestions.length<s.length)for(let i=this.suggestions.length;i<s.length;i++)s[i].remove();for(let i=0;i<this.suggestions.length;i++){let n=this.suggestions[i],a=s[i];this.fillItem(a,n,i,this.suggestions.length),a.onclick=()=>{t(this,zt).call(this,n,i)}}},jt=new WeakMap,$t=new WeakMap,Ut=new WeakMap,zt=new WeakMap,Ze=new WeakMap,qt=new WeakMap,Xt=new WeakMap,Yt=new WeakMap;window.MapboxSearchListbox=W;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",W);var Ln=require("@mapbox/search-js-core");var Mr=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),yr=new Set(["off","on","true","false"]);function ko(o){let e=o.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function Vt(o){let e=o||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var Tr="section-",Lr="section-default",Cr="section-shipping",kr="section-billing";function Wt(o){let e=Array.from(o.querySelectorAll("[autocomplete]")).filter(i=>{let n=i.tagName.toLowerCase();return n==="input"||n==="select"||n==="textarea"}),s=[];for(let i of e){if(!Ko(i))continue;let n=i.getAttribute("autocomplete")||"";if(!n||yr.has(n))continue;let a=n.toLowerCase().split(" ");if(a.length>3)continue;let l=a[a.length-1];if(!Mr.has(l))continue;a.pop();let c=Lr;if(a.length){let u=a[a.length-1];u==="shipping"&&(c=Cr,a.pop()),u==="billing"&&(c=kr,a.pop())}if(a.length){let u=a[a.length-1];u.startsWith(Tr)&&(c=u)}s.push({input:i,section:c,field:l})}return s}function Be(o,e){let s=[],i=[],n=Wt(o),a=null;for(let{input:l,section:c,field:u}of n){let m=s.length-1,S=!1;if(s.length?(i[m]!==c||s[m][u])&&(S=!0):S=!0,S){if(a)break;s.push({[u]:l}),i.push(c),m++}else s[m][u]=l;l===e&&(a=s[m])}return a!=null?a:{}}function wo(o,e,s){var l;let i=Be(o,e),n=[s.address_line1,s.address_line2,s.address_line3].filter(c=>Boolean(c)).join(", ");V(i["street-address"],i["address-line2"]?s.address_line1||"":n),V(i["address-line1"],s.address_line1||""),V(i["address-line2"],s.address_line2||""),V(i["address-level1"],s.address_level1||""),V(i["address-level2"],s.address_level2||""),V(i["address-level3"],s.address_level3||"");let a=s.country_code||((l=s.metadata)==null?void 0:l.iso_3166_1)||"";if(i.country&&i.country instanceof HTMLSelectElement){let c=i.country.querySelector("option").value;c===""&&(c=i.country.querySelectorAll("option")[1].value);let u=c===c.toUpperCase();V(i.country,u?a.toUpperCase():a)}else V(i.country,a);V(i["country-name"],s.country||""),V(i["postal-code"],s.postcode||"")}function Oi(o,e){let s=Be(o,e),i={};for(let[n,a]of Object.entries(s))(a==null?void 0:a.value)&&(i[n]=a.value);return i}function Qe(o){let e=[];return o["street-address"]?e.push(o["street-address"]):e.push(o["address-line1"]||""),e.push(o["address-line2"]||""),e.push(o["address-line3"]||""),e.push(o["address-level3"]||""),e.push(o["address-level2"]||""),e.push(o["address-level1"]||""),e.push(o["postal-code"]||""),o["country-name"]?e.push(o["country-name"]):e.push(o.country||""),e.filter(s=>Boolean(s)).map(s=>s.trim()).join(", ")}function Kt(o,e){let s=ko(e);if(!s)return;let i=(0,Ln.featureToSuggestion)(o);wo(s,e,i);let n=Be(s,e);n["address-line2"]&&!i.address_line2&&n["address-line2"].focus()}function Cn(o){var i;let e={},s=[o.properties.address_line1,o.properties.address_line2,o.properties.address_line3].filter(n=>Boolean(n)).join(", ");return e["street-address"]=s,e["address-line1"]=o.properties.address_line1,e["address-line2"]=o.properties.address_line2,e["address-line3"]=o.properties.address_line3,e["address-level1"]=o.properties.address_level1,e["address-level2"]=o.properties.address_level2,e["address-level3"]=o.properties.address_level3,e.country=(i=o.properties.metadata)==null?void 0:i.iso_3166_1,e["country-name"]=o.properties.country,e["postal-code"]=o.properties.postcode,e}function kn(o,e){for(let[s,i]of Object.entries(o))if(e[s]!==i)return!0;return!1}var Bi=o=>o.filter((e,s,i)=>{let n=Dt(e,0);return e.accuracy!=="street"||i.findIndex(a=>n===Dt(a,0))===s}),X=(o,e,s)=>{let a=s?e||"address-line1":"new-password";o&&(o.autocomplete=a)},Hi=(o,e,s)=>{if(!o||!s)return;X(o,e,!0);let i={properties:E(p({},s),{address_line1:s.address_line1+" ",postcode:null})};Kt(i,o),X(o,e,!1),o==null||o.focus()};var Bn=require("@mapbox/search-js-core");var Pi=require("@mapbox/search-js-core"),Io=Si(require("no-scroll")),On=require("focus-trap");var wn=require("@mapbox/search-js-core"),In=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new wn.SessionToken;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},x=new In;Object.defineProperty(x,"autofillSessionToken",{configurable:!1,writable:!1});var wr=T(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),Zt,U,He,Qt,Pe=class extends I{constructor(){super(...arguments);r(this,Zt,!1);r(this,U,void 0);r(this,He,void 0);r(this,Qt,{})}get template(){return wr}get templateStyle(){return _}get templateUserStyle(){return A(".MapboxAddressConfirmation",this.theme)}get theme(){return t(this,Qt)}set theme(e){if(d(this,Qt,e),!t(this,U)||!e)return;this.updateTemplateUserStyle(A(".MapboxAddressConfirmation",e));let{ContentFeature:s,ContentNoFeature:i}=t(this,U);s.theme=e,i.theme=e}connectedCallback(){super.connectedCallback(),d(this,U,F(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=t(this,U);e.setAttribute("aria-hidden","true");let s=this.theme;if(s){let{ContentFeature:i,ContentNoFeature:n}=t(this,U);i.theme=s,n.theme=s}}disconnectedCallback(){d(this,He,null)}hide(){var s;if(d(this,Zt,!1),!t(this,U))return;let{MapboxAddressConfirmation:e}=t(this,U);e.setAttribute("aria-hidden","true"),(s=t(this,He))==null||s.deactivate(),Io.default.off()}show(e,s,i){return y(this,null,function*(){var C;if(!t(this,U))return{type:"cancel"};let{MapboxAddressConfirmation:n,ContentFeature:a,ContentNoFeature:l}=t(this,U),{accessToken:c,minimap:u=!1,theme:m,footer:S}=s;this.theme=m,i?(a.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),a.minimap=u,a.accessToken=c,a.footer=S,a.update(i,e)):(a.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),d(this,Zt,!0),n.removeAttribute("aria-hidden"),Io.default.on();let w=i?a:l;return d(this,He,(0,On.createFocusTrap)(n,{fallbackFocus:w,escapeDeactivates:()=>(this.hide(),!0)})),(C=t(this,He))==null||C.activate(),new Promise(xi=>{let Y=w,$=Le=>{Y.removeEventListener("result",$);let jo=Le.detail;this.hide(),xi(jo==="change"?{type:"change",feature:i}:{type:jo})};Y.addEventListener("result",$)})})}tryShow(e,s){return y(this,null,function*(){if(!t(this,U))return{type:"cancel"};let{accessToken:i,options:n={}}=s,a=new Pi.ValidationCore(p({accessToken:i},n)),l=Qe(e),u=(yield a.validate(l,{sessionToken:x.autofillSessionToken})).features[0];if(u){let m=w=>w.properties.match_code.confidence===Pi.MatchCodeConfidence.exact,{skipConfirmModal:S=m}=s;if(S(u))return{type:"nochange"}}return yield this.show(e,s,u)})}};Zt=new WeakMap,U=new WeakMap,He=new WeakMap,Qt=new WeakMap;window.MapboxAddressConfirmation=Pe;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",Pe);var Oo=new Pe;function Ri(s){return y(this,arguments,function*(o,e={}){var u;let{sections:i=[]}=e;Oo.parentNode||document.body.appendChild(Oo);let n={type:"nochange"},a=Vt(o),l=Wt(o),c=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let m of a){if(i.length){let $=l.find(Le=>Le.input===m);if(!$||!i.includes($.section))continue}let S=Oi(o,m),w=c.find($=>$.input===m),C=w==null?void 0:w.autofillHost;if(C){let $=C.retrieveFeature;if($){let Le=Cn($);if(!kn(S,Le))continue}}let xi=e.accessToken||x.accessToken,Y=yield Oo.tryShow(S,E(p({},e),{accessToken:xi}));if(Y.type==="change"){let $=Be(o,m);if(((u=$["address-line2"])==null?void 0:u.value)&&(Y.feature.properties.address_line2=$["address-line2"].value),w)C.simulateRetrieve(Y.feature);else{m.dataset.mapboxSuccess="true";let Le=(0,Bn.featureToSuggestion)(Y.feature);wo(o,m,Le)}}Y.type==="change"&&n.type!=="cancel"&&(n=Y),Y.type==="cancel"&&(n=Y)}return n})}function Fi(o,e,s,i,n){if(e){let a=T(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[l,c]=Array.from(a.querySelectorAll("span > span"));if(s&&i)l.textContent=s,c.textContent=i;else{let u=e.split(",");l.textContent=u[0].trim(),c.textContent=u.slice(1).join(",").trim()}if(!n){if(o["address-line2"]){let u=document.createElement("span");u.textContent=o["address-line2"],a.insertBefore(u,c),a.insertBefore(document.createElement("br"),c)}if(o["address-line3"]){let u=document.createElement("span");u.textContent=o["address-line3"],a.insertBefore(u,c),a.insertBefore(document.createElement("br"),c)}}return a}else{let a=o["street-address"]||o["address-line1"]||"",l=o["address-line2"],c=o["address-line3"],u=[o["address-level4"]||"",o["address-level3"]||"",o["address-level2"]||"",`${o["address-level1"]||""} ${o["postal-code"]||""}`,o.country||o["country-name"]||""].filter(Boolean).join(", "),S=[a,l,c,u].filter(Boolean).map(C=>`<span>${C}</span>`).join("<br />");return T(`
        <span>${S}</span>
      `)}}function _i(o,e,s,i){return y(this,null,function*(){if(!s)return;let n=ko(o),a=Object.values(Be(n,o));if(!e.detail.elements.some(C=>a.includes(C)))return;let l=Wt(n),u=l.find(C=>C.input===o).section,m=Array.from(new Set(l.filter(C=>e.detail.elements.includes(C.input)).map(C=>C.section)));if(!m.includes(u))return;let S=typeof s=="object"&&s.sections||[];if(S.length&&!S.some(C=>m.includes(C)))return;let w=typeof s=="object"?s:{};w=E(p({},w),{accessToken:i,sections:[u]}),yield Ri(n,w)})}var Ir="https://contribute-api.mapbox.com/v1",Or="https://contribute-api-staging.tilestream.net/v1",Br="edit-suggestion";function Di(o,e){if(!x.feedbackEnabled)return;let s=window.location.hostname,n=`${an(s)||ln(s)?Or:Ir}/${Br}/address?access_token=${o}`,{originalCoordinate:a,originalAddress:l,changes:c,labels:u}=e,m={version:"1.18",action:"update",reason:"incorrect_data",location:{longitude:a[0],latitude:a[1]},userEmail:"no-reply-autofill@mapbox.com",changes:c,placeName:l,labels:u,notificationsDisabled:!0,submissionNotificationDisabled:!0};fetch(n,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${Ie}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(m)})}var Hr=T(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),ie,Jt,Je,es,ts,ss,is,os,Bo=class extends I{constructor(){super(...arguments);r(this,ie,void 0);r(this,Jt,{});this.minimap=!1;r(this,Je,void 0);r(this,es,void 0);this.update=(e,s)=>{var c;d(this,Je,e),d(this,es,s);let{ModalMap:i,Minimap:n,ModalAddressApprove:a}=t(this,ie);if(this.minimap){if(i.removeAttribute("aria-hidden"),n.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:u,theme:m,mapStyleMode:S,satelliteToggle:w}=this.minimap;u&&(n.defaultMapStyle=this.minimap.defaultMapStyle),m&&(n.theme=this.minimap.theme),S&&(n.mapStyleMode=S),w!==void 0&&(n.satelliteToggle=w)}n.feature=e}else i.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;a.innerHTML="",a.appendChild(Fi(s,l,e.properties.feature_name,e.properties.description,((c=e.properties.place_type)==null?void 0:c[0])==="secondary_address"))};r(this,ts,()=>{this.dispatchEvent(new h("result","cancel"))});this.approve=()=>{this.dispatchEvent(new h("result","change"))};this.reject=()=>{this.dispatchEvent(new h("result","nochange")),Di(this.accessToken,{originalCoordinate:t(this,Je).geometry.coordinates,originalAddress:t(this,Je).properties.full_address,changes:{address:Qe(t(this,es))},labels:["address_confirm_form"]})};r(this,ss,te());r(this,is,te());r(this,os,te())}get template(){return Hr}get templateStyle(){return _}get templateUserStyle(){return A(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return t(this,Jt)}set theme(e){if(d(this,Jt,e),!t(this,ie)||!e)return;this.updateTemplateUserStyle(A(".MapboxAddressConfirmationFeature",e));let{IconQuestion:s,IconClose:i}=t(this,ie);s.innerHTML=k("question",e),i.innerHTML=k("close",e)}set footer(e){if(e===void 0)return;let s=this.querySelector(".ModalFooter");typeof e=="string"?(s.textContent=e,s.removeAttribute("aria-hidden")):e?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),d(this,ie,F(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:s,IconClose:i,ButtonApprove:n,ButtonReject:a,ModalAddressApprove:l}=t(this,ie);e.setAttribute("aria-labelledby",t(this,is)),e.setAttribute("aria-describedby",t(this,os)),i.setAttribute("aria-controls",t(this,ss)),e.id=t(this,ss),s.id=t(this,is),l.id=t(this,os);let c=Array.from(this.querySelectorAll('[role="button"]'));for(let m of c)m.addEventListener("keydown",ki);i.addEventListener("click",t(this,ts)),n.addEventListener("click",this.approve),a.addEventListener("click",this.reject);let u=this.theme;if(u){let{IconQuestion:m,IconClose:S}=t(this,ie);m.innerHTML=k("question",u),S.innerHTML=k("close",u)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:s}=t(this,ie);e.removeEventListener("click",t(this,ts)),s.removeEventListener("click",this.approve)}};ie=new WeakMap,Jt=new WeakMap,Je=new WeakMap,es=new WeakMap,ts=new WeakMap,ss=new WeakMap,is=new WeakMap,os=new WeakMap;window.MapboxAddressConfirmationFeature=Bo;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",Bo);var Pr=T(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),oe,ns,rs,as,ls,ds,Ho=class extends I{constructor(){super(...arguments);r(this,oe,void 0);r(this,ns,{});this.update=e=>{let{ModalAddress:s}=t(this,oe);s.innerHTML="",s.appendChild(Fi(e))};r(this,rs,()=>{this.dispatchEvent(new h("result","cancel"))});this.reject=()=>{this.dispatchEvent(new h("result","nochange"))};r(this,as,te());r(this,ls,te());r(this,ds,te())}get template(){return Pr}get templateStyle(){return _}get templateUserStyle(){return A(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return t(this,ns)}set theme(e){if(d(this,ns,e),!t(this,oe)||!e)return;this.updateTemplateUserStyle(A(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:s,IconClose:i}=t(this,oe);s.innerHTML=k("question",e),i.innerHTML=k("close",e)}connectedCallback(){super.connectedCallback(),d(this,oe,F(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:s,IconClose:i,ModalAddress:n,ButtonReject:a}=t(this,oe);e.setAttribute("aria-labelledby",t(this,ls)),e.setAttribute("aria-describedby",t(this,ds)),i.setAttribute("aria-controls",t(this,as)),e.id=t(this,as),s.id=t(this,ls),n.id=t(this,ds);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let u of l)u.addEventListener("keydown",ki);i.addEventListener("click",t(this,rs)),a.addEventListener("click",this.reject);let c=this.theme;if(c){let{IconQuestion:u,IconClose:m}=t(this,oe);u.innerHTML=k("question",c),m.innerHTML=k("close",c)}}disconnectedCallback(){let{IconClose:e,ButtonReject:s}=t(this,oe);e.removeEventListener("click",t(this,rs)),s.removeEventListener("click",this.reject)}};oe=new WeakMap,ns=new WeakMap,rs=new WeakMap,as=new WeakMap,ls=new WeakMap,ds=new WeakMap;window.MapboxAddressConfirmationNoFeature=Ho;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",Ho);var so=require("@mapbox/search-js-core");var Pn=require("@mapbox/search-js-core");var Hn='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var Ni="browser-autofilled",Po=[];function Fr(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:Po}})),Po=[]}var _r=(0,Pn.debounce)(Fr,5);function Rn(o){o.hasAttribute(Ni)||(o.setAttribute(Ni,""),Po.push(o),_r())}function Fn(o){!o.hasAttribute(Ni)||o.removeAttribute(Ni)}function Dr(o){o.animationName==="onbrowserautofillstart"?Rn(o.target):Fn(o.target)}function Nr(o){let e=o.target;e.nodeName.toLowerCase()!=="select"&&!o.simulated&&!(o instanceof h)&&(o.inputType==="insertReplacementText"||!("data"in o))?Rn(e):Fn(e)}function Gi(){x.detectBrowserAutofillEnabled||(x.detectBrowserAutofillEnabled=!0,Zo(Hn),document.addEventListener("animationstart",Dr,!0),document.addEventListener("input",Nr,!0))}var et=require("@mapbox/search-js-core");var Ro=(o,e)=>{if(typeof o=="string")if(o==="ip"){let s=e==null?void 0:e.get("ip-proximity");return s&&typeof s=="string"?s.split(",").map(parseFloat):[999,999]}else return o.split(",").map(Number);else return et.LngLat.convert(o).toArray()},Gr=o=>{let e={};return o.bbox&&(typeof o.bbox=="string"?e.bbox=o.bbox.split(",").map(Number):e.bbox=et.LngLatBounds.convert(o.bbox).toFlatArray()),o.proximity&&(e.proximity=Ro(o.proximity)),o.country&&(e.country=o.country.split(",")),o.language&&(e.language=o.language.split(",")),o.types&&(typeof o.types=="string"?e.types=o.types.split(","):e.types=Array.from(o.types)),o.limit&&(typeof o.limit=="string"?e.limit=parseInt(o.limit):e.limit=o.limit),e},jr=(o,e)=>{let s={};return o.bbox&&(typeof o.bbox=="string"?s.bbox=o.bbox.split(",").map(Number):s.bbox=et.LngLatBounds.convert(o.bbox).toFlatArray()),o.proximity&&(s.proximity=Ro(o.proximity,e)),o.country&&(s.country=o.country.split(",")),o.language&&(s.language=o.language.split(",")),o.types&&(typeof o.types=="string"?s.types=o.types.split(","):s.types=Array.from(o.types)),o.limit&&(typeof o.limit=="string"?s.limit=parseInt(o.limit):s.limit=o.limit),typeof o.autocomplete=="boolean"&&(s.autocomplete=o.autocomplete),o.worldview&&(s.worldview=o.worldview),o.permanent&&(s.permanent=o.permanent),s},$r=(o,e)=>{let s={};return o.bbox&&(typeof o.bbox=="string"?s.bbox=o.bbox.split(",").map(Number):s.bbox=et.LngLatBounds.convert(o.bbox).toFlatArray()),o.proximity&&(s.proximity=Ro(o.proximity,e)),o.country&&(s.country=o.country.split(",")),o.language&&(s.language=o.language.split(",")),o.limit&&(typeof o.limit=="string"?s.limit=parseInt(o.limit):s.limit=o.limit),o.streets!==void 0&&o.streets!==null&&(typeof o.streets=="string"?s.streets=o.streets==="true":s.streets=o.streets),s},_n=(o,e,s)=>{switch(e){case 2:return Gr(o);case 1:return jr(o,s);case 0:return $r(o,s)}},Ur=o=>({suggestionIds:o.map(e=>e.mapbox_id||""),suggestionNames:o.map(e=>e.feature_type==="poi"?[e.name,e.full_address].filter(Boolean).join(", "):e.full_address?e.full_address:e.name),suggestionTypes:o.map(e=>e.feature_type||""),suggestionSources:o.map(e=>e._source||"")}),zr=o=>({suggestionIds:o.map(e=>e.properties.mapbox_id||e.id||""),suggestionNames:o.map(e=>e.properties.full_address||""),suggestionTypes:o.map(e=>e.properties.feature_type||""),suggestionSources:o.map(e=>e._source||"")}),qr=o=>({suggestionIds:o.map(e=>e.mapbox_id||""),suggestionNames:o.map(e=>e.full_address||""),suggestionTypes:o.map(e=>{var s;return((s=e.place_type)==null?void 0:s[0])||""}),suggestionSources:o.map(e=>e._source||"")}),Dn=(o,e)=>{switch(e){case 2:return Ur(o);case 1:return zr(o);case 0:return qr(o)}},Fo=(o,e)=>{switch(o){case 2:return"search/searchbox/v1/suggest";case 1:return`search/geocode/v6/${/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/.test(e)?"reverse":"forward"}`;case 0:return"autofill/v1/suggest"}};var ji,$i,Ee,cs,Ui,xe,tt,st,it,ot,zi,Re,ne,qi,Xi,Yi,nt,Vi,Wi,Ki,Zi,Qi,Ji,rt,Se,at,le=class{constructor(e){r(this,ji,"https://api.mapbox.com");r(this,$i,"events/v2");r(this,Ee,void 0);r(this,cs,void 0);r(this,Ui,navigator.language||null);r(this,xe,[]);r(this,tt,"");r(this,st,0);r(this,it,!0);r(this,ot,1e3);r(this,zi,100);r(this,Re,void 0);r(this,ne,void 0);this.start=(e,s,i,n)=>{d(this,Ee,s.accessToken);let a=t(this,nt).call(this,"search.start",{queryString:e,options:s,map:i,responseHeaders:n});!a||t(this,at).call(this,a)};this.input=(e,s,i,n,a)=>{if(d(this,Ee,i.accessToken),t(this,it)&&(this.start(e,i,n,a),d(this,it,!1)),!s)return;let l=t(this,nt).call(this,"search.keystroke",{lastInput:s,queryString:e,options:i,map:n,responseHeaders:a});!l||t(this,at).call(this,l)};this.select=(e,s,i,n,a,l)=>{d(this,Ee,n.accessToken);let c=t(this,nt).call(this,"search.select",{queryString:e,selectedIndex:s,suggestions:i,options:n,map:a,responseHeaders:l});!c||c.resultIndex===t(this,st)&&c.queryString===t(this,tt)||c.resultIndex===-1||(d(this,st,c.resultIndex),d(this,tt,c.queryString),t(this,at).call(this,c))};this.clear=()=>{d(this,it,!0),d(this,tt,""),d(this,st,0),t(this,Se).call(this)};r(this,qi,e=>{let s=`${t(this,ji)}/${t(this,$i)}?access_token=${t(this,Ee)}`,i=t(this,Xi).call(this,e);try{fetch(s,i)}catch(n){t(this,Yi).call(this,n)}});r(this,Xi,e=>(Array.isArray(e)||(e=[e]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));r(this,Yi,e=>{console.log(e)});r(this,nt,(e,s)=>{if(e==="search.select"&&!(typeof s.selectedIndex=="number"||s.suggestions)||e==="search.keystroke"&&!s.lastInput)return null;let i=_n(s.options,t(this,ne),s.responseHeaders),n=t(this,Vi).call(this,e,s,i);return e==="search.keystroke"?t(this,Wi).call(this,n,s,i):e==="search.select"&&t(this,Ki).call(this,n,s,i),t(this,Ji).call(this,n)?n:null});r(this,Vi,(e,s,i)=>{let n={event:e,version:t(this,Qi).call(this,e),created:+new Date,sessionIdentifier:s.options.sessionToken,userAgent:t(this,cs),keyboardLocale:t(this,Ui),queryString:s.queryString};if(i&&(n=p(p({},n),i)),e==="search.start")for(let a of["streets","permanent"])delete n[a];if(s.map){let a=s.map.getZoom()||void 0,l=s.map.getCenter();n=E(p({},n),{mapZoom:a,mapCenterLat:l.lat,mapCenterLng:l.lng})}return n});r(this,Wi,(e,s,i)=>{switch(t(this,ne)){case 0:i.streets&&(e.streets=i.streets);break;case 1:i.permanent&&(e.permanent=i.permanent);break}e.path=Fo(t(this,ne),s.queryString),e.lastAction=s.lastInput});r(this,Ki,(e,s,i)=>{switch(t(this,ne)){case 0:i.streets&&(e.streets=i.streets);break;case 1:i.permanent&&(e.permanent=i.permanent);break}e.path=Fo(t(this,ne),s.queryString);let{selectedIndex:n,suggestions:a}=s;if(a&&a.length>0){let l=Dn(a,t(this,ne));e.resultIndex=n,e.resultPlaceName=l.suggestionNames[n],e.resultId=l.suggestionIds[n],e.resultId.startsWith("dXJuOm1ie")&&(e.resultMapboxId=e.resultId),e.suggestionIds=l.suggestionIds,e.suggestionNames=l.suggestionNames,e.suggestionTypes=l.suggestionTypes,e.suggestionSources=l.suggestionSources}});r(this,Zi,()=>`mapbox.${gn.split("/")[1]}.${Ie}.${navigator.userAgent}`);r(this,Qi,e=>["search.keystroke","search.select"].includes(e)?"2.2":"2.0");r(this,Ji,e=>{if(!e||!e.event)return!1;let s=["event","created","sessionIdentifier","queryString"],i=["event","created","sessionIdentifier","queryString","lastAction"],n=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],a=e.event;return a==="search.start"?t(this,rt).call(this,e,s):a==="search.keystroke"?t(this,rt).call(this,e,i):a==="search.select"?t(this,rt).call(this,e,n):!0});r(this,rt,(e,s)=>s.every(i=>i==="queryString"?typeof e[i]=="string"&&e[i].length>0:e[i]!==void 0));r(this,Se,()=>{t(this,xe).length>0&&t(this,Ee)&&(t(this,qi).call(this,t(this,xe)),d(this,xe,[])),t(this,Re)&&clearTimeout(t(this,Re)),t(this,ot)&&d(this,Re,setTimeout(t(this,Se),t(this,ot)))});r(this,at,(e,s)=>{t(this,xe).push(e),(t(this,xe).length>=t(this,zi)||s)&&t(this,Se).call(this)});this.remove=()=>{t(this,Se).call(this)};d(this,ne,e),d(this,cs,t(this,Zi).call(this)),d(this,Re,setTimeout(t(this,Se),t(this,ot)))}};ji=new WeakMap,$i=new WeakMap,Ee=new WeakMap,cs=new WeakMap,Ui=new WeakMap,xe=new WeakMap,tt=new WeakMap,st=new WeakMap,it=new WeakMap,ot=new WeakMap,zi=new WeakMap,Re=new WeakMap,ne=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,nt=new WeakMap,Vi=new WeakMap,Wi=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,rt=new WeakMap,Se=new WeakMap,at=new WeakMap;var de,P,R,g,Fe,ce,lt,us,ps,dt,hs,ms,gs,fs,vs,ct,eo,bs,to,ut=class extends I{constructor(){super(...arguments);r(this,de,new so.AddressAutofillCore);r(this,P,new so.SearchSession(t(this,de)));r(this,R,void 0);r(this,g,new W);r(this,Fe,new le(0));r(this,ce,void 0);this.options={};this.confirmOnBrowserAutofill=!1;r(this,lt,!1);r(this,us,e=>{let s=(e==null?void 0:e.suggestions)?Bi(e.suggestions):null;t(this,g).handleSuggest(s),this.dispatchEvent(new h("suggest",e))});r(this,ps,e=>{t(this,g).handleError(),this.dispatchEvent(new h("suggesterror",e))});r(this,dt,e=>{var i;if(this.dispatchEvent(new h("retrieve",e)),this.retrieveFeature=(i=e.features)==null?void 0:i[0],!t(this,R))return;let s=e;!s||!s.features||!s.features.length||Kt(s.features[0],t(this,R))});r(this,hs,()=>{var e;try{let s=(e=this.querySelector("input"))!=null?e:null;d(this,R,s),t(this,g).input=s,s&&s.addEventListener("blur",t(this,eo))}catch(s){d(this,R,null),t(this,g).input=null,console.error(s.message||s)}});r(this,ms,new MutationObserver(t(this,hs)));r(this,gs,e=>{t(this,g).blur(),_i(t(this,R),e,this.confirmOnBrowserAutofill,this.accessToken)});this.retrieveFeature=null;this.interceptSearch=null;r(this,fs,e=>{this.dispatchEvent(new h("input",e.detail.inputText));let{lastInput:s,inputText:i}=e.detail,n=this.browserAutofillEnabled===!0&&(i==null?void 0:i.length)<=2;if(X(t(this,R),t(this,ce),n),!i){t(this,to).call(this);return}let a=this.interceptSearch&&this.interceptSearch(i),l=this.interceptSearch?a:i;if(this.interceptSearch&&!a||(l==null?void 0:l.length)<=2){t(this,g).handleSuggest(null);return}t(this,P).suggest(l,this.options),t(this,Fe).input(l,s,E(p({},this.options),{sessionToken:t(this,P).sessionToken,accessToken:this.accessToken}),null,t(this,de).responseHeaders)});r(this,vs,e=>{let{suggestion:s,selectedIndex:i}=e.detail;s.accuracy!=="street"?(X(t(this,R),t(this,ce),!0),t(this,P).retrieve(s,this.options),t(this,Fe).select(this.input.value,i,t(this,g).suggestions,E(p({},this.options),{sessionToken:t(this,P).sessionToken,accessToken:this.accessToken}),null,t(this,de).responseHeaders)):Hi(t(this,R),t(this,ce),s)});r(this,ct,()=>{X(t(this,R),t(this,ce),!0),t(this,P).abort()});r(this,eo,e=>{t(this,g).contains(e.relatedTarget)||(t(this,ct).call(this),t(this,g).hideResults())});r(this,bs,()=>{var s;let e=this.browserAutofillEnabled===!0&&((s=t(this,R).value)==null?void 0:s.length)<=2;X(t(this,R),t(this,ce),e)});r(this,to,()=>{t(this,g).handleSuggest(null),t(this,Fe).clear()})}get accessToken(){return t(this,de).accessToken}set accessToken(e){t(this,de).accessToken=e}get input(){return t(this,R)}get theme(){return t(this,g).theme}set theme(e){t(this,g).theme=e}get popoverOptions(){return t(this,g).popoverOptions}set popoverOptions(e){t(this,g).popoverOptions=e}get browserAutofillEnabled(){return t(this,lt)}set browserAutofillEnabled(e){d(this,lt,e)}connectedCallback(){var s;super.connectedCallback(),x.autofillSessionEnabled=!0,t(this,P).sessionToken=x.autofillSessionToken.id,t(this,g).autofillHost=this,t(this,g).searchService=0;let e=(s=this.querySelector("input"))!=null?s:null;t(this,ms).observe(this,{subtree:!0,childList:!0}),t(this,hs).call(this),t(this,g).addEventListener("input",t(this,fs)),t(this,g).addEventListener("select",t(this,vs)),t(this,g).addEventListener("blur",t(this,ct)),t(this,g).addEventListener("focus",t(this,bs)),t(this,P).addEventListener("suggest",t(this,us)),t(this,P).addEventListener("suggesterror",t(this,ps)),t(this,P).addEventListener("retrieve",t(this,dt)),document.body.appendChild(t(this,g)),e&&(e.insertAdjacentElement("beforebegin",ve(t(this,g).dataSeed)),wi(e),d(this,ce,e.autocomplete)),Gi(),window.addEventListener("browserautofill",t(this,gs))}disconnectedCallback(){t(this,g).remove(),t(this,g).removeEventListener("input",t(this,fs)),t(this,g).removeEventListener("select",t(this,vs)),t(this,g).removeEventListener("blur",t(this,ct)),t(this,g).removeEventListener("focus",t(this,bs)),t(this,P).removeEventListener("suggest",t(this,us)),t(this,P).removeEventListener("suggesterror",t(this,ps)),t(this,P).removeEventListener("retrieve",t(this,dt)),t(this,Fe).remove(),t(this,ms).disconnect(),window.removeEventListener("browserautofill",t(this,gs))}attributeChangedCallback(e,s,i){if(e==="access-token"){t(this,de).accessToken=i;return}if(e==="browser-autofill-enabled"){d(this,lt,Boolean(i));return}if(e==="theme"){this.theme=ae(i);return}if(e==="popover-options"){this.popoverOptions=ae(i);return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i}focus(){t(this,g).focus()}simulateRetrieve(e){let s=this.input;s&&(s.dataset.mapboxSuccess="true"),t(this,g).hideResults();let i={type:"FeatureCollection",features:[e],url:""};t(this,dt).call(this,i)}};de=new WeakMap,P=new WeakMap,R=new WeakMap,g=new WeakMap,Fe=new WeakMap,ce=new WeakMap,lt=new WeakMap,us=new WeakMap,ps=new WeakMap,dt=new WeakMap,hs=new WeakMap,ms=new WeakMap,gs=new WeakMap,fs=new WeakMap,vs=new WeakMap,ct=new WeakMap,eo=new WeakMap,bs=new WeakMap,to=new WeakMap,ut.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"];window.MapboxAddressAutofill=ut;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",ut);var Me=require("@mapbox/search-js-core"),Gn=Si(require("subtag"));var Xr={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},io={placeholder:Xr};var Yr=9,Nn={flyTo:!0},Vr=["allowReverse","flipCoordinates"],D,_e,N,z,K,f,De,Es,oo,no,Wr,Ne,xs,Ss,As,Ae,Ms,ys,pt,Ts,ht,Ls,ue,Cs,ks,ro,mt=class extends I{constructor(){super(...arguments);r(this,no);r(this,D,void 0);r(this,_e,new Me.SearchBoxCore({}));r(this,N,new Me.SearchSession(t(this,_e)));r(this,z,null);r(this,K,void 0);r(this,f,new W);r(this,De,new le(2));this.options={};r(this,Es,p({},Nn));r(this,oo,()=>{let e=p({},this.componentOptions);for(let s in e)Vr.indexOf(s)===-1&&delete e[s];return e});r(this,Ne,void 0);r(this,xs,e=>y(this,null,function*(){t(this,ue).call(this);let s=null;if(this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length&&(i.forEach(n=>{n._source="custom"}),s=i)}e&&e.suggestions&&(s?s=s.concat(e.suggestions):s=e.suggestions),t(this,f).handleSuggest(s||null),t(this,D).SearchBox.contains(document.activeElement)||this.focus(),this.dispatchEvent(new h("suggest",e))}));r(this,Ss,e=>y(this,null,function*(){if(t(this,ue).call(this),this.componentOptions.customSearch){let s=yield this.componentOptions.customSearch(this.value);s&&s.length?(s.forEach(i=>{i._source="custom"}),t(this,f).handleSuggest(s||null)):t(this,f).handleError()}else t(this,f).handleError();this.dispatchEvent(new h("suggesterror",e))}));r(this,As,e=>{t(this,ue).call(this),this.dispatchEvent(new h("retrieve",e));let s=e;if(!s||!s.features.length)return;let i=(0,Me.featureToSuggestion)(s.features[0]);t(this,K).value=i.name;let n=s.features[0];!n||!t(this,z)||(this.componentOptions.flyTo&&t(this,ro).call(this,n),this.marker&&this.mapboxgl&&t(this,ys).call(this,n))});r(this,Ae,void 0);r(this,Ms,()=>{t(this,Ae)&&(t(this,Ae).remove(),d(this,Ae,null))});r(this,ys,e=>{if(!t(this,z)||(t(this,Ms).call(this),!e))return;let i=p(p({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);d(this,Ae,new this.mapboxgl.Marker(i)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&t(this,Ae).setLngLat(e.geometry.coordinates).addTo(t(this,z))});this.interceptSearch=null;r(this,pt,e=>{this.dispatchEvent(new h("input",e.detail.inputText));let{lastInput:s,inputText:i}=e.detail;if(!i){t(this,Cs).call(this);return}let n=this.interceptSearch&&this.interceptSearch(i),a=this.interceptSearch?n:i;if(this.interceptSearch&&!n){t(this,f).hideResults();return}t(this,N).suggest(a,p(p({},this.options),t(this,oo).call(this))),t(this,De).input(a,s,E(p({},this.options),{sessionToken:t(this,N).sessionToken,accessToken:this.accessToken}),t(this,z)),t(this,ue).call(this,!0)});r(this,Ts,e=>{let{suggestion:s,selectedIndex:i}=e.detail;t(this,N).retrieve(s,this.options),t(this,De).select(this.value,i,t(this,f).suggestions,E(p({},this.options),{sessionToken:t(this,N).sessionToken,accessToken:this.accessToken}),t(this,z)),t(this,ue).call(this,!0)});r(this,ht,()=>{});r(this,Ls,e=>{!t(this,D).SearchBox.contains(e.relatedTarget)&&!t(this,f).contains(e.relatedTarget)&&(t(this,ht).call(this),t(this,f).hideResults(),this.dispatchEvent(new h("blur")))});r(this,ue,(e=!1)=>{e?(t(this,D).ClearBtn.style.display="none",t(this,D).LoadingIcon.style.display="block"):(t(this,D).LoadingIcon.style.display="none",t(this,D).ClearBtn.style.display=this.value?"block":"none")});r(this,Cs,()=>{this.value="",t(this,ue).call(this),t(this,ys).call(this,null),t(this,f).handleSuggest(null),t(this,f).focus(),t(this,De).clear(),t(this,N).incrementSession(),this.dispatchEvent(new h("clear"))});this.marker=!0;r(this,ks,()=>{let e=t(this,z),s=p({},this.options);if(e.getZoom()<=Yr){delete s.proximity,this.options=s;return}let i=e.getCenter();this.options=E(p({},s),{proximity:i})});r(this,ro,e=>{let s=t(this,z);if(!s)return;let i=e.properties.feature_type,n,a=e.properties.bbox;if(a)n=Mi(s,Me.LngLatBounds.convert(a).toFlatArray());else{let l=e.geometry.coordinates,c=yi(i);n={center:l,zoom:c,speed:Ft}}n=Object.assign(n,this.componentOptions.flyTo),s.flyTo(n)})}get accessToken(){return t(this,_e).accessToken}set accessToken(e){t(this,_e).accessToken=e}get value(){return t(this,K).value}set value(e){t(this,K).value=e||""}get input(){return t(this,K)}get template(){return on}get templateStyle(){return _}get templateUserStyle(){return A(".SearchBox",t(this,f).theme)}get componentOptions(){return t(this,Es)}set componentOptions(e){d(this,Es,p(p({},Nn),e))}get theme(){return t(this,f).theme}set theme(e){if(t(this,f).theme=e,!t(this,D)||!e)return;this.updateTemplateUserStyle(A(".SearchBox",e)),t(this,f).updatePopover();let{SearchIcon:s}=t(this,D);s.innerHTML=k("search",e)}get popoverOptions(){return t(this,f).popoverOptions}set popoverOptions(e){t(this,f).popoverOptions=e}get placeholder(){return t(this,Ne)||ge(this,no,Wr).call(this)}set placeholder(e){d(this,Ne,e),t(this,K)&&(t(this,K).placeholder=this.placeholder,t(this,K).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),d(this,D,F(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=p({},this.theme);let{Input:e,ClearBtn:s,SearchBox:i}=t(this,D);i.addEventListener("focusout",t(this,Ls)),d(this,K,e),t(this,f).input=e,t(this,f).searchService=2,t(this,f).addEventListener("input",t(this,pt)),t(this,f).addEventListener("select",t(this,Ts)),t(this,f).addEventListener("blur",t(this,ht)),t(this,N).addEventListener("suggest",t(this,xs)),t(this,N).addEventListener("suggesterror",t(this,Ss)),t(this,N).addEventListener("retrieve",t(this,As)),s.addEventListener("click",t(this,Cs)),this.placeholder=t(this,Ne),this.parentElement.appendChild(t(this,f)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",ve(t(this,f).dataSeed)))}disconnectedCallback(){let{SearchBox:e}=t(this,D);e.removeEventListener("focusout",t(this,Ls)),t(this,f).remove(),t(this,f).input=null,t(this,f).removeEventListener("input",t(this,pt)),t(this,f).removeEventListener("select",t(this,Ts)),t(this,f).removeEventListener("blur",t(this,ht)),t(this,N).removeEventListener("suggest",t(this,xs)),t(this,N).removeEventListener("suggesterror",t(this,Ss)),t(this,N).removeEventListener("retrieve",t(this,As)),t(this,De).remove()}attributeChangedCallback(e,s,i){if(e==="access-token"){t(this,_e).accessToken=i;return}if(e==="theme"){this.theme=ae(i);return}if(e==="popover-options"){this.popoverOptions=ae(i);return}if(e==="placeholder"){this.placeholder=i;return}if(e==="allow-reverse"){this.componentOptions.allowReverse=["true",""].includes(i);return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=["true",""].includes(i);return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i,n==="language"&&(this.placeholder=t(this,Ne))}focus(){t(this,f).focus()}search(e){this.value=e;let s={lastInput:e,inputText:e};t(this,pt).call(this,new h("input",s))}bindMap(e){t(this,z)&&t(this,z).off("moveend",t(this,ks)),e&&e.on("moveend",t(this,ks)),d(this,z,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let s=document.createElement("div");return s.className="mapboxgl-ctrl",s.style.width="300px",s.appendChild(this),s}onRemove(){this.remove(),this.unbindMap(),t(this,Ms).call(this)}getDefaultPosition(){return"top-right"}};D=new WeakMap,_e=new WeakMap,N=new WeakMap,z=new WeakMap,K=new WeakMap,f=new WeakMap,De=new WeakMap,Es=new WeakMap,oo=new WeakMap,no=new WeakSet,Wr=function(){if(this.options.language){let e=this.options.language.split(",")[0],s=Gn.default.language(e),i=io.placeholder[s];if(i)return i}return"Search"},Ne=new WeakMap,xs=new WeakMap,Ss=new WeakMap,As=new WeakMap,Ae=new WeakMap,Ms=new WeakMap,ys=new WeakMap,pt=new WeakMap,Ts=new WeakMap,ht=new WeakMap,Ls=new WeakMap,ue=new WeakMap,Cs=new WeakMap,ks=new WeakMap,ro=new WeakMap,mt.observedAttributes=["access-token","theme","popover-options","placeholder","allow-reverse","flip-coordinates","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=mt;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",mt);var bt=require("@mapbox/search-js-core"),$n=Si(require("subtag"));var Kr=9,jn={flyTo:!0},Zr=["flipCoordinates"],G,pe,j,q,Z,v,Ge,ws,ao,lo,Qr,je,Is,Os,Bs,ye,Hs,Ps,gt,Rs,ft,Fs,he,_s,Ds,co,vt=class extends I{constructor(){super(...arguments);r(this,lo);r(this,G,void 0);r(this,pe,new bt.GeocodingCore({}));r(this,j,new bt.SearchSession(t(this,pe)));r(this,q,null);r(this,Z,void 0);r(this,v,new W);r(this,Ge,new le(1));this.options={};r(this,ws,p({},jn));r(this,ao,()=>{let e=p({},this.componentOptions);for(let s in e)Zr.indexOf(s)===-1&&delete e[s];return e});r(this,je,void 0);r(this,Is,e=>y(this,null,function*(){t(this,he).call(this);let s=null;if(this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length&&(i.forEach(n=>{n._source="custom"}),s=i)}e&&e.features&&(s?s=s.concat(e.features):s=e.features),t(this,v).handleSuggest(s||null),t(this,G).Geocoder.contains(document.activeElement)||this.focus(),this.dispatchEvent(new h("suggest",e))}));r(this,Os,e=>y(this,null,function*(){if(t(this,he).call(this),this.componentOptions.customSearch){let s=yield this.componentOptions.customSearch(this.value);s&&s.length?(s.forEach(i=>{i._source="custom"}),t(this,v).handleSuggest(s||null)):t(this,v).handleError()}else t(this,v).handleError();this.dispatchEvent(new h("suggesterror",e))}));r(this,Bs,e=>{t(this,he).call(this),this.dispatchEvent(new h("retrieve",e));let s=e;!s||(t(this,Z).value=s.properties.full_address,!t(this,q))||(this.componentOptions.flyTo&&t(this,co).call(this,s),this.marker&&this.mapboxgl&&t(this,Ps).call(this,s))});r(this,ye,void 0);r(this,Hs,()=>{t(this,ye)&&(t(this,ye).remove(),d(this,ye,null))});r(this,Ps,e=>{if(!t(this,q)||(t(this,Hs).call(this),!e))return;let i=p(p({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);d(this,ye,new this.mapboxgl.Marker(i)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&t(this,ye).setLngLat(e.geometry.coordinates).addTo(t(this,q))});this.interceptSearch=null;r(this,gt,e=>{this.dispatchEvent(new h("input",e.detail.inputText));let{lastInput:s,inputText:i}=e.detail;if(!i){t(this,_s).call(this);return}let n=this.interceptSearch&&this.interceptSearch(i),a=this.interceptSearch?n:i;if(this.interceptSearch&&!n){t(this,v).hideResults();return}t(this,j).suggest(a,p(p({},this.options),t(this,ao).call(this))),t(this,Ge).input(a,s,E(p({},this.options),{sessionToken:t(this,j).sessionToken,accessToken:this.accessToken}),t(this,q),t(this,pe).responseHeaders),t(this,he).call(this,!0)});r(this,Rs,e=>{let{suggestion:s,selectedIndex:i}=e.detail;t(this,j).retrieve(s,this.options),t(this,Ge).select(this.value,i,t(this,v).suggestions,E(p({},this.options),{sessionToken:t(this,j).sessionToken,accessToken:this.accessToken}),t(this,q),t(this,pe).responseHeaders),t(this,he).call(this,!0)});r(this,ft,()=>{});r(this,Fs,e=>{!t(this,G).Geocoder.contains(e.relatedTarget)&&!t(this,v).contains(e.relatedTarget)&&(t(this,ft).call(this),t(this,v).hideResults(),this.dispatchEvent(new h("blur")))});r(this,he,(e=!1)=>{e?(t(this,G).ClearBtn.style.display="none",t(this,G).LoadingIcon.style.display="block"):(t(this,G).LoadingIcon.style.display="none",t(this,G).ClearBtn.style.display=this.value?"block":"none")});r(this,_s,()=>{this.value="",t(this,he).call(this),t(this,Ps).call(this,null),t(this,v).handleSuggest(null),t(this,v).focus(),t(this,Ge).clear(),t(this,j).incrementSession(),this.dispatchEvent(new h("clear"))});this.marker=!0;r(this,Ds,()=>{let e=t(this,q),s=p({},this.options);if(e.getZoom()<=Kr){delete s.proximity,this.options=s;return}let i=e.getCenter();this.options=E(p({},s),{proximity:i})});r(this,co,e=>{let s=t(this,q);if(!s)return;let i=e.properties.feature_type,n,a=e.properties.bbox;if(a)n=Mi(s,bt.LngLatBounds.convert(a).toFlatArray());else{let l=e.geometry.coordinates,c=yi(i);n={center:l,zoom:c,speed:Ft}}n=Object.assign(n,this.componentOptions.flyTo),s.flyTo(n)})}get accessToken(){return t(this,pe).accessToken}set accessToken(e){t(this,pe).accessToken=e}get value(){return t(this,Z).value}set value(e){t(this,Z).value=e||""}get input(){return t(this,Z)}get template(){return nn}get templateStyle(){return _}get templateUserStyle(){return A(".Geocoder",t(this,v).theme)}get componentOptions(){return t(this,ws)}set componentOptions(e){d(this,ws,p(p({},jn),e))}get theme(){return t(this,v).theme}set theme(e){if(t(this,v).theme=e,!t(this,G)||!e)return;this.updateTemplateUserStyle(A(".Geocoder",e)),t(this,v).updatePopover();let{SearchIcon:s}=t(this,G);s.innerHTML=k("search",e)}get popoverOptions(){return t(this,v).popoverOptions}set popoverOptions(e){t(this,v).popoverOptions=e}get placeholder(){return t(this,je)||ge(this,lo,Qr).call(this)}set placeholder(e){d(this,je,e),t(this,Z)&&(t(this,Z).placeholder=this.placeholder,t(this,Z).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),d(this,G,F(this,{Geocoder:".Geocoder",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=p({},this.theme);let{Input:e,ClearBtn:s,Geocoder:i}=t(this,G);i.addEventListener("focusout",t(this,Fs)),d(this,Z,e),t(this,v).input=e,t(this,v).searchService=1,t(this,v).addEventListener("input",t(this,gt)),t(this,v).addEventListener("select",t(this,Rs)),t(this,v).addEventListener("blur",t(this,ft)),t(this,j).addEventListener("suggest",t(this,Is)),t(this,j).addEventListener("suggesterror",t(this,Os)),t(this,j).addEventListener("retrieve",t(this,Bs)),s.addEventListener("click",t(this,_s)),this.placeholder=t(this,je),this.parentElement.appendChild(t(this,v)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",ve(t(this,v).dataSeed)))}disconnectedCallback(){let{Geocoder:e}=t(this,G);e.removeEventListener("focusout",t(this,Fs)),t(this,v).remove(),t(this,v).input=null,t(this,v).removeEventListener("input",t(this,gt)),t(this,v).removeEventListener("select",t(this,Rs)),t(this,v).removeEventListener("blur",t(this,ft)),t(this,j).removeEventListener("suggest",t(this,Is)),t(this,j).removeEventListener("suggesterror",t(this,Os)),t(this,j).removeEventListener("retrieve",t(this,Bs)),t(this,Ge).remove()}attributeChangedCallback(e,s,i){if(e==="access-token"){t(this,pe).accessToken=i;return}if(e==="theme"){this.theme=ae(i);return}if(e==="popover-options"){this.popoverOptions=ae(i);return}if(e==="placeholder"){this.placeholder=i;return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=["true",""].includes(i);return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i,n==="language"&&(this.placeholder=t(this,je))}focus(){t(this,v).focus()}search(e){this.value=e;let s={lastInput:e,inputText:e};t(this,gt).call(this,new h("input",s))}bindMap(e){t(this,q)&&t(this,q).off("moveend",t(this,Ds)),e&&e.on("moveend",t(this,Ds)),d(this,q,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let s=document.createElement("div");return s.className="mapboxgl-ctrl",s.style.width="300px",s.appendChild(this),s}onRemove(){this.remove(),this.unbindMap(),t(this,Hs).call(this)}getDefaultPosition(){return"top-right"}};G=new WeakMap,pe=new WeakMap,j=new WeakMap,q=new WeakMap,Z=new WeakMap,v=new WeakMap,Ge=new WeakMap,ws=new WeakMap,ao=new WeakMap,lo=new WeakSet,Qr=function(){if(this.options.language){let e=this.options.language.split(",")[0],s=$n.default.language(e),i=io.placeholder[s];if(i)return i}return"Search"},je=new WeakMap,Is=new WeakMap,Os=new WeakMap,Bs=new WeakMap,ye=new WeakMap,Hs=new WeakMap,Ps=new WeakMap,gt=new WeakMap,Rs=new WeakMap,ft=new WeakMap,Fs=new WeakMap,he=new WeakMap,_s=new WeakMap,Ds=new WeakMap,co=new WeakMap,vt.observedAttributes=["access-token","theme","popover-options","placeholder","flip-coordinates","autocomplete","language","country","bbox","limit","proximity","types","worldview","permanent"];window.MapboxGeocoder=vt;window.customElements.get("mapbox-geocoder")||customElements.define("mapbox-geocoder",vt);var Vn=require("@mapbox/search-js-core");var qn=Si(require("@mapbox/sphericalmercator"));var Un=new qn.default({size:512,antimeridian:!0}),ze=1280;function zn(o,e){let{width:s,height:i}=Ai(o,!0);switch(e){case"center":return[0,0];case"top":return[0,i/2];case"bottom":return[0,-1*i/2];case"left":return[s/2,0];case"right":return[-1*s/2,0];case"top-left":return[s/2,i/2];case"top-right":return[-1*s/2,i/2];case"bottom-left":return[s/2,-1*i/2];case"bottom-right":return[-1*s/2,-1*i/2]}}var Ns,uo,$e,Gs,js,po,$s,Us,ho,zs,qs,Ue,mo,Xs,_o=class{constructor(e,s,i,n,a,l){r(this,Ns,void 0);r(this,uo,()=>{[this.anchorOffsetX,this.anchorOffsetY]=zn(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});r(this,$e,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});r(this,Gs,!1);r(this,js,void 0);r(this,po,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,Ue).call(this,e),window.addEventListener("pointermove",t(this,Us)),window.addEventListener("pointerup",t(this,$s)))});r(this,$s,()=>{window.removeEventListener("pointermove",t(this,Us)),window.removeEventListener("pointerup",t(this,$s))});r(this,Us,e=>{e.preventDefault(),e.stopPropagation();let s=this.curPointerXPos-e.pageX,i=this.curPointerYPos-e.pageY;this.markerDeltaX+=s,this.markerDeltaY-=i,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let n=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],a=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-n,c=this.markerDeltaY+a;this.markerTransform={globalX:l,globalY:c},t(this,Ue).call(this,e)});r(this,ho,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,Ue).call(this,e),window.addEventListener("pointermove",t(this,qs)),window.addEventListener("pointerup",t(this,zs)))});r(this,zs,()=>{window.removeEventListener("pointermove",t(this,qs)),window.removeEventListener("pointerup",t(this,zs))});r(this,qs,e=>{e.preventDefault();let s=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));s=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,s),0);let i=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));i=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,i),0),this.imgContainerElement.scrollTop=s,this.imgContainerElement.scrollLeft=i;let n=Math.round(i-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),a=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-s);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+n,this.imgCenterPx[1]-a],!this.keepMarkerCentered){let l=this.markerDeltaX+n,c=this.markerDeltaY+a;this.markerTransform={globalX:l,globalY:c}}t(this,Xs).call(this,i,s),t(this,Ue).call(this,e)});r(this,Ue,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});r(this,mo,()=>{let{anchorX:e,anchorY:s,globalX:i,globalY:n,correctionX:a,correctionY:l}=t(this,$e),c=e-i+a,u=s+n+l;this.markerElement.style.transform=`translate(calc(-50% + ${c}px), calc(-50% + ${u}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,s=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=s,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,s=this.imgCenterOffset.y,i=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,n=this.imgElement.height/2-s-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=i,this.imgContainerElement.scrollTop=n,t(this,Xs).call(this,i,n)};r(this,Xs,(e,s)=>{let i=this.imgCenterOffset.x,n=this.imgCenterOffset.y,{correctionX:a,correctionY:l}=this.markerTransform,c={};if(e/2<i*-1){let u=i*-1-e/2;c.correctionX=u*2}else e<0?c.correctionX=e:a!==0&&(c.correctionX=0);if(s/2<n*-1){let u=n*-1-s/2;c.correctionY=u*2}else s<0?c.correctionY=s:l!==0&&(c.correctionY=0);this.markerTransform=c});this.markerElement=i,this.imgContainerElement=e,this.imgElement=s,this.keepMarkerCentered=n,this.zoom=a,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",t(this,ho)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",t(this,po)),new ResizeObserver(t(this,uo)).observe(this.markerElement)}get anchor(){return t(this,Ns)}set anchor(e){d(this,Ns,e),[this.anchorOffsetX,this.anchorOffsetY]=zn(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return t(this,$e)}set markerTransform(e){d(this,$e,p(p({},t(this,$e)),e)),t(this,mo).call(this)}get isActive(){return t(this,Gs)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",d(this,Gs,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(Ce(e,this.imgCenterPx))return t(this,js);{let s=Un.ll(e,this.zoom);return[yo(s[0],6),yo(s[1],6)]}}set coordinate(e){d(this,js,e),this.imgCenterPx=this.imgCenterAdjustedPx=Un.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};Ns=new WeakMap,uo=new WeakMap,$e=new WeakMap,Gs=new WeakMap,js=new WeakMap,po=new WeakMap,$s=new WeakMap,Us=new WeakMap,ho=new WeakMap,zs=new WeakMap,qs=new WeakMap,Ue=new WeakMap,mo=new WeakMap,Xs=new WeakMap;var Xn='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var Yn=16,ea=T(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${Xn}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),ta=T(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),sa=T(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),Do="Adjust pin",No="Save",Go="Cancel",ia=T(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${Do}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${No}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${Go}</div>
  </div>
</template>
`),Et,qe,xt,re,Te,Q,J,b,L,Ys,Vs,St,Xe,Ws,Ks,Zs,Qs,Js,ei,At,ti,si,ii,oi,go,fo,ni,Mt,yt,ri,ai,vo,li,bo,Tt=class extends I{constructor(){super(...arguments);r(this,Et,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";r(this,qe,!1);r(this,xt,!1);r(this,re,void 0);r(this,Te,"");r(this,Q,void 0);r(this,J,void 0);r(this,b,void 0);r(this,L,void 0);r(this,Ys,void 0);r(this,Vs,{});r(this,St,!1);r(this,Xe,"default");r(this,Ws,void 0);r(this,Ks,void 0);r(this,Zs,void 0);r(this,Qs,["mapbox","streets-v11"]);r(this,Js,void 0);r(this,ei,void 0);r(this,At,()=>{let{ImageContainer:e,ButtonAdjust:s,ButtonSave:i,ButtonCancel:n}=t(this,b);t(this,qe)?(e.classList.add(`${this.dataset.seed}--draggable`),t(this,L).isActive=!0,s.setAttribute("aria-hidden","true"),i.removeAttribute("aria-hidden"),n.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),t(this,L).isActive=!1,s.removeAttribute("aria-hidden"),i.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true"))});r(this,ti,()=>{d(this,qe,!0),t(this,At).call(this)});r(this,si,()=>{if(this.feature.properties.full_address&&!Ce(this.feature.geometry.coordinates,t(this,L).coordinate)){let[e,s]=t(this,L).coordinate;Di(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:s}},labels:["address_minimap"]})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(t(this,L).coordinate),d(this,qe,!1),t(this,At).call(this)});r(this,ii,()=>{t(this,L).reCenter(),d(this,qe,!1),t(this,At).call(this)});r(this,oi,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});r(this,go,()=>{t(this,xt)||t(this,L).reCenter(),d(this,xt,!0),t(this,L)&&t(this,L).handleMinimapResize()});r(this,fo,()=>{d(this,xt,!1)});r(this,ni,e=>{if(t(this,Q)===0||t(this,J)===0)return"";let[s,i]=this.defaultMapStyle,n=Ti(s,i),a=this.mapStyleMode==="default"?n:Qo,l=Jo+x.autofillSessionToken.toString(),c=a+Vn.LngLat.convert(e).toArray().join(",")+","+Yn+",0/"+Math.min(t(this,Q)*2,ze)+"x"+Math.min(t(this,J)*2,ze)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return x.autofillSessionEnabled&&(c+=`&sku=${l}`),c});r(this,Mt,()=>{if(t(this,re)){let e=t(this,re).geometry.coordinates;d(this,Te,t(this,ni).call(this,e));let{Image:s}=t(this,b);s.src=t(this,Te)}});r(this,yt,e=>`url("${fn(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);r(this,ri,()=>{let{MapboxAddressMinimap:e,ImageContainer:s,Image:i}=t(this,b),{width:n,height:a}=Ai(this.container),[l,c]=[t(this,Q),t(this,J)];d(this,Q,Math.min(n,ze)),d(this,J,Math.min(a,ze)),e.style.setProperty("width",`${t(this,Q)}px`),e.style.setProperty("height",`${t(this,J)}px`),s.style.setProperty("height",`${t(this,J)}px`),s.style.setProperty("width",`${t(this,Q)}px`);let[u,m]=[i.width,i.height];t(this,Q)>l&&t(this,Q)>u/2&&u<ze||t(this,J)>c&&t(this,J)>m/2&&m<ze?t(this,Mt).call(this):t(this,L)&&t(this,L).handleMinimapResize()});r(this,ai,()=>{if(this.querySelector(".MinimapFooter"))return;let s=this.prepareTemplate(sa),i=this.querySelector(".MapboxAddressMinimap");if(!i||(i.appendChild(s),this.querySelector(".MinimapEditButtons")))return;let a=this.prepareTemplate(ia),l=this.querySelector(".MinimapInnerFrame");if(!l)return;l.appendChild(a),d(this,b,E(p({},t(this,b)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:c,ButtonSave:u,ButtonCancel:m}=t(this,b);c.addEventListener("click",t(this,ti)),u.addEventListener("click",t(this,si)),m.addEventListener("click",t(this,ii))});r(this,vo,()=>{if(!t(this,b))return;let{EditButtons:e,ButtonAdjust:s,ButtonSave:i,ButtonCancel:n}=t(this,b),a=this.querySelector(".MinimapFooter");a==null||a.remove(),e==null||e.remove(),s&&(s.remove(),s.removeEventListener("click",t(this,ti))),i&&(i.remove(),i.removeEventListener("click",t(this,si))),n&&(n.remove(),n.removeEventListener("click",t(this,ii))),delete t(this,b).EditButtons,delete t(this,b).ButtonAdjust,delete t(this,b).ButtonSave,delete t(this,b).ButtonCancel});r(this,li,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let s=this.prepareTemplate(ta),i=this.querySelector(".MinimapInnerFrame");!i||(i.appendChild(s),t(this,b).MapStyleToggle=s,s.addEventListener("click",t(this,oi)),s.style.backgroundImage=t(this,yt).call(this,this.mapStyleMode==="default"?"satellite":"default"),s.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});r(this,bo,()=>{if(!t(this,b))return;let{MapStyleToggle:e}=t(this,b);!e||(e.remove(),e.removeEventListener("click",t(this,oi)),delete t(this,b).MapStyleToggle)})}get canAdjustMarker(){return t(this,Et)}set canAdjustMarker(e){d(this,Et,e),this.isConnected&&(e?t(this,ai).call(this):t(this,vo).call(this))}get accessToken(){return t(this,Ys)||x.accessToken}set accessToken(e){d(this,Ys,e)}get feature(){return t(this,re)}set feature(e){d(this,re,e),e?this.show():this.hide()}get template(){return ea}get templateStyle(){return _}get templateUserStyle(){return A(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return t(this,St)}set satelliteToggle(e){d(this,St,e),this.isConnected&&(e?t(this,li).call(this):t(this,bo).call(this))}get theme(){return t(this,Vs)}set theme(e){if(d(this,Vs,e),!t(this,b)||!e)return;this.updateTemplateUserStyle(A(".MapboxAddressMinimap",e));let{Marker:s,MapStyleToggle:i}=t(this,b);s.innerHTML=k("marker",e),i&&(i.style.backgroundImage=t(this,yt).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return t(this,Ws)||Do}set adjustBtnText(e){d(this,Ws,e);let s=this.querySelector(".MinimapButtonAdjust");s.textContent=e||Do}get saveBtnText(){return t(this,Ks)||No}set saveBtnText(e){d(this,Ks,e);let s=this.querySelector(".MinimapButtonSave");s.textContent=e||No}get cancelBtnText(){return t(this,Zs)||Go}set cancelBtnText(e){d(this,Zs,e);let s=this.querySelector(".MinimapButtonCancel");s.textContent=e||Go}get mapStyleMode(){return t(this,Xe)}set mapStyleMode(e){let s=t(this,Xe);if(s===e||(d(this,Xe,e),!t(this,b)))return;let{MapStyleToggle:i}=t(this,b);!i||(i.style.backgroundImage=t(this,yt).call(this,s),i.setAttribute("title",`Switch to ${s==="satellite"?"Satellite":"Default"}`),t(this,Mt).call(this))}get defaultMapStyle(){return t(this,Qs)}set defaultMapStyle(e){d(this,Qs,e),t(this,Mt).call(this)}get footer(){return t(this,Js)}set footer(e){d(this,Js,e);let s=this.querySelector(".MinimapFooter");s&&(typeof e=="string"?(s.textContent=e,s.removeAttribute("aria-hidden")):e?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden","true"))}get container(){return t(this,ei)}set container(e){e&&(e.style.position="relative",d(this,ei,e))}show(){if(!t(this,re))return;let e=t(this,re).geometry.coordinates;t(this,L).coordinate=e,d(this,Te,t(this,ni).call(this,e));let{MapboxAddressMinimap:s,Image:i}=t(this,b);i.src=t(this,Te),s.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=t(this,b);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),d(this,b,F(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=t(this,Xe),this.theme=p({},this.theme),t(this,Et)&&!t(this,b).EditButtons&&t(this,ai).call(this),t(this,St)&&!t(this,b).MapStyleToggle&&t(this,li).call(this),this.container=this.parentElement,new ResizeObserver(t(this,ri)).observe(this.container),t(this,ri).call(this);let{MapboxAddressMinimap:s,ImageContainer:i,Image:n,Marker:a}=t(this,b);d(this,L,new _o(i,n,a,this.keepMarkerCentered,Yn,this.markerAnchor)),t(this,L).reCenter(),n.onload=t(this,go),n.onerror=t(this,fo),n.src=t(this,Te),t(this,re)?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden","true")}attributeChangedCallback(e,s,i){if(e==="access-token")this.accessToken=i;else if(e==="can-adjust-marker")this.canAdjustMarker=["true",""].includes(i);else if(e==="keep-marker-centered")this.keepMarkerCentered=["true",""].includes(i);else if(e==="marker-anchor"){let n=i;this.markerAnchor=n,t(this,L)&&(t(this,L).anchor=n)}else e==="satellite-toggle"&&(this.satelliteToggle=["true",""].includes(i))}};Et=new WeakMap,qe=new WeakMap,xt=new WeakMap,re=new WeakMap,Te=new WeakMap,Q=new WeakMap,J=new WeakMap,b=new WeakMap,L=new WeakMap,Ys=new WeakMap,Vs=new WeakMap,St=new WeakMap,Xe=new WeakMap,Ws=new WeakMap,Ks=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,Js=new WeakMap,ei=new WeakMap,At=new WeakMap,ti=new WeakMap,si=new WeakMap,ii=new WeakMap,oi=new WeakMap,go=new WeakMap,fo=new WeakMap,ni=new WeakMap,Mt=new WeakMap,yt=new WeakMap,ri=new WeakMap,ai=new WeakMap,vo=new WeakMap,li=new WeakMap,bo=new WeakMap,Tt.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=Tt;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",Tt);var Ht=require("@mapbox/search-js-core");var M,ee,H,Lt,Ct,me,di,ci,kt,ui,pi,Eo,hi,mi,wt,Wn=class{constructor(e,s,i){r(this,M,void 0);r(this,ee,void 0);r(this,H,void 0);r(this,Lt,void 0);this.options={};this.retrieveFeature=null;this.listbox=new W;r(this,Ct,new le(0));r(this,me,void 0);r(this,di,e=>{let{lastInput:s,inputText:i}=e.detail,n=t(this,ee).browserAutofillEnabled===!0&&(i==null?void 0:i.length)<=2;if(X(t(this,M),t(this,me),n),!i){t(this,Eo).call(this);return}if((i==null?void 0:i.length)<=2){this.listbox.handleSuggest(null);return}t(this,H).suggest(i,this.options),t(this,Ct).input(i,s,E(p({},this.options),{sessionToken:t(this,H).sessionToken,accessToken:t(this,ee).accessToken}),null,t(this,Lt).responseHeaders)});r(this,ci,e=>{let{suggestion:s,selectedIndex:i}=e.detail;s.accuracy!=="street"?(X(t(this,M),t(this,me),!0),t(this,H).retrieve(s,this.options),t(this,Ct).select(this.input.value,i,this.listbox.suggestions,E(p({},this.options),{sessionToken:t(this,H).sessionToken,accessToken:t(this,ee).accessToken}),null,t(this,Lt).responseHeaders)):Hi(t(this,M),t(this,me),s)});r(this,kt,()=>{X(t(this,M),t(this,me),!0),t(this,H).abort()});r(this,ui,e=>{this.listbox.contains(e.relatedTarget)||(t(this,kt).call(this),this.listbox.hideResults())});r(this,pi,()=>{var s;let e=t(this,ee).browserAutofillEnabled===!0&&((s=t(this,M).value)==null?void 0:s.length)<=2;X(t(this,M),t(this,me),e)});r(this,Eo,()=>{this.listbox.handleSuggest(null),t(this,Ct).clear()});r(this,hi,e=>{let s=(e==null?void 0:e.suggestions)?Bi(e.suggestions):null;this.listbox.handleSuggest(s);let i=new h("suggest",e);Object.defineProperty(i,"target",{value:t(this,M)}),t(this,ee).fire("suggest",i)});r(this,mi,e=>{this.listbox.handleError();let s=new h("suggesterror",e);Object.defineProperty(s,"target",{value:t(this,M)}),t(this,ee).fire("suggesterror",s)});r(this,wt,e=>{var n;let s=new h("retrieve",e);if(Object.defineProperty(s,"target",{value:t(this,M)}),t(this,ee).fire("retrieve",s),this.retrieveFeature=(n=e.features)==null?void 0:n[0],!t(this,M))return;let i=e;!i||!i.features||!i.features.length||Kt(i.features[0],t(this,M))});d(this,M,s),d(this,ee,e),d(this,H,new Ht.SearchSession(i)),t(this,H).sessionToken=x.autofillSessionToken.id,d(this,Lt,i),this.listbox.input=t(this,M),this.listbox.autofillHost=this,this.listbox.searchService=0,t(this,M).addEventListener("blur",t(this,ui)),this.listbox.addEventListener("input",t(this,di)),this.listbox.addEventListener("select",t(this,ci)),this.listbox.addEventListener("blur",t(this,kt)),this.listbox.addEventListener("focus",t(this,pi)),t(this,H).addEventListener("suggest",t(this,hi)),t(this,H).addEventListener("suggesterror",t(this,mi)),t(this,H).addEventListener("retrieve",t(this,wt)),document.body.appendChild(this.listbox),s&&(s.insertAdjacentElement("beforebegin",ve(this.listbox.dataSeed)),wi(s),d(this,me,s.autocomplete))}get input(){return t(this,M)}remove(){this.listbox.remove(),t(this,M).removeEventListener("blur",t(this,ui)),this.listbox.removeEventListener("input",t(this,di)),this.listbox.removeEventListener("select",t(this,ci)),this.listbox.removeEventListener("blur",t(this,kt)),this.listbox.removeEventListener("focus",t(this,pi)),t(this,H).removeEventListener("suggest",t(this,hi)),t(this,H).removeEventListener("suggesterror",t(this,mi)),t(this,H).removeEventListener("retrieve",t(this,wt))}simulateRetrieve(e){let s=t(this,M);s&&(s.dataset.mapboxSuccess="true"),this.listbox.hideResults();let i={type:"FeatureCollection",features:[e],url:""};t(this,wt).call(this,i)}};M=new WeakMap,ee=new WeakMap,H=new WeakMap,Lt=new WeakMap,Ct=new WeakMap,me=new WeakMap,di=new WeakMap,ci=new WeakMap,kt=new WeakMap,ui=new WeakMap,pi=new WeakMap,Eo=new WeakMap,hi=new WeakMap,mi=new WeakMap,wt=new WeakMap;var It,Ot,Bt,gi,fi,vi,bi,Ei,Kn=class extends Ht.Evented{constructor({accessToken:e,options:s,theme:i,popoverOptions:n,confirmOnBrowserAutofill:a,browserAutofillEnabled:l}){super();this.instances=[];r(this,It,void 0);r(this,Ot,new Ht.AddressAutofillCore);r(this,Bt,void 0);r(this,gi,void 0);r(this,fi,void 0);this.confirmOnBrowserAutofill=!1;this.browserAutofillEnabled=!1;r(this,vi,()=>{Ce(Vt(),t(this,It))||this.update()});r(this,bi,new MutationObserver(t(this,vi)));r(this,Ei,e=>y(this,null,function*(){this.instances.forEach(s=>s.listbox.blur());for(let s of this.instances){let i=s.listbox.input;yield _i(i,e,this.confirmOnBrowserAutofill,this.accessToken)}}));Gi(),window.addEventListener("browserautofill",t(this,Ei)),x.autofillSessionEnabled=!0,this.accessToken=e||x.accessToken,s&&(this.options=s),i&&(this.theme=i),n&&(this.popoverOptions=n),a&&(this.confirmOnBrowserAutofill=a),l&&(this.browserAutofillEnabled=l),this.update()}get accessToken(){return t(this,Ot).accessToken}set accessToken(e){t(this,Ot).accessToken=e}get options(){return t(this,Bt)}set options(e){d(this,Bt,p(p({},t(this,Bt)),e)),this.instances.forEach(s=>{s.options=p(p({},s.options),e)})}get theme(){return t(this,gi)}set theme(e){d(this,gi,e),this.instances.forEach(s=>{s.listbox.theme=e})}get popoverOptions(){return t(this,fi)}set popoverOptions(e){d(this,fi,e),this.instances.forEach(s=>{s.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),d(this,It,Vt()),this.instances=[],t(this,It).forEach(e=>{let s=new Wn(this,e,t(this,Ot));s.options=this.options,s.listbox.theme=this.theme,s.listbox.popoverOptions=this.popoverOptions,this.instances.push(s)})}observe(){t(this,bi).observe(document,{subtree:!0,childList:!0}),t(this,vi).call(this)}unobserve(){t(this,bi).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",t(this,Ei))}};It=new WeakMap,Ot=new WeakMap,Bt=new WeakMap,gi=new WeakMap,fi=new WeakMap,vi=new WeakMap,bi=new WeakMap,Ei=new WeakMap;function Zn(o){return new Kn(o)}module.exports=rr(oa);
//# sourceMappingURL=index.js.map
