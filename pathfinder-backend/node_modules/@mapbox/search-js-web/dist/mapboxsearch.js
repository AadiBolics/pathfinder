var mapboxsearch=(()=>{var Tl=Object.create;var fi=Object.defineProperty,Ml=Object.defineProperties,wl=Object.getOwnPropertyDescriptor,Ll=Object.getOwnPropertyDescriptors,kl=Object.getOwnPropertyNames,hn=Object.getOwnPropertySymbols,Cl=Object.getPrototypeOf,Cs=Object.prototype.hasOwnProperty,Lo=Object.prototype.propertyIsEnumerable;var wo=(t,e,i)=>e in t?fi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,f=(t,e)=>{for(var i in e||(e={}))Cs.call(e,i)&&wo(t,i,e[i]);if(hn)for(var i of hn(e))Lo.call(e,i)&&wo(t,i,e[i]);return t},k=(t,e)=>Ml(t,Ll(e)),ko=t=>fi(t,"__esModule",{value:!0});var Co=(t,e)=>{var i={};for(var n in t)Cs.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&hn)for(var n of hn(t))e.indexOf(n)<0&&Lo.call(t,n)&&(i[n]=t[n]);return i};var Is=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Il=(t,e)=>{for(var i in e)fi(t,i,{get:e[i],enumerable:!0})},Io=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kl(e))!Cs.call(t,s)&&(i||s!=="default")&&fi(t,s,{get:()=>e[s],enumerable:!(n=wl(e,s))||n.enumerable});return t},pn=(t,e)=>Io(ko(fi(t!=null?Tl(Cl(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Ol=(t=>(e,i)=>t&&t.get(e)||(i=Io(ko({}),e,1),t&&t.set(e,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var Os=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)};var r=(t,e,i)=>(Os(t,e,"read from private field"),i?i.call(t):e.get(t)),c=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},p=(t,e,i,n)=>(Os(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);var ze=(t,e,i)=>(Os(t,e,"access private method"),i);var _=(t,e,i)=>new Promise((n,s)=>{var o=d=>{try{a(i.next(d))}catch(u){s(u)}},l=d=>{try{a(i.throw(d))}catch(u){s(u)}},a=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);a((i=i.apply(t,e)).next())});var Wa=Is((za,Gn)=>{(function(t){var e=!1,i,n;function s(){if(typeof i!="undefined")return i;var h=document.documentElement,m=document.createElement("div");return m.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),h.appendChild(m),i=m.offsetWidth-m.clientWidth,h.removeChild(m),i}function o(){return document.documentElement.scrollHeight>window.innerHeight}function l(h){if(!(typeof document=="undefined"||e)){var m=document.documentElement;n=window.pageYOffset,o()?m.style.width="calc(100% - "+s()+"px)":m.style.width="100%",m.style.position="fixed",m.style.top=-n+"px",m.style.overflow="hidden",e=!0}}function a(){if(!(typeof document=="undefined"||!e)){var h=document.documentElement;h.style.width="",h.style.position="",h.style.top="",h.style.overflow="",window.scroll(0,n),e=!1}}function d(){if(e){a();return}l()}var u={on:l,off:a,toggle:d};typeof Gn!="undefined"&&typeof Gn.exports!="undefined"?Gn.exports=u:t.noScroll=u})(za)});var yo=Is((cl,us)=>{(function(t,e,i){typeof us!="undefined"&&us.exports?us.exports=i():t[e]=i()})(cl,"subtag",function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(a){return a.match(e)||[]}function n(a){return i(a).filter(function(d,u){return d&&u})}function s(a){return a=i(a),{language:a[1]||t,extlang:a[2]||t,script:a[3]||t,region:a[4]||t}}function o(a,d,u){Object.defineProperty(a,d,{value:u,enumerable:!0})}function l(a,d,u){function h(m){return i(m)[a]||t}o(h,"pattern",d),o(s,u,h)}return l(1,/^[a-zA-Z]{2,3}$/,"language"),l(2,/^[a-zA-Z]{3}$/,"extlang"),l(3,/^[a-zA-Z]{4}$/,"script"),l(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(s,"split",n),s})});var ml=Is((xo,Eo)=>{var Ed=function(){var t={},e=1e-10,i=Math.PI/180,n=180/Math.PI,s=6378137,o=20037508342789244e-9;function l(d){return Number(d)===d&&d%1!==0}function a(d){if(d=d||{},this.size=d.size||256,this.expansion=d.antimeridian===!0?2:1,!t[this.size]){var u=this.size,h=t[this.size]={};h.Bc=[],h.Cc=[],h.zc=[],h.Ac=[];for(var m=0;m<30;m++)h.Bc.push(u/360),h.Cc.push(u/(2*Math.PI)),h.zc.push(u/2),h.Ac.push(u),u*=2}this.Bc=t[this.size].Bc,this.Cc=t[this.size].Cc,this.zc=t[this.size].zc,this.Ac=t[this.size].Ac}return a.prototype.px=function(d,u){if(l(u)){var h=this.size*Math.pow(2,u),m=h/2,v=h/360,S=h/(2*Math.PI),y=h,x=Math.min(Math.max(Math.sin(i*d[1]),-.9999),.9999),A=m+d[0]*v,C=m+.5*Math.log((1+x)/(1-x))*-S;return A>y*this.expansion&&(A=y*this.expansion),C>y&&(C=y),[A,C]}else{var m=this.zc[u],x=Math.min(Math.max(Math.sin(i*d[1]),-.9999),.9999),A=Math.round(m+d[0]*this.Bc[u]),C=Math.round(m+.5*Math.log((1+x)/(1-x))*-this.Cc[u]);return A>this.Ac[u]*this.expansion&&(A=this.Ac[u]*this.expansion),C>this.Ac[u]&&(C=this.Ac[u]),[A,C]}},a.prototype.ll=function(d,u){if(l(u)){var h=this.size*Math.pow(2,u),m=h/360,v=h/(2*Math.PI),S=h/2,y=(d[1]-S)/-v,x=(d[0]-S)/m,A=n*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[x,A]}else{var y=(d[1]-this.zc[u])/-this.Cc[u],x=(d[0]-this.zc[u])/this.Bc[u],A=n*(2*Math.atan(Math.exp(y))-.5*Math.PI);return[x,A]}},a.prototype.bbox=function(d,u,h,m,v){m&&(u=Math.pow(2,h)-1-u);var S=[d*this.size,(+u+1)*this.size],y=[(+d+1)*this.size,u*this.size],x=this.ll(S,h).concat(this.ll(y,h));return v==="900913"?this.convert(x,"900913"):x},a.prototype.xyz=function(d,u,h,m){m==="900913"&&(d=this.convert(d,"WGS84"));var v=[d[0],d[1]],S=[d[2],d[3]],y=this.px(v,u),x=this.px(S,u),A=[Math.floor(y[0]/this.size),Math.floor((x[0]-1)/this.size)],C=[Math.floor(x[1]/this.size),Math.floor((y[1]-1)/this.size)],q={minX:Math.min.apply(Math,A)<0?0:Math.min.apply(Math,A),minY:Math.min.apply(Math,C)<0?0:Math.min.apply(Math,C),maxX:Math.max.apply(Math,A),maxY:Math.max.apply(Math,C)};if(h){var F={minY:Math.pow(2,u)-1-q.maxY,maxY:Math.pow(2,u)-1-q.minY};q.minY=F.minY,q.maxY=F.maxY}return q},a.prototype.convert=function(d,u){return u==="900913"?this.forward(d.slice(0,2)).concat(this.forward(d.slice(2,4))):this.inverse(d.slice(0,2)).concat(this.inverse(d.slice(2,4)))},a.prototype.forward=function(d){var u=[s*d[0]*i,s*Math.log(Math.tan(Math.PI*.25+.5*d[1]*i))];return u[0]>o&&(u[0]=o),u[0]<-o&&(u[0]=-o),u[1]>o&&(u[1]=o),u[1]<-o&&(u[1]=-o),u},a.prototype.inverse=function(d){return[d[0]*n/s,(Math.PI*.5-2*Math.atan(Math.exp(-d[1]/s)))*n]},a}();typeof Eo!="undefined"&&typeof xo!="undefined"&&(Eo.exports=xo=Ed)});var Ld={};Il(Ld,{MapboxAddressAutofill:()=>Wt,MapboxAddressConfirmation:()=>mt,MapboxAddressMinimap:()=>si,MapboxGeocoder:()=>Qt,MapboxHTMLEvent:()=>E,MapboxSearchBox:()=>Xt,autofill:()=>Sl,config:()=>H,confirmAddress:()=>qn,getAutofillSearchText:()=>_t,getFormAutofillValues:()=>Dn});var Oo=document.implementation.createHTMLDocument();function te(t,e){let i={};for(let[n,s]of Object.entries(e))i[n]=t.querySelector(s);return i}function Ro(t){return Array.from(t.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function $(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild}function Po(t){let e=Oo.createElement("style");return e.textContent=t,Oo.head.appendChild(e),e.sheet}function _o(t){return window.getComputedStyle(t).display!=="none"}function fe(t,e){if(!t)return;Object.getOwnPropertyDescriptor(t.constructor.prototype,"value").set.call(t,e);let n=t;n._valueTracker&&n._valueTracker.setValue("");let s=new Event("input",{bubbles:!0});s.simulated=!0,t.dispatchEvent(s);let o=new Event("change",{bubbles:!0});o.simulated=!0,t.dispatchEvent(o)}function mn(t,e=!1){let i,n,s=t.getBoundingClientRect();if(t.style.display==="none"||s.height===0&&s.width===0){let o=t.cloneNode(e);t.parentElement.appendChild(o),o.style.setProperty("display","block","important");let l=o.getBoundingClientRect();i=l.width,n=l.height,o.style.setProperty("display","none"),o.remove()}else i=s.width,n=s.height;return{height:Math.floor(n),width:Math.floor(i)}}function Bo(t){let e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}var Rl=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),Pl=new RegExp(`\\.${Rl.source}`,"g"),_l=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function gi(t,e){return t.replace(Pl,i=>"."+e(i.slice(1)))}function Rs(t,e){let n=Po(t).cssRules;function s(l){if(l instanceof CSSStyleRule)return`${gi(l.selectorText,e)} { ${l.style.cssText} }`;let a=_l.exec(l.cssText.split(`
`).join(""));if(a&&a.length>2){let d=a[1],u=a[2];return`${d} { ${Rs(u,e)} }`}return l.cssText}let o="";for(let l of Array.from(n))o+=s(l)+`

`;return o.trim()}function Ps(t,e){let i=Array.from(t.querySelectorAll("[class]"));i.push(t);for(let n of i){let{classList:s}=n;for(let o of Array.from(s))s.remove(o),s.add(e(o))}return t}var Bl=Object.defineProperty,Hl=Object.defineProperties,Fl=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,jo=Object.prototype.propertyIsEnumerable,Ho=(t,e,i)=>e in t?Bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,I=(t,e)=>{for(var i in e||(e={}))No.call(e,i)&&Ho(t,i,e[i]);if(En)for(var i of En(e))jo.call(e,i)&&Ho(t,i,e[i]);return t},Re=(t,e)=>Hl(t,Fl(e)),Sn=(t,e)=>{var i={};for(var n in t)No.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&En)for(var n of En(t))e.indexOf(n)<0&&jo.call(t,n)&&(i[n]=t[n]);return i},js=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},W=(t,e,i)=>(js(t,e,"read from private field"),i?i.call(t):e.get(t)),Q=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},ge=(t,e,i,n)=>(js(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Dl=(t,e,i,n)=>({set _(s){ge(t,e,s,i)},get _(){return W(t,e,n)}}),Ve=(t,e,i)=>(js(t,e,"access private method"),i),ie=(t,e,i)=>new Promise((n,s)=>{var o=d=>{try{a(i.next(d))}catch(u){s(u)}},l=d=>{try{a(i.throw(d))}catch(u){s(u)}},a=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);a((i=i.apply(t,e)).next())}),Go="https://api.mapbox.com/autofill/v1",Nl="suggest",jl="retrieve",Gl=`${Go}/${Nl}`,$l=`${Go}/${jl}`,B=class{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(t){if(t instanceof B)return new B(t.lng,t.lat);if(Array.isArray(t)&&t.length===2)return new B(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null&&("lng"in t||"lon"in t)&&"lat"in t)return new B(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},K=class{constructor(t,e){this._sw=B.convert(t),this._ne=B.convert(e)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new B(this.getWest(),this.getNorth())}getSouthEast(){return new B(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(t){if(!t)throw new Error("Invalid LngLatBounds convert value: falsy");if(t instanceof K)return new K(t.getSouthWest(),t.getNorthEast());if(Array.isArray(t)&&t.length===2)return new K(B.convert(t[0]),B.convert(t[1]));if(Array.isArray(t)&&t.length===4)return new K(B.convert([t[0],t[1]]),B.convert([t[2],t[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}};function Ul(){let e=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15)+"-8"+e.slice(15,18),e.slice(18,30)].join("-")}var re=class{constructor(t){this.id=t!=null?t:Ul()}toString(){return this.id}static convert(t){return new re(t instanceof re?t.id:t.toString())}},ql="Unknown error",zl=class extends Error{constructor(t,e){super(String(t.message||t.error||ql));this.name="MapboxError",this.statusCode=e}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function Oe(t){return ie(this,null,function*(){if(!t.ok){let e=yield t.json();throw new zl(e,t.status)}})}var Fo=globalThis.fetch,Wl=globalThis.AbortController;function Ae(){if(!Fo)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:Fo,AbortController:Wl}}function ot(...t){let e=[];for(let i of t){if(!i)continue;let n=Object.entries(i);for(let[s,o]of n)o!=null&&e.push(`${s}=${encodeURIComponent(String(o))}`)}return e.join("&")}var fn,Bs,$o,Uo=class{constructor(t={}){Q(this,Bs),Q(this,fn,void 0);let e=t,{accessToken:i}=e,n=Sn(e,["accessToken"]);this.accessToken=i,this.defaults=I(I({},Uo.defaults),n)}get responseHeaders(){return W(this,fn)}suggest(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:i,signal:n}=e,s=Re(I(I({},this.defaults),e),{sessionToken:i}),o=new URL(`${Gl}/${encodeURIComponent(t)}`);o.search=Ve(this,Bs,$o).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});ge(this,fn,a.headers),yield Oe(a);let d=yield a.json();return Re(I({},d),{suggestions:d.suggestions.map(u=>Re(I({},u),{original_search_text:t,_source:"mapbox"})),url:o.toString()})})}retrieve(t,e){return ie(this,null,function*(){if(!t)throw new Error("suggestion is required");if(!this.canRetrieve(t))throw new Error("suggestion cannot be retrieved");let{sessionToken:i,signal:n}=e,s=re.convert(i),o=new URL(`${$l}/${t.action.id}`);o.search=ot({access_token:this.accessToken,session_token:s.id});let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Oe(a);let d=yield a.json();return d.url=o.toString(),d})}canRetrieve(t){let e=t.action;return typeof(e==null?void 0:e.id)=="string"}},xi=Uo;fn=new WeakMap;Bs=new WeakSet;$o=function(t){return ot({types:"address",access_token:this.accessToken,streets:t.streets,language:t.language,country:t.country,limit:t.limit},t.sessionToken&&{session_token:re.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:K.convert(t.bbox).toFlatArray().join(",")})};xi.defaults={language:"en",proximity:"ip",streets:!0};var An="https://api.mapbox.com/search/searchbox/v1",Vl="suggest",Yl="retrieve",Xl="category",Kl="reverse",Zl=`${An}/${Vl}`,Ql=`${An}/${Yl}`,Jl=`${An}/${Xl}`,ec=`${An}/${Kl}`,qo="\\.\\d{1,256}",tc=`\\d{1,3}(${qo})?`,Do=`(-?(${tc}|${qo}))`,zo=new RegExp(`^[ ]*${Do},\\s*${Do}[ ]*$`),Wo=/[\s,]+/,gn,Hs,Fs,Vo,Gs,Yo,Xo=class{constructor(t={}){Q(this,gn),Q(this,Fs),Q(this,Gs);let e=t,{accessToken:i}=e,n=Sn(e,["accessToken"]);this.accessToken=i,this.defaults=I(I({},Xo.defaults),n)}suggest(t,e){return ie(this,null,function*(){var i;if(!t)throw new Error("searchText is required");if(zo.test(t)&&e.allowReverse){let m=t.trim().split(Wo).map(y=>y.trim());e.flipCoordinates&&(m=m.reverse());let v=m.join(","),S=yield this.reverse(v,e);return Ve(this,Fs,Vo).call(this,S)}let{sessionToken:s,signal:o}=e,l=Re(I(I({},this.defaults),e),{q:t,sessionToken:s});if(l.eta_type&&(!l.origin||!l.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(l.origin&&!l.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");let a=new URL(Zl);a.search=Ve(this,gn,Hs).call(this,l);let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:o});yield Oe(u);let h=yield u.json();return h.url=a.toString(),(i=h.suggestions)==null||i.forEach(m=>{m._source="mapbox"}),h})}retrieve(t,e){return ie(this,null,function*(){if(!t)throw new Error("suggestion is required");if(t._originalFeature)return{type:"FeatureCollection",features:[t._originalFeature],url:t._originalUrl||""};if(t._geometry)return{type:"FeatureCollection",features:[{type:"Feature",properties:t,geometry:t._geometry}]};let{sessionToken:i,signal:n,language:s}=e,o=re.convert(i),l=I(I({},this.defaults),s&&{language:s}),a=new URL(`${Ql}/${encodeURIComponent(t.mapbox_id)}`);a.search=ot({access_token:this.accessToken,session_token:o.id},{language:l.language});let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:n});yield Oe(u);let h=yield u.json();return h.url=a.toString(),h})}category(t){return ie(this,arguments,function*(e,i={}){if(!e)throw new Error("category is required");let n=I(I({},this.defaults),i),s=new URL(`${Jl}/${encodeURIComponent(e)}`);s.search=Ve(this,gn,Hs).call(this,n);let{fetch:o}=Ae(),l=yield o(s.toString(),{signal:n.signal});yield Oe(l);let a=yield l.json();return a.url=s.toString(),a})}reverse(t){return ie(this,arguments,function*(e,i={}){var n;if(!e)throw new Error("lngLat is required");let[s,o]=typeof e=="string"?e.split(",").map(m=>parseFloat(m)):B.convert(e).toArray();if(isNaN(s)||isNaN(o))throw new Error("lngLat is required");let l=I(I({},this.defaults),i),a=new URL(ec);a.search=ot({access_token:this.accessToken,language:l.language,limit:l.limit,longitude:s,latitude:o},l.types&&{types:typeof l.types=="string"?l.types:[...l.types].join(",")});let{fetch:d}=Ae(),u=yield d(a.toString(),{signal:l.signal});yield Oe(u);let h=yield u.json();return h.url=a.toString(),(n=h.features)==null||n.forEach(m=>{m._source="mapbox"}),h})}},$s=Xo;gn=new WeakSet;Hs=function(t){return ot({q:t.q,access_token:this.accessToken,language:t.language,limit:t.limit,navigation_profile:t.navigation_profile,route:t.route,route_geometry:t.route_geometry,sar_type:t.sar_type,time_deviation:t.time_deviation,eta_type:t.eta_type,country:t.country,poi_category:t.poi_category,rich_metadata_provider:t.rich_metadata_provider,poi_category_exclusions:t.poi_category_exclusions},t.sessionToken&&{session_token:re.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.origin&&{origin:typeof t.origin=="string"?t.origin:B.convert(t.origin).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:K.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};Fs=new WeakSet;Vo=function(t){return{suggestions:t.features.map(e=>Ve(this,Gs,Yo).call(this,e,t.url)),attribution:t.attribution,url:t.url}};Gs=new WeakSet;Yo=function(t,e){return Re(I({},t.properties),{_originalFeature:t,_originalUrl:e,_source:t._source})};$s.defaults={language:"en"};var ic="https://api.mapbox.com/autofill/v1",rc="retrieve",nc=`${ic}/${rc}`,Ds,Ko,Zo=class{constructor(t={}){Q(this,Ds);let e=t,{accessToken:i}=e,n=Sn(e,["accessToken"]);this.accessToken=i,this.defaults=I(I({},Zo.defaults),n)}validate(t,e){return ie(this,null,function*(){if(!t)throw new Error("searchText is required");let{sessionToken:i,signal:n}=e,s=Re(I(I({},this.defaults),e),{sessionToken:i}),o=new URL(`${nc}/${encodeURIComponent(t)}`);o.search=Ve(this,Ds,Ko).call(this,s);let{fetch:l}=Ae(),a=yield l(o.toString(),{signal:n});yield Oe(a);let d=yield a.json();return d.url=o.toString(),d.features.length>0&&(d.features=[d.features[0]]),d})}},Us=Zo;Ds=new WeakSet;Ko=function(t){return ot({access_token:this.accessToken,language:t.language,country:t.country},t.sessionToken&&{session_token:re.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:K.convert(t.bbox).toFlatArray().join(",")})};Us.defaults={language:"en",proximity:"ip"};var qs="https://api.mapbox.com/search/geocode/v6",sc=`${qs}/forward`,oc=`${qs}/reverse`,Rd=`${qs}/batch`,vi,vn,Ns,Qo=class{constructor(t={}){Q(this,vn),Q(this,vi,void 0);let e=t,{accessToken:i}=e,n=Sn(e,["accessToken"]);this.accessToken=i,this.defaults=I({},n)}get responseHeaders(){return W(this,vi)}forward(t,e){return ie(this,null,function*(){var i;if(!t)throw new Error("searchText is required");let n;e&&({signal:n}=e);let s=Re(I(I({},this.defaults),e),{q:t}),o=new URL(`${sc}`);o.search=Ve(this,vn,Ns).call(this,s);let{fetch:l}=Ae(),a=n?{signal:n}:{},d=yield l(o.toString(),a);ge(this,vi,d.headers),yield Oe(d);let u=yield d.json();return u.url=o.toString(),(i=u.features)==null||i.forEach(h=>{h._source="mapbox"}),u})}reverse(t,e){return ie(this,null,function*(){var i;if(!t)throw new Error("lngLat is required");let n;e&&({signal:n}=e);let s;if(typeof t=="string"){let[m,v]=t.split(",");s=new B(Number(m),Number(v))}else s=B.convert(t);let o=Re(I(I({},this.defaults),e),{longitude:s.lng,latitude:s.lat}),l=new URL(`${oc}`);l.search=Ve(this,vn,Ns).call(this,o,!0);let{fetch:a}=Ae(),d=n?{signal:n}:{},u=yield a(l.toString(),d);ge(this,vi,u.headers),yield Oe(u);let h=yield u.json();return h.url=l.toString(),(i=h.features)==null||i.forEach(m=>{m._source="mapbox"}),h})}suggest(t,e){return ie(this,null,function*(){if(zo.test(t)){let n=t.trim().split(Wo).map(o=>o.trim());e.flipCoordinates&&(n=n.reverse());let s=n.join(",");return this.reverse(s,e)}else return this.forward(t,e)})}retrieve(t){return ie(this,null,function*(){return t})}};vi=new WeakMap;vn=new WeakSet;Ns=function(t,e=!1){return e&&["proximity","autocomplete","bbox"].forEach(i=>{i in t&&delete t[i]}),ot({q:t.q,longitude:t.longitude,latitude:t.latitude,access_token:this.accessToken,permanent:t.permanent,language:t.language,country:t.country,limit:t.limit,autocomplete:t.autocomplete,worldview:t.worldview},t.sessionToken&&{session_token:re.convert(t.sessionToken).id},t.proximity&&{proximity:typeof t.proximity=="string"?t.proximity:B.convert(t.proximity).toArray().join(",")},t.bbox&&{bbox:typeof t.bbox=="string"?t.bbox:K.convert(t.bbox).toFlatArray().join(",")},t.types&&{types:typeof t.types=="string"?t.types:[...t.types].join(",")})};var zs=(t=>(t.exact="exact",t.high="high",t.medium="medium",t.low="low",t))(zs||{}),bi,Ws=class{constructor(){Q(this,bi,{})}addEventListener(t,e){let i=W(this,bi);i[t]||(i[t]=[]),i[t].push(e)}removeEventListener(t,e){let i=W(this,bi);if(!i[t])return;let n=i[t],s=n.indexOf(e);s!==-1&&n.splice(s,1)}fire(t,e){let i=W(this,bi);if(!i[t])return;let n=i[t];for(let s of n)s(e)}};bi=new WeakMap;function Vs(t,e,i){let n=null;return(...s)=>{n!==null&&clearTimeout(n);let o=i&&i();n=setTimeout(()=>{n=null,!(o==null?void 0:o.aborted)&&t(...s)},e)}}function _s(){let{AbortController:t}=Ae();return new t}var yi,bn,yn,Lt,We,xn,Ye=class extends Ws{constructor(t,e=0){super();Q(this,yi,new re),Q(this,bn,0),Q(this,yn,!1),Q(this,Lt,void 0),Q(this,We,_s()),Q(this,xn,void 0),ge(this,xn,Vs((i,...n)=>ie(this,[i,...n],function*(s,o={}){if(W(this,We).abort(),ge(this,We,_s()),!s){ge(this,Lt,null),this.fire("suggest",W(this,Lt));return}try{let l=yield this.search.suggest(s,Re(I({sessionToken:this.sessionToken},o),{signal:W(this,We).signal}));ge(this,Lt,l),this.fire("suggest",l)}catch(l){if(l.name==="AbortError")return;this.fire("suggesterror",l)}}),e,()=>W(this,We).signal)),Object.defineProperties(this,{search:{value:t,writable:!1},debounce:{value:e,writable:!1}})}get sessionToken(){return W(this,yn)?W(this,yi).id:`${W(this,yi).id}.${W(this,bn)}`}set sessionToken(t){ge(this,yn,!0),ge(this,yi,new re(t))}get suggestions(){return W(this,Lt)}suggest(t,e){return W(this,xn).call(this,t,e),new Promise((i,n)=>{let s,o;s=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),i(l)},o=l=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),n(l)},this.addEventListener("suggest",s),this.addEventListener("suggesterror",o)})}clear(){this.suggest("")}retrieve(t,e){return ie(this,null,function*(){let i=yield this.search.retrieve(t,I({sessionToken:this.sessionToken},e));return this.fire("retrieve",i),i})}canRetrieve(t){return this.search.canRetrieve?this.search.canRetrieve(t):!0}canSuggest(t){return this.search.canSuggest?this.search.canSuggest(t):!0}abort(){W(this,We).abort(),ge(this,We,_s())}incrementSession(){Dl(this,bn)._++}};yi=new WeakMap;bn=new WeakMap;yn=new WeakMap;Lt=new WeakMap;We=new WeakMap;xn=new WeakMap;function kt(t){let{properties:e}=t;return I({},e)}var Ei=1.4;function Tn(t,e,i=.5){let{center:n,zoom:s}=t.cameraForBounds(e),o=Math.max(s-i,0);return{center:n,zoom:o,speed:Ei}}function Mn(t){switch(t){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function wn(t,e){return`https://api.mapbox.com/styles/v1/${t}/${e}/static/`}var Si='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var Ys='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg>';var Jo=wn("mapbox","satellite-streets-v11"),ea="20d01",ta=["mapbox.com","mapbox.cn","tilestream.net"],ia=$(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),ra=$(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`),na=$(`
<template>
  <div class="SearchBox">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${Si}</button>
      <div class="LoadingIcon">${Ys}</div>
    </div>
  </div>
</template>
`),sa=$(`
<template>
  <div class="Geocoder">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${Si}</button>
      <div class="LoadingIcon">${Ys}</div>
    </div>
  </div>
</template>
`);function Te(){return"mbx"+new re().id.slice(0,8)}function Pe(t){try{return JSON.parse(t)}catch(e){return null}}function at(t,e){if(t==null||e==null||typeof t!="object"||typeof e!="object")return t===e;let i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(let s of i)if(!at(t[s],e[s]))return!1;return!0}function Xs(t,e){let i=Math.pow(10,e);return Math.round(t*i)/i}function oa(t){return Boolean(t.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function aa(t){return Boolean(ta.some(e=>t.includes(e)))}var Ct,lt,ct,V=class extends HTMLElement{constructor(){super(...arguments);c(this,Ct,Te());c(this,lt,void 0);c(this,ct,e=>`${r(this,Ct)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,i){let n=l=>l.replace(e,i);Ps(this,n);let s=Array.from(this.querySelectorAll("style"));for(let l of s)l.textContent=gi(l.textContent,n);s.length&&p(this,lt,s[s.length-1]);let o=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let l of o)l.id=l.id.replace(e,i)}connectedCallback(){if(this.childElementCount>0){let s=this.dataset.seed,o=r(this,Ct);s&&s!==o&&(this.clonedCallback(s,o),this.dataset.seed=o);return}this.dataset.seed=r(this,Ct);let e=this.template;if(e){let s=this.prepareTemplate(e);this.appendChild(s)}let i=this.templateStyle;if(i){let s=document.createElement("style");s.textContent=this.prepareCSS(i),this.appendChild(s)}let n=document.createElement("style");this.templateUserStyle&&(n.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(n),p(this,lt,n)}prepareTemplate(e){let i=e.content.firstElementChild;return Ps(i.cloneNode(!0),r(this,ct))}prepareCSS(e){return Rs(e,r(this,ct))}updateTemplateUserStyle(e){!r(this,lt)||(r(this,lt).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(gi(e,r(this,ct)))}querySelectorAll(e){return super.querySelectorAll(gi(e,r(this,ct)))}addEventListener(e,i,n){super.addEventListener(e,i,n)}removeEventListener(e,i,n){super.removeEventListener(e,i,n)}dispatchEvent(e){return super.dispatchEvent(e)}};Ct=new WeakMap,lt=new WeakMap,ct=new WeakMap;var la='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var ca='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var da=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`;var ua=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`;var ha=`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>
</svg>`;var ma="@mapbox/search-js-web",dt="1.5.0";var mc=`https://api.mapbox.com/search-js/v${dt}/img/style-toggle-satellite.jpg`,fc=`https://api.mapbox.com/search-js/v${dt}/img/style-toggle-default.jpg`,gc=768-1,vc=`@media only screen and (max-width: ${gc}px)`,Ks={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:Si,question:la,marker:ca,street:da,addressMarker:ua,search:ha},images:{styleToggleDefault:fc,styleToggleSatellite:mc}};function j(t,e={}){let i=f(f({},Ks.variables),e.variables||{}),n=e.cssText||"",s="";for(let[o,l]of Object.entries(i)){if(!Array.isArray(l)){s+=`--${o}: ${l};`;continue}if(l[0]!=="mobile"){let u=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${o} ${u}`)}let[,a,d]=l;n+=`${vc} { ${t} { --${o}: ${a} !important; } }`,s+=`--${o}: ${d};`}return n+`${t} { ${s} }`}function z(t,e={}){return f(f({},Ks.icons),e.icons||{})[t]}function fa(t,e={}){return f(f({},Ks.images),e.images||{})[t]}function kn(t){return t.split("-")[0]}function Zs(t){return t.split("-")[1]}function Qs(t){return["top","bottom"].includes(kn(t))?"x":"y"}function ba(t){return t==="y"?"height":"width"}function ga(t,e,i){let{reference:n,floating:s}=t,o=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2,a=Qs(e),d=ba(a),u=n[d]/2-s[d]/2,h=a==="x",m;switch(kn(e)){case"top":m={x:o,y:n.y-s.height};break;case"bottom":m={x:o,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:l};break;case"left":m={x:n.x-s.width,y:l};break;default:m={x:n.x,y:n.y}}switch(Zs(e)){case"start":m[a]-=u*(i&&h?-1:1);break;case"end":m[a]+=u*(i&&h?-1:1)}return m}var ya=(t,e,i)=>_(void 0,null,function*(){let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:l}=i,a=yield l.isRTL==null?void 0:l.isRTL(e),d=yield l.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=ga(d,n,a),m=n,v={};for(let S=0;S<o.length;S++){let{name:y,fn:x}=o[S],{x:A,y:C,data:q,reset:F}=yield x({x:u,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:v,rects:d,platform:l,elements:{reference:t,floating:e}});u=A!=null?A:u,h=C!=null?C:h,v=k(f({},v),{[y]:f(f({},v[y]),q)}),F&&(typeof F=="object"&&(F.placement&&(m=F.placement),F.rects&&(d=F.rects===!0?yield l.getElementRects({reference:t,floating:e,strategy:s}):F.rects),{x:u,y:h}=ga(d,m,a)),S=-1)}return{x:u,y:h,placement:m,strategy:s,middlewareData:v}});function bc(t){return typeof t!="number"?function(e){return f({top:0,right:0,bottom:0,left:0},e)}(t):{top:t,right:t,bottom:t,left:t}}function Ai(t){return k(f({},t),{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function xa(t,e){return _(this,null,function*(){var i;e===void 0&&(e={});let{x:n,y:s,platform:o,rects:l,elements:a,strategy:d}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:v=!1,padding:S=0}=e,y=bc(S),x=a[v?m==="floating"?"reference":"floating":m],A=Ai(yield o.getClippingRect({element:(i=yield o.isElement==null?void 0:o.isElement(x))==null||i?x:x.contextElement||(yield o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:d})),C=Ai(o.convertOffsetParentRelativeRectToViewportRelativeRect?yield o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:m==="floating"?k(f({},l.floating),{x:n,y:s}):l.reference,offsetParent:yield o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating),strategy:d}):l[m]);return{top:A.top-C.top+y.top,bottom:C.bottom-A.bottom+y.bottom,left:A.left-C.left+y.left,right:C.right-A.right+y.right}})}var yc={left:"right",right:"left",bottom:"top",top:"bottom"};function Ln(t){return t.replace(/left|right|bottom|top/g,e=>yc[e])}function xc(t,e,i){i===void 0&&(i=!1);let n=Zs(t),s=Qs(t),o=ba(s),l=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Ln(l)),{main:l,cross:Ln(l)}}var Ec={start:"end",end:"start"};function va(t){return t.replace(/start|end/g,e=>Ec[e])}var Sc=["top","right","bottom","left"],lu=Sc.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);var Js=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(e){return _(this,null,function*(){var i;let{placement:n,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:d}=e,T=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",flipAlignment:S=!0}=T,y=Co(T,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),x=kn(n),A=m||(x===l||!S?[Ln(l)]:function(R){let P=Ln(R);return[va(R),P,va(P)]}(l)),C=[l,...A],q=yield xa(e,y),F=[],st=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&F.push(q[x]),h){let{main:R,cross:P}=xc(n,o,yield a.isRTL==null?void 0:a.isRTL(d.floating));F.push(q[R],q[P])}if(st=[...st,{placement:n,overflows:F}],!F.every(R=>R<=0)){var D,g;let R=((D=(g=s.flip)==null?void 0:g.index)!=null?D:0)+1,P=C[R];if(P)return{data:{index:R,overflows:st},reset:{placement:P}};let N="bottom";switch(v){case"bestFit":{var b;let qe=(b=st.map(he=>[he,he.overflows.filter(me=>me>0).reduce((me,ks)=>me+ks,0)]).sort((he,me)=>he[1]-me[1])[0])==null?void 0:b[0].placement;qe&&(N=qe);break}case"initialPlacement":N=l}if(n!==N)return{reset:{placement:N}}}return{}})}}};var eo=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(e){return _(this,null,function*(){let{x:i,y:n}=e,s=yield function(o,l){return _(this,null,function*(){let{placement:a,platform:d,elements:u}=o,h=yield d.isRTL==null?void 0:d.isRTL(u.floating),m=kn(a),v=Zs(a),S=Qs(a)==="x",y=["left","top"].includes(m)?-1:1,x=h&&S?-1:1,A=typeof l=="function"?l(o):l,{mainAxis:C,crossAxis:q,alignmentAxis:F}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:f({mainAxis:0,crossAxis:0,alignmentAxis:null},A);return v&&typeof F=="number"&&(q=v==="end"?-1*F:F),S?{x:q*x,y:C*y}:{x:C*y,y:q*x}})}(e,t);return{x:i+s.x,y:n+s.y,data:s}})}}};function wa(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function He(t){if(t==null)return window;if(!wa(t)){let e=t.ownerDocument;return e&&e.defaultView||window}return t}function Mi(t){return He(t).getComputedStyle(t)}function _e(t){return wa(t)?"":t?(t.nodeName||"").toLowerCase():""}function La(){let t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Me(t){return t instanceof He(t).HTMLElement}function Ke(t){return t instanceof He(t).Element}function io(t){return typeof ShadowRoot=="undefined"?!1:t instanceof He(t).ShadowRoot||t instanceof ShadowRoot}function On(t){let{overflow:e,overflowX:i,overflowY:n}=Mi(t);return/auto|scroll|overlay|hidden/.test(e+n+i)}function Ac(t){return["table","td","th"].includes(_e(t))}function Ea(t){let e=/firefox/i.test(La()),i=Mi(t);return i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].includes(i.willChange)||e&&i.willChange==="filter"||e&&!!i.filter&&i.filter!=="none"}function ka(){return!/^((?!chrome|android).)*safari/i.test(La())}var Sa=Math.min,Ti=Math.max,Cn=Math.round;function Be(t,e,i){var n,s,o,l;e===void 0&&(e=!1),i===void 0&&(i=!1);let a=t.getBoundingClientRect(),d=1,u=1;e&&Me(t)&&(d=t.offsetWidth>0&&Cn(a.width)/t.offsetWidth||1,u=t.offsetHeight>0&&Cn(a.height)/t.offsetHeight||1);let h=Ke(t)?He(t):window,m=!ka()&&i,v=(a.left+(m&&(n=(s=h.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/d,S=(a.top+(m&&(o=(l=h.visualViewport)==null?void 0:l.offsetTop)!=null?o:0))/u,y=a.width/d,x=a.height/u;return{width:y,height:x,top:S,right:v+y,bottom:S+x,left:v,x:v,y:S}}function Xe(t){return(e=t,(e instanceof He(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function Rn(t){return Ke(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ca(t){return Be(Xe(t)).left+Rn(t).scrollLeft}function Tc(t,e,i){let n=Me(e),s=Xe(e),o=Be(t,n&&function(d){let u=Be(d);return Cn(u.width)!==d.offsetWidth||Cn(u.height)!==d.offsetHeight}(e),i==="fixed"),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&i!=="fixed")if((_e(e)!=="body"||On(s))&&(l=Rn(e)),Me(e)){let d=Be(e,!0);a.x=d.x+e.clientLeft,a.y=d.y+e.clientTop}else s&&(a.x=Ca(s));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function Ia(t){return _e(t)==="html"?t:t.assignedSlot||t.parentNode||(io(t)?t.host:null)||Xe(t)}function Aa(t){return Me(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function to(t){let e=He(t),i=Aa(t);for(;i&&Ac(i)&&getComputedStyle(i).position==="static";)i=Aa(i);return i&&(_e(i)==="html"||_e(i)==="body"&&getComputedStyle(i).position==="static"&&!Ea(i))?e:i||function(n){let s=Ia(n);for(io(s)&&(s=s.host);Me(s)&&!["html","body"].includes(_e(s));){if(Ea(s))return s;s=s.parentNode}return null}(t)||e}function Ta(t){if(Me(t))return{width:t.offsetWidth,height:t.offsetHeight};let e=Be(t);return{width:e.width,height:e.height}}function Oa(t){let e=Ia(t);return["html","body","#document"].includes(_e(e))?t.ownerDocument.body:Me(e)&&On(e)?e:Oa(e)}function In(t,e){var i;e===void 0&&(e=[]);let n=Oa(t),s=n===((i=t.ownerDocument)==null?void 0:i.body),o=He(n),l=s?[o].concat(o.visualViewport||[],On(n)?n:[]):n,a=e.concat(l);return s?a:a.concat(In(l))}function Ma(t,e,i){return e==="viewport"?Ai(function(n,s){let o=He(n),l=Xe(n),a=o.visualViewport,d=l.clientWidth,u=l.clientHeight,h=0,m=0;if(a){d=a.width,u=a.height;let v=ka();(v||!v&&s==="fixed")&&(h=a.offsetLeft,m=a.offsetTop)}return{width:d,height:u,x:h,y:m}}(t,i)):Ke(e)?function(n,s){let o=Be(n,!1,s==="fixed"),l=o.top+n.clientTop,a=o.left+n.clientLeft;return{top:l,left:a,x:a,y:l,right:a+n.clientWidth,bottom:l+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(e,i):Ai(function(n){var s;let o=Xe(n),l=Rn(n),a=(s=n.ownerDocument)==null?void 0:s.body,d=Ti(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=Ti(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),h=-l.scrollLeft+Ca(n),m=-l.scrollTop;return Mi(a||o).direction==="rtl"&&(h+=Ti(o.clientWidth,a?a.clientWidth:0)-d),{width:d,height:u,x:h,y:m}}(Xe(t)))}function Mc(t){let e=In(t),i=["absolute","fixed"].includes(Mi(t).position)&&Me(t)?to(t):t;return Ke(i)?e.filter(n=>Ke(n)&&function(s,o){let l=o.getRootNode==null?void 0:o.getRootNode();if(s.contains(o))return!0;if(l&&io(l)){let a=o;do{if(a&&s===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(n,i)&&_e(n)!=="body"):[]}var wc={getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:n,strategy:s}=t,o=[...i==="clippingAncestors"?Mc(e):[].concat(i),n],l=o[0],a=o.reduce((d,u)=>{let h=Ma(e,u,s);return d.top=Ti(h.top,d.top),d.right=Sa(h.right,d.right),d.bottom=Sa(h.bottom,d.bottom),d.left=Ti(h.left,d.left),d},Ma(e,l,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:n}=t,s=Me(i),o=Xe(i);if(i===o)return e;let l={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((s||!s&&n!=="fixed")&&((_e(i)!=="body"||On(o))&&(l=Rn(i)),Me(i))){let d=Be(i,!0);a.x=d.x+i.clientLeft,a.y=d.y+i.clientTop}return k(f({},e),{x:e.x-l.scrollLeft+a.x,y:e.y-l.scrollTop+a.y})},isElement:Ke,getDimensions:Ta,getOffsetParent:to,getDocumentElement:Xe,getElementRects:t=>{let{reference:e,floating:i,strategy:n}=t;return{reference:Tc(e,to(i),n),floating:k(f({},Ta(i)),{x:0,y:0})}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Mi(t).direction==="rtl"};function Ra(t,e,i,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=!0,animationFrame:a=!1}=n,d=s&&!a,u=o&&!a,h=d||u?[...Ke(t)?In(t):[],...In(e)]:[];h.forEach(y=>{d&&y.addEventListener("scroll",i,{passive:!0}),u&&y.addEventListener("resize",i)});let m,v=null;l&&(v=new ResizeObserver(i),Ke(t)&&!a&&v.observe(t),v.observe(e));let S=a?Be(t):null;return a&&function y(){let x=Be(t);!S||x.x===S.x&&x.y===S.y&&x.width===S.width&&x.height===S.height||i(),S=x,m=requestAnimationFrame(y)}(),l||i(),()=>{var y;h.forEach(x=>{d&&x.removeEventListener("scroll",i),u&&x.removeEventListener("resize",i)}),(y=v)==null||y.disconnect(),v=null,a&&cancelAnimationFrame(m)}}var Pa=(t,e,i)=>ya(t,e,f({platform:wc},i));var ut,Pn,_n=class{constructor(e,i,n){c(this,ut,void 0);c(this,Pn,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>_(this,null,function*(){let e={placement:this.options.placement,middleware:[eo(this.options.offset),this.options.flip&&Js()].filter(Boolean)},{x:i,y:n}=yield Pa(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${i}px`,top:`${n}px`})});this.referenceEl=e,this.floatingEl=i,p(this,ut,f(f({},r(this,Pn)),n)),this.destroy=Ra(this.referenceEl,this.floatingEl,this.update)}get options(){return r(this,ut)}set options(e){p(this,ut,f(f({},r(this,ut)),e))}};ut=new WeakMap,Pn=new WeakMap;var ne=".Geocoder *,.MapboxAddressConfirmation *,.MapboxAddressConfirmationFeature *,.MapboxAddressConfirmationNoFeature *,.MapboxAddressMinimap *,.MapboxSearch *,.SearchBox *{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Geocoder,.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.ClearBtn:focus{border:1.5px solid #909090;border-radius:4px}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var E=class extends CustomEvent{constructor(e,i){super(e,{composed:!0,detail:i})}clone(e){let i=new E(this.type,this.detail);return e&&Object.defineProperty(i,"target",{value:e}),i}};var _a="Type in 2 or more characters for results.",Ba="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",Ha="No search results.",Fa=(t,e,i)=>`${e} ${e===1?"result is":"results are"} available. ${t}. ${i} of ${e} is selected.`,Da=t=>`${t} ${t===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function Bn(t){let e=t.currentTarget;(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var Na="search-listbox__description",Ze=t=>{let e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.setAttribute("role","status"),e.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let i=document.createElement("div");return i.setAttribute("id",`${t}--${Na}`),e.appendChild(i),e},ro=(t,e)=>{var n;let i=(n=document.body.querySelector(`[id="${e}--${Na}"]`))!=null?n:null;i&&(i.textContent=t)},Hn=t=>{t.name=t.name+" address-search",t.setAttribute("data-lpignore","true")},ja=(t,e,i)=>{let n=null,s=!e||e.length===0;if((t==null?void 0:t.length)<2)n=_a+" "+Ba;else if(s)n=Ha;else if(i!==void 0){let o=e[i],l=o.name||o.feature_name||o.properties.name;n=Fa(l,e.length,i+1)}else n=Da(e.length);return n};var wi=(t,e)=>{switch(e){case 0:return t.matching_name||t.feature_name||t.address_line1;case 2:return t.name;case 1:return t.properties.name;default:return""}},Ga=(t,e)=>{switch(e){case 0:return t.description;case 2:return t.feature_type==="poi"?t.full_address:t.place_formatted;case 1:return t.properties.place_formatted;default:return""}};function no(t,e){return`${t}-${e}`}var Y,X,It,we,Ot,Li,Rt,ki,$a,Fn,kc,Ci,Ii,Oi,Ri,Pt,Pi,_i,Bi,ve=class extends V{constructor(){super(...arguments);c(this,ki);c(this,Fn);this.suggestions=null;c(this,Y,null);c(this,X,void 0);c(this,It,void 0);c(this,we,void 0);c(this,Ot,void 0);c(this,Li,null);c(this,Rt,void 0);c(this,Ci,{});c(this,Ii,{});c(this,Oi,e=>{let{Results:i}=r(this,X),n=e.target;if(n.dataset.mapboxSuccess){delete n.dataset.mapboxSuccess;return}let s=n.value;this.renderAriaMessage(),i.setAttribute("aria-busy","true"),this.dispatchEvent(new E("input",{lastInput:e.data,inputText:s}))});this.renderAriaMessage=()=>{var i;let e=ja((i=this.input)==null?void 0:i.value,this.suggestions,this.selectedIndex);ro(e,this.dataset.seed)};this.clearAriaMessage=()=>{ro("",this.dataset.seed)};this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}ze(this,Fn,kc).call(this),e.length&&ze(this,ki,$a).call(this);let{Results:i}=r(this,X);i.setAttribute("aria-busy","false")};this.handleError=()=>{let{Results:e}=r(this,X);e.setAttribute("aria-busy","false"),this.hideResults()};c(this,Ri,(e,i)=>_(this,null,function*(){let n=this.input;n&&(n.dataset.mapboxSuccess="true");let s={suggestion:e,selectedIndex:i};this.dispatchEvent(new E("select",s)),this.hideResults()}));c(this,Pt,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new E("focus")),this.renderAriaMessage(),ze(this,ki,$a).call(this)});c(this,Pi,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new E("blur")),this.clearAriaMessage())});c(this,_i,e=>{r(this,X).MapboxSearch.contains(e.relatedTarget)||this.hideResults()});this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)};this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)};c(this,Bi,e=>{var i;if(!!((i=this.suggestions)==null?void 0:i.length)){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0&&e.key==="Enter"){e.preventDefault(),r(this,Ri).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}}})}get template(){return ia}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxSearch",this.theme)}get input(){return r(this,Ot)}set input(e){let i=r(this,Ot);i&&(i.removeEventListener("input",r(this,Oi)),i.removeEventListener("focus",r(this,Pt)),i.removeEventListener("blur",r(this,Pi)),i.removeEventListener("keydown",r(this,Bi)),r(this,Y)&&r(this,Y).destroy()),e&&(e.addEventListener("input",r(this,Oi)),e.addEventListener("focus",r(this,Pt)),e.addEventListener("blur",r(this,Pi)),e.addEventListener("keydown",r(this,Bi)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",r(this,we)),this.isConnected&&p(this,Y,new _n(e,r(this,X).Results,this.popoverOptions))),p(this,Ot,e)}get searchService(){return r(this,Li)}set searchService(e){p(this,Li,e)}get selectedIndex(){return r(this,Rt)}set selectedIndex(e){let i=r(this,Rt);p(this,Rt,e);let{ResultsList:n}=r(this,X),s=no(r(this,we),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",s),n.setAttribute("aria-activedescendant",s)):(this.input.removeAttribute("aria-activedescendant"),n.removeAttribute("aria-activedescendant")),i!==e){let o=no(r(this,we),i),l=n.querySelector(`#${o}`);if(l==null||l.removeAttribute("aria-selected"),l==null||l.setAttribute("tabindex","-1"),e!==void 0){let a=n.querySelector(`#${s}`);a==null||a.setAttribute("aria-selected","true"),a==null||a.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:i}=r(this,X);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),i.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let i=this.prepareTemplate(ra);return i.id=no(r(this,we),e),i}fillItem(e,i,n,s){let o=e.querySelector('[class$="SuggestionIcon"]'),l=e.querySelector('[class$="SuggestionName"]'),a=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(o.innerHTML=z(i.accuracy==="street"?"street":"addressMarker",this.theme),o.removeAttribute("aria-hidden")):o.setAttribute("aria-hidden","true"),l.textContent=a.textContent="",l.textContent=wi(i,this.searchService),a.textContent=Ga(i,this.searchService),n===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(n+1).toString()),e.setAttribute("aria-setsize",s.toString())}get theme(){return r(this,Ci)}set theme(e){p(this,Ci,e),!(!r(this,X)||!e)&&this.updateTemplateUserStyle(j(".MapboxSearch",e))}get popoverOptions(){return r(this,Ii)}set popoverOptions(e){p(this,Ii,e),r(this,Y)&&(r(this,Y).options=e,r(this,Y).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,p(this,It,this.dataset.seed+"-Label"),p(this,we,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",r(this,we)),p(this,X,te(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:i,Label:n}=r(this,X);n.id=r(this,It),i.id=r(this,we),i.setAttribute("aria-labelledby",r(this,It)),e.addEventListener("focusout",r(this,_i)),!r(this,Y)&&this.input&&p(this,Y,new _n(this.input,r(this,X).Results,this.popoverOptions)),requestAnimationFrame(()=>{r(this,Y)&&r(this,Y).update()})}disconnectedCallback(){this.input=null;let{Results:e}=r(this,X);e.removeEventListener("focusout",r(this,_i)),r(this,Y)&&r(this,Y).destroy()}focus(){document.activeElement===this.input?r(this,Pt).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){r(this,Y)&&r(this,Y).update()}};Y=new WeakMap,X=new WeakMap,It=new WeakMap,we=new WeakMap,Ot=new WeakMap,Li=new WeakMap,Rt=new WeakMap,ki=new WeakSet,$a=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:i}=r(this,X),n=this.input.getBoundingClientRect();i.style.setProperty("--width",`${n.width}px`),i.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},Fn=new WeakSet,kc=function(){let{ResultsList:e}=r(this,X);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let i=Ro(e);if(this.suggestions.length>i.length)for(let n=i.length;n<this.suggestions.length;n++){let s=this.renderItem(n);i.push(s),s.onmouseenter=()=>{this.selectedIndex=n},s.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(s)}if(this.suggestions.length<i.length)for(let n=this.suggestions.length;n<i.length;n++)i[n].remove();for(let n=0;n<this.suggestions.length;n++){let s=this.suggestions[n],o=i[n];this.fillItem(o,s,n,this.suggestions.length),o.onclick=()=>{r(this,Ri).call(this,s,n)}}},Ci=new WeakMap,Ii=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Pt=new WeakMap,Pi=new WeakMap,_i=new WeakMap,Bi=new WeakMap;window.MapboxSearchListbox=ve;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",ve);var Cc=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),Ic=new Set(["off","on","true","false"]);function so(t){let e=t.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function Hi(t){let e=t||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var Oc="section-",Rc="section-default",Pc="section-shipping",_c="section-billing";function Fi(t){let e=Array.from(t.querySelectorAll("[autocomplete]")).filter(n=>{let s=n.tagName.toLowerCase();return s==="input"||s==="select"||s==="textarea"}),i=[];for(let n of e){if(!_o(n))continue;let s=n.getAttribute("autocomplete")||"";if(!s||Ic.has(s))continue;let o=s.toLowerCase().split(" ");if(o.length>3)continue;let l=o[o.length-1];if(!Cc.has(l))continue;o.pop();let a=Rc;if(o.length){let d=o[o.length-1];d==="shipping"&&(a=Pc,o.pop()),d==="billing"&&(a=_c,o.pop())}if(o.length){let d=o[o.length-1];d.startsWith(Oc)&&(a=d)}i.push({input:n,section:a,field:l})}return i}function ht(t,e){let i=[],n=[],s=Fi(t),o=null;for(let{input:l,section:a,field:d}of s){let u=i.length-1,h=!1;if(i.length?(n[u]!==a||i[u][d])&&(h=!0):h=!0,h){if(o)break;i.push({[d]:l}),n.push(a),u++}else i[u][d]=l;l===e&&(o=i[u])}return o!=null?o:{}}function oo(t,e,i){var l;let n=ht(t,e),s=[i.address_line1,i.address_line2,i.address_line3].filter(a=>Boolean(a)).join(", ");fe(n["street-address"],n["address-line2"]?i.address_line1||"":s),fe(n["address-line1"],i.address_line1||""),fe(n["address-line2"],i.address_line2||""),fe(n["address-level1"],i.address_level1||""),fe(n["address-level2"],i.address_level2||""),fe(n["address-level3"],i.address_level3||"");let o=i.country_code||((l=i.metadata)==null?void 0:l.iso_3166_1)||"";if(n.country&&n.country instanceof HTMLSelectElement){let a=n.country.querySelector("option").value;a===""&&(a=n.country.querySelectorAll("option")[1].value);let d=a===a.toUpperCase();fe(n.country,d?o.toUpperCase():o)}else fe(n.country,o);fe(n["country-name"],i.country||""),fe(n["postal-code"],i.postcode||"")}function Dn(t,e){let i=ht(t,e),n={};for(let[s,o]of Object.entries(i))(o==null?void 0:o.value)&&(n[s]=o.value);return n}function _t(t){let e=[];return t["street-address"]?e.push(t["street-address"]):e.push(t["address-line1"]||""),e.push(t["address-line2"]||""),e.push(t["address-line3"]||""),e.push(t["address-level3"]||""),e.push(t["address-level2"]||""),e.push(t["address-level1"]||""),e.push(t["postal-code"]||""),t["country-name"]?e.push(t["country-name"]):e.push(t.country||""),e.filter(i=>Boolean(i)).map(i=>i.trim()).join(", ")}function Di(t,e){let i=so(e);if(!i)return;let n=kt(t);oo(i,e,n);let s=ht(i,e);s["address-line2"]&&!n.address_line2&&s["address-line2"].focus()}function Ua(t){var n;let e={},i=[t.properties.address_line1,t.properties.address_line2,t.properties.address_line3].filter(s=>Boolean(s)).join(", ");return e["street-address"]=i,e["address-line1"]=t.properties.address_line1,e["address-line2"]=t.properties.address_line2,e["address-line3"]=t.properties.address_line3,e["address-level1"]=t.properties.address_level1,e["address-level2"]=t.properties.address_level2,e["address-level3"]=t.properties.address_level3,e.country=(n=t.properties.metadata)==null?void 0:n.iso_3166_1,e["country-name"]=t.properties.country,e["postal-code"]=t.properties.postcode,e}function qa(t,e){for(let[i,n]of Object.entries(t))if(e[i]!==n)return!0;return!1}var Nn=t=>t.filter((e,i,n)=>{let s=wi(e,0);return e.accuracy!=="street"||n.findIndex(o=>s===wi(o,0))===i}),pe=(t,e,i)=>{let o=i?e||"address-line1":"new-password";t&&(t.autocomplete=o)},jn=(t,e,i)=>{if(!t||!i)return;pe(t,e,!0);let n={properties:k(f({},i),{address_line1:i.address_line1+" ",postcode:null})};Di(n,t),pe(t,e,!1),t==null||t.focus()};var ho=pn(Wa());var Va=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ao=Va.join(","),Ni=typeof Element=="undefined"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ya=function(e,i,n){var s=Array.prototype.slice.apply(e.querySelectorAll(ao));return i&&Ni.call(e,ao)&&s.unshift(e),s=s.filter(n),s},Bc=function(e){return e.contentEditable==="true"},Xa=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return isNaN(i)?Bc(e)||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:i},Hc=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},lo=function(e){return e.tagName==="INPUT"},Fc=function(e){return lo(e)&&e.type==="hidden"},Dc=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},Nc=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},jc=function(e){if(!e.name)return!0;var i=e.form||e.ownerDocument,n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=Nc(s,e.form);return!o||o===e},Gc=function(e){return lo(e)&&e.type==="radio"},$c=function(e){return Gc(e)&&!jc(e)},Uc=function(e,i){if(getComputedStyle(e).visibility==="hidden")return!0;var n=Ni.call(e,"details>summary:first-of-type"),s=n?e.parentElement:e;if(Ni.call(s,"details:not([open]) *"))return!0;if(!i||i==="full")for(;e;){if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}else if(i==="non-zero-area"){var o=e.getBoundingClientRect(),l=o.width,a=o.height;return l===0&&a===0}return!1},qc=function(e){if(lo(e)||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="BUTTON")for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var s=i.children.item(n);if(s.tagName==="LEGEND")return!s.contains(e)}return!0}i=i.parentElement}return!1},co=function(e,i){return!(i.disabled||Fc(i)||Uc(i,e.displayCheck)||Dc(i)||qc(i))},Ka=function(e,i){return!(!co(e,i)||$c(i)||Xa(i)<0)},Za=function(e,i){i=i||{};var n=[],s=[],o=Ya(e,i.includeContainer,Ka.bind(null,i));o.forEach(function(a,d){var u=Xa(a);u===0?n.push(a):s.push({documentOrder:d,tabIndex:u,node:a})});var l=s.sort(Hc).map(function(a){return a.node}).concat(n);return l},Qa=function(e,i){i=i||{};var n=Ya(e,i.includeContainer,co.bind(null,i));return n},ji=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ni.call(e,ao)===!1?!1:Ka(i,e)},zc=Va.concat("iframe").join(","),$n=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Ni.call(e,zc)===!1?!1:co(i,e)};function Ja(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function Wc(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ja(Object(i),!0).forEach(function(n){Vc(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ja(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function Vc(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var el=function(){var t=[];return{activateTrap:function(i){if(t.length>0){var n=t[t.length-1];n!==i&&n.pause()}var s=t.indexOf(i);s===-1||t.splice(s,1),t.push(i)},deactivateTrap:function(i){var n=t.indexOf(i);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}}}(),Yc=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Xc=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Kc=function(e){return e.key==="Tab"||e.keyCode===9},tl=function(e){return setTimeout(e,0)},uo=function(e,i){var n=-1;return e.every(function(s,o){return i(s)?(n=o,!1):!0}),n},Gi=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,n):e},Un=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},il=function(e,i){var n=(i==null?void 0:i.document)||document,s=Wc({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},i),o={containers:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,a=function(g,b,T){return g&&g[b]!==void 0?g[b]:s[T||b]},d=function(g){return!!(g&&o.containers.some(function(b){return b.contains(g)}))},u=function(g){var b=s[g];if(typeof b=="function"){for(var T=arguments.length,R=new Array(T>1?T-1:0),P=1;P<T;P++)R[P-1]=arguments[P];b=b.apply(void 0,R)}if(!b){if(b===void 0||b===!1)return b;throw new Error("`".concat(g,"` was specified but was not a node, or did not return a node"))}var N=b;if(typeof b=="string"&&(N=n.querySelector(b),!N))throw new Error("`".concat(g,"` as selector refers to no known node"));return N},h=function(){var g=u("initialFocus");if(g===!1)return!1;if(g===void 0)if(d(n.activeElement))g=n.activeElement;else{var b=o.tabbableGroups[0],T=b&&b.firstTabbableNode;g=T||u("fallbackFocus")}if(!g)throw new Error("Your focus-trap needs to have at least one focusable element");return g},m=function(){if(o.tabbableGroups=o.containers.map(function(g){var b=Za(g),T=Qa(g);if(b.length>0)return{container:g,firstTabbableNode:b[0],lastTabbableNode:b[b.length-1],nextTabbableNode:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,qe=T.findIndex(function(he){return he===P});return N?T.slice(qe+1).find(function(he){return ji(he)}):T.slice(0,qe).reverse().find(function(he){return ji(he)})}}}).filter(function(g){return!!g}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},v=function D(g){if(g!==!1&&g!==n.activeElement){if(!g||!g.focus){D(h());return}g.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=g,Yc(g)&&g.select()}},S=function(g){var b=u("setReturnFocus",g);return b||(b===!1?!1:g)},y=function(g){var b=Un(g);if(!d(b)){if(Gi(s.clickOutsideDeactivates,g)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!$n(b)});return}Gi(s.allowOutsideClick,g)||g.preventDefault()}},x=function(g){var b=Un(g),T=d(b);T||b instanceof Document?T&&(o.mostRecentlyFocusedNode=b):(g.stopImmediatePropagation(),v(o.mostRecentlyFocusedNode||h()))},A=function(g){var b=Un(g);m();var T=null;if(o.tabbableGroups.length>0){var R=uo(o.tabbableGroups,function(pi){var mi=pi.container;return mi.contains(b)}),P=R>=0?o.tabbableGroups[R]:void 0;if(R<0)g.shiftKey?T=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:T=o.tabbableGroups[0].firstTabbableNode;else if(g.shiftKey){var N=uo(o.tabbableGroups,function(pi){var mi=pi.firstTabbableNode;return b===mi});if(N<0&&(P.container===b||$n(b)&&!ji(b)&&!P.nextTabbableNode(b,!1))&&(N=R),N>=0){var qe=N===0?o.tabbableGroups.length-1:N-1,he=o.tabbableGroups[qe];T=he.lastTabbableNode}}else{var me=uo(o.tabbableGroups,function(pi){var mi=pi.lastTabbableNode;return b===mi});if(me<0&&(P.container===b||$n(b)&&!ji(b)&&!P.nextTabbableNode(b))&&(me=R),me>=0){var ks=me===o.tabbableGroups.length-1?0:me+1,Al=o.tabbableGroups[ks];T=Al.firstTabbableNode}}}else T=u("fallbackFocus");T&&(g.preventDefault(),v(T))},C=function(g){if(Xc(g)&&Gi(s.escapeDeactivates,g)!==!1){g.preventDefault(),l.deactivate();return}if(Kc(g)){A(g);return}},q=function(g){if(!Gi(s.clickOutsideDeactivates,g)){var b=Un(g);d(b)||Gi(s.allowOutsideClick,g)||(g.preventDefault(),g.stopImmediatePropagation())}},F=function(){if(!!o.active)return el.activateTrap(l),o.delayInitialFocusTimer=s.delayInitialFocus?tl(function(){v(h())}):v(h()),n.addEventListener("focusin",x,!0),n.addEventListener("mousedown",y,{capture:!0,passive:!1}),n.addEventListener("touchstart",y,{capture:!0,passive:!1}),n.addEventListener("click",q,{capture:!0,passive:!1}),n.addEventListener("keydown",C,{capture:!0,passive:!1}),l},st=function(){if(!!o.active)return n.removeEventListener("focusin",x,!0),n.removeEventListener("mousedown",y,!0),n.removeEventListener("touchstart",y,!0),n.removeEventListener("click",q,!0),n.removeEventListener("keydown",C,!0),l};return l={activate:function(g){if(o.active)return this;var b=a(g,"onActivate"),T=a(g,"onPostActivate"),R=a(g,"checkCanFocusTrap");R||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,b&&b();var P=function(){R&&m(),F(),T&&T()};return R?(R(o.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(g){if(!o.active)return this;clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,st(),o.active=!1,o.paused=!1,el.deactivateTrap(l);var b=a(g,"onDeactivate"),T=a(g,"onPostDeactivate"),R=a(g,"checkCanReturnFocus");b&&b();var P=a(g,"returnFocus","returnFocusOnDeactivate"),N=function(){tl(function(){P&&v(S(o.nodeFocusedBeforeActivation)),T&&T()})};return P&&R?(R(S(o.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,st(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,m(),F(),this)},updateContainerElements:function(g){var b=[].concat(g).filter(Boolean);return o.containers=b.map(function(T){return typeof T=="string"?n.querySelector(T):T}),o.active&&m(),this}},l.updateContainerElements(e),l};var rl=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new re;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},H=new rl;Object.defineProperty(H,"autofillSessionToken",{configurable:!1,writable:!1});var Zc=$(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),$i,ce,pt,Ui,mt=class extends V{constructor(){super(...arguments);c(this,$i,!1);c(this,ce,void 0);c(this,pt,void 0);c(this,Ui,{})}get template(){return Zc}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmation",this.theme)}get theme(){return r(this,Ui)}set theme(e){if(p(this,Ui,e),!r(this,ce)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmation",e));let{ContentFeature:i,ContentNoFeature:n}=r(this,ce);i.theme=e,n.theme=e}connectedCallback(){super.connectedCallback(),p(this,ce,te(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=r(this,ce);e.setAttribute("aria-hidden","true");let i=this.theme;if(i){let{ContentFeature:n,ContentNoFeature:s}=r(this,ce);n.theme=i,s.theme=i}}disconnectedCallback(){p(this,pt,null)}hide(){var i;if(p(this,$i,!1),!r(this,ce))return;let{MapboxAddressConfirmation:e}=r(this,ce);e.setAttribute("aria-hidden","true"),(i=r(this,pt))==null||i.deactivate(),ho.default.off()}show(e,i,n){return _(this,null,function*(){var v;if(!r(this,ce))return{type:"cancel"};let{MapboxAddressConfirmation:s,ContentFeature:o,ContentNoFeature:l}=r(this,ce),{accessToken:a,minimap:d=!1,theme:u,footer:h}=i;this.theme=u,n?(o.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),o.minimap=d,o.accessToken=a,o.footer=h,o.update(n,e)):(o.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),p(this,$i,!0),s.removeAttribute("aria-hidden"),ho.default.on();let m=n?o:l;return p(this,pt,il(s,{fallbackFocus:m,escapeDeactivates:()=>(this.hide(),!0)})),(v=r(this,pt))==null||v.activate(),new Promise(S=>{let y=m,x=A=>{y.removeEventListener("result",x);let C=A.detail;this.hide(),S(C==="change"?{type:"change",feature:n}:{type:C})};y.addEventListener("result",x)})})}tryShow(e,i){return _(this,null,function*(){if(!r(this,ce))return{type:"cancel"};let{accessToken:n,options:s={}}=i,o=new Us(f({accessToken:n},s)),l=_t(e),d=(yield o.validate(l,{sessionToken:H.autofillSessionToken})).features[0];if(d){let u=m=>m.properties.match_code.confidence===zs.exact,{skipConfirmModal:h=u}=i;if(h(d))return{type:"nochange"}}return yield this.show(e,i,d)})}};$i=new WeakMap,ce=new WeakMap,pt=new WeakMap,Ui=new WeakMap;window.MapboxAddressConfirmation=mt;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",mt);var po=new mt;function qn(i){return _(this,arguments,function*(t,e={}){var d;let{sections:n=[]}=e;po.parentNode||document.body.appendChild(po);let s={type:"nochange"},o=Hi(t),l=Fi(t),a=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let u of o){if(n.length){let x=l.find(A=>A.input===u);if(!x||!n.includes(x.section))continue}let h=Dn(t,u),m=a.find(x=>x.input===u),v=m==null?void 0:m.autofillHost;if(v){let x=v.retrieveFeature;if(x){let A=Ua(x);if(!qa(h,A))continue}}let S=e.accessToken||H.accessToken,y=yield po.tryShow(h,k(f({},e),{accessToken:S}));if(y.type==="change"){let x=ht(t,u);if(((d=x["address-line2"])==null?void 0:d.value)&&(y.feature.properties.address_line2=x["address-line2"].value),m)v.simulateRetrieve(y.feature);else{u.dataset.mapboxSuccess="true";let A=kt(y.feature);oo(t,u,A)}}y.type==="change"&&s.type!=="cancel"&&(s=y),y.type==="cancel"&&(s=y)}return s})}function zn(t,e,i,n,s){if(e){let o=$(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[l,a]=Array.from(o.querySelectorAll("span > span"));if(i&&n)l.textContent=i,a.textContent=n;else{let d=e.split(",");l.textContent=d[0].trim(),a.textContent=d.slice(1).join(",").trim()}if(!s){if(t["address-line2"]){let d=document.createElement("span");d.textContent=t["address-line2"],o.insertBefore(d,a),o.insertBefore(document.createElement("br"),a)}if(t["address-line3"]){let d=document.createElement("span");d.textContent=t["address-line3"],o.insertBefore(d,a),o.insertBefore(document.createElement("br"),a)}}return o}else{let o=t["street-address"]||t["address-line1"]||"",l=t["address-line2"],a=t["address-line3"],d=[t["address-level4"]||"",t["address-level3"]||"",t["address-level2"]||"",`${t["address-level1"]||""} ${t["postal-code"]||""}`,t.country||t["country-name"]||""].filter(Boolean).join(", "),h=[o,l,a,d].filter(Boolean).map(v=>`<span>${v}</span>`).join("<br />");return $(`
        <span>${h}</span>
      `)}}function Wn(t,e,i,n){return _(this,null,function*(){if(!i)return;let s=so(t),o=Object.values(ht(s,t));if(!e.detail.elements.some(v=>o.includes(v)))return;let l=Fi(s),d=l.find(v=>v.input===t).section,u=Array.from(new Set(l.filter(v=>e.detail.elements.includes(v.input)).map(v=>v.section)));if(!u.includes(d))return;let h=typeof i=="object"&&i.sections||[];if(h.length&&!h.some(v=>u.includes(v)))return;let m=typeof i=="object"?i:{};m=k(f({},m),{accessToken:n,sections:[d]}),yield qn(s,m)})}var Qc="https://contribute-api.mapbox.com/v1",Jc="https://contribute-api-staging.tilestream.net/v1",ed="edit-suggestion";function Vn(t,e){if(!H.feedbackEnabled)return;let i=window.location.hostname,s=`${oa(i)||aa(i)?Jc:Qc}/${ed}/address?access_token=${t}`,{originalCoordinate:o,originalAddress:l,changes:a,labels:d}=e,u={version:"1.18",action:"update",reason:"incorrect_data",location:{longitude:o[0],latitude:o[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:l,labels:d,notificationsDisabled:!0,submissionNotificationDisabled:!0};fetch(s,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${dt}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(u)})}var td=$(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),Le,qi,Bt,zi,Wi,Vi,Yi,Xi,mo=class extends V{constructor(){super(...arguments);c(this,Le,void 0);c(this,qi,{});this.minimap=!1;c(this,Bt,void 0);c(this,zi,void 0);this.update=(e,i)=>{var a;p(this,Bt,e),p(this,zi,i);let{ModalMap:n,Minimap:s,ModalAddressApprove:o}=r(this,Le);if(this.minimap){if(n.removeAttribute("aria-hidden"),s.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:d,theme:u,mapStyleMode:h,satelliteToggle:m}=this.minimap;d&&(s.defaultMapStyle=this.minimap.defaultMapStyle),u&&(s.theme=this.minimap.theme),h&&(s.mapStyleMode=h),m!==void 0&&(s.satelliteToggle=m)}s.feature=e}else n.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;o.innerHTML="",o.appendChild(zn(i,l,e.properties.feature_name,e.properties.description,((a=e.properties.place_type)==null?void 0:a[0])==="secondary_address"))};c(this,Wi,()=>{this.dispatchEvent(new E("result","cancel"))});this.approve=()=>{this.dispatchEvent(new E("result","change"))};this.reject=()=>{this.dispatchEvent(new E("result","nochange")),Vn(this.accessToken,{originalCoordinate:r(this,Bt).geometry.coordinates,originalAddress:r(this,Bt).properties.full_address,changes:{address:_t(r(this,zi))},labels:["address_confirm_form"]})};c(this,Vi,Te());c(this,Yi,Te());c(this,Xi,Te())}get template(){return td}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return r(this,qi)}set theme(e){if(p(this,qi,e),!r(this,Le)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmationFeature",e));let{IconQuestion:i,IconClose:n}=r(this,Le);i.innerHTML=z("question",e),n.innerHTML=z("close",e)}set footer(e){if(e===void 0)return;let i=this.querySelector(".ModalFooter");typeof e=="string"?(i.textContent=e,i.removeAttribute("aria-hidden")):e?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,Le,te(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:i,IconClose:n,ButtonApprove:s,ButtonReject:o,ModalAddressApprove:l}=r(this,Le);e.setAttribute("aria-labelledby",r(this,Yi)),e.setAttribute("aria-describedby",r(this,Xi)),n.setAttribute("aria-controls",r(this,Vi)),e.id=r(this,Vi),i.id=r(this,Yi),l.id=r(this,Xi);let a=Array.from(this.querySelectorAll('[role="button"]'));for(let u of a)u.addEventListener("keydown",Bn);n.addEventListener("click",r(this,Wi)),s.addEventListener("click",this.approve),o.addEventListener("click",this.reject);let d=this.theme;if(d){let{IconQuestion:u,IconClose:h}=r(this,Le);u.innerHTML=z("question",d),h.innerHTML=z("close",d)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:i}=r(this,Le);e.removeEventListener("click",r(this,Wi)),i.removeEventListener("click",this.approve)}};Le=new WeakMap,qi=new WeakMap,Bt=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Vi=new WeakMap,Yi=new WeakMap,Xi=new WeakMap;window.MapboxAddressConfirmationFeature=mo;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",mo);var id=$(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),ke,Ki,Zi,Qi,Ji,er,fo=class extends V{constructor(){super(...arguments);c(this,ke,void 0);c(this,Ki,{});this.update=e=>{let{ModalAddress:i}=r(this,ke);i.innerHTML="",i.appendChild(zn(e))};c(this,Zi,()=>{this.dispatchEvent(new E("result","cancel"))});this.reject=()=>{this.dispatchEvent(new E("result","nochange"))};c(this,Qi,Te());c(this,Ji,Te());c(this,er,Te())}get template(){return id}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return r(this,Ki)}set theme(e){if(p(this,Ki,e),!r(this,ke)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:i,IconClose:n}=r(this,ke);i.innerHTML=z("question",e),n.innerHTML=z("close",e)}connectedCallback(){super.connectedCallback(),p(this,ke,te(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:i,IconClose:n,ModalAddress:s,ButtonReject:o}=r(this,ke);e.setAttribute("aria-labelledby",r(this,Ji)),e.setAttribute("aria-describedby",r(this,er)),n.setAttribute("aria-controls",r(this,Qi)),e.id=r(this,Qi),i.id=r(this,Ji),s.id=r(this,er);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let d of l)d.addEventListener("keydown",Bn);n.addEventListener("click",r(this,Zi)),o.addEventListener("click",this.reject);let a=this.theme;if(a){let{IconQuestion:d,IconClose:u}=r(this,ke);d.innerHTML=z("question",a),u.innerHTML=z("close",a)}}disconnectedCallback(){let{IconClose:e,ButtonReject:i}=r(this,ke);e.removeEventListener("click",r(this,Zi)),i.removeEventListener("click",this.reject)}};ke=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,er=new WeakMap;window.MapboxAddressConfirmationNoFeature=fo;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",fo);var nl='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var Yn="browser-autofilled",go=[];function nd(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:go}})),go=[]}var sd=Vs(nd,5);function sl(t){t.hasAttribute(Yn)||(t.setAttribute(Yn,""),go.push(t),sd())}function ol(t){!t.hasAttribute(Yn)||t.removeAttribute(Yn)}function od(t){t.animationName==="onbrowserautofillstart"?sl(t.target):ol(t.target)}function ad(t){let e=t.target;e.nodeName.toLowerCase()!=="select"&&!t.simulated&&!(t instanceof E)&&(t.inputType==="insertReplacementText"||!("data"in t))?sl(e):ol(e)}function Xn(){H.detectBrowserAutofillEnabled||(H.detectBrowserAutofillEnabled=!0,Bo(nl),document.addEventListener("animationstart",od,!0),document.addEventListener("input",ad,!0))}var vo=(t,e)=>{if(typeof t=="string")if(t==="ip"){let i=e==null?void 0:e.get("ip-proximity");return i&&typeof i=="string"?i.split(",").map(parseFloat):[999,999]}else return t.split(",").map(Number);else return B.convert(t).toArray()},ld=t=>{let e={};return t.bbox&&(typeof t.bbox=="string"?e.bbox=t.bbox.split(",").map(Number):e.bbox=K.convert(t.bbox).toFlatArray()),t.proximity&&(e.proximity=vo(t.proximity)),t.country&&(e.country=t.country.split(",")),t.language&&(e.language=t.language.split(",")),t.types&&(typeof t.types=="string"?e.types=t.types.split(","):e.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?e.limit=parseInt(t.limit):e.limit=t.limit),e},cd=(t,e)=>{let i={};return t.bbox&&(typeof t.bbox=="string"?i.bbox=t.bbox.split(",").map(Number):i.bbox=K.convert(t.bbox).toFlatArray()),t.proximity&&(i.proximity=vo(t.proximity,e)),t.country&&(i.country=t.country.split(",")),t.language&&(i.language=t.language.split(",")),t.types&&(typeof t.types=="string"?i.types=t.types.split(","):i.types=Array.from(t.types)),t.limit&&(typeof t.limit=="string"?i.limit=parseInt(t.limit):i.limit=t.limit),typeof t.autocomplete=="boolean"&&(i.autocomplete=t.autocomplete),t.worldview&&(i.worldview=t.worldview),t.permanent&&(i.permanent=t.permanent),i},dd=(t,e)=>{let i={};return t.bbox&&(typeof t.bbox=="string"?i.bbox=t.bbox.split(",").map(Number):i.bbox=K.convert(t.bbox).toFlatArray()),t.proximity&&(i.proximity=vo(t.proximity,e)),t.country&&(i.country=t.country.split(",")),t.language&&(i.language=t.language.split(",")),t.limit&&(typeof t.limit=="string"?i.limit=parseInt(t.limit):i.limit=t.limit),t.streets!==void 0&&t.streets!==null&&(typeof t.streets=="string"?i.streets=t.streets==="true":i.streets=t.streets),i},al=(t,e,i)=>{switch(e){case 2:return ld(t);case 1:return cd(t,i);case 0:return dd(t,i)}},ud=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.feature_type==="poi"?[e.name,e.full_address].filter(Boolean).join(", "):e.full_address?e.full_address:e.name),suggestionTypes:t.map(e=>e.feature_type||""),suggestionSources:t.map(e=>e._source||"")}),hd=t=>({suggestionIds:t.map(e=>e.properties.mapbox_id||e.id||""),suggestionNames:t.map(e=>e.properties.full_address||""),suggestionTypes:t.map(e=>e.properties.feature_type||""),suggestionSources:t.map(e=>e._source||"")}),pd=t=>({suggestionIds:t.map(e=>e.mapbox_id||""),suggestionNames:t.map(e=>e.full_address||""),suggestionTypes:t.map(e=>{var i;return((i=e.place_type)==null?void 0:i[0])||""}),suggestionSources:t.map(e=>e._source||"")}),ll=(t,e)=>{switch(e){case 2:return ud(t);case 1:return hd(t);case 0:return pd(t)}},bo=(t,e)=>{switch(t){case 2:return"search/searchbox/v1/suggest";case 1:return`search/geocode/v6/${/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/.test(e)?"reverse":"forward"}`;case 0:return"autofill/v1/suggest"}};var Kn,Zn,Je,tr,Qn,et,Ht,Ft,Dt,Nt,Jn,ft,Ce,es,ts,is,jt,rs,ns,ss,os,as,ls,Gt,tt,$t,Fe=class{constructor(e){c(this,Kn,"https://api.mapbox.com");c(this,Zn,"events/v2");c(this,Je,void 0);c(this,tr,void 0);c(this,Qn,navigator.language||null);c(this,et,[]);c(this,Ht,"");c(this,Ft,0);c(this,Dt,!0);c(this,Nt,1e3);c(this,Jn,100);c(this,ft,void 0);c(this,Ce,void 0);this.start=(e,i,n,s)=>{p(this,Je,i.accessToken);let o=r(this,jt).call(this,"search.start",{queryString:e,options:i,map:n,responseHeaders:s});!o||r(this,$t).call(this,o)};this.input=(e,i,n,s,o)=>{if(p(this,Je,n.accessToken),r(this,Dt)&&(this.start(e,n,s,o),p(this,Dt,!1)),!i)return;let l=r(this,jt).call(this,"search.keystroke",{lastInput:i,queryString:e,options:n,map:s,responseHeaders:o});!l||r(this,$t).call(this,l)};this.select=(e,i,n,s,o,l)=>{p(this,Je,s.accessToken);let a=r(this,jt).call(this,"search.select",{queryString:e,selectedIndex:i,suggestions:n,options:s,map:o,responseHeaders:l});!a||a.resultIndex===r(this,Ft)&&a.queryString===r(this,Ht)||a.resultIndex===-1||(p(this,Ft,a.resultIndex),p(this,Ht,a.queryString),r(this,$t).call(this,a))};this.clear=()=>{p(this,Dt,!0),p(this,Ht,""),p(this,Ft,0),r(this,tt).call(this)};c(this,es,e=>{let i=`${r(this,Kn)}/${r(this,Zn)}?access_token=${r(this,Je)}`,n=r(this,ts).call(this,e);try{fetch(i,n)}catch(s){r(this,is).call(this,s)}});c(this,ts,e=>(Array.isArray(e)||(e=[e]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));c(this,is,e=>{console.log(e)});c(this,jt,(e,i)=>{if(e==="search.select"&&!(typeof i.selectedIndex=="number"||i.suggestions)||e==="search.keystroke"&&!i.lastInput)return null;let n=al(i.options,r(this,Ce),i.responseHeaders),s=r(this,rs).call(this,e,i,n);return e==="search.keystroke"?r(this,ns).call(this,s,i,n):e==="search.select"&&r(this,ss).call(this,s,i,n),r(this,ls).call(this,s)?s:null});c(this,rs,(e,i,n)=>{let s={event:e,version:r(this,as).call(this,e),created:+new Date,sessionIdentifier:i.options.sessionToken,userAgent:r(this,tr),keyboardLocale:r(this,Qn),queryString:i.queryString};if(n&&(s=f(f({},s),n)),e==="search.start")for(let o of["streets","permanent"])delete s[o];if(i.map){let o=i.map.getZoom()||void 0,l=i.map.getCenter();s=k(f({},s),{mapZoom:o,mapCenterLat:l.lat,mapCenterLng:l.lng})}return s});c(this,ns,(e,i,n)=>{switch(r(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=bo(r(this,Ce),i.queryString),e.lastAction=i.lastInput});c(this,ss,(e,i,n)=>{switch(r(this,Ce)){case 0:n.streets&&(e.streets=n.streets);break;case 1:n.permanent&&(e.permanent=n.permanent);break}e.path=bo(r(this,Ce),i.queryString);let{selectedIndex:s,suggestions:o}=i;if(o&&o.length>0){let l=ll(o,r(this,Ce));e.resultIndex=s,e.resultPlaceName=l.suggestionNames[s],e.resultId=l.suggestionIds[s],e.resultId.startsWith("dXJuOm1ie")&&(e.resultMapboxId=e.resultId),e.suggestionIds=l.suggestionIds,e.suggestionNames=l.suggestionNames,e.suggestionTypes=l.suggestionTypes,e.suggestionSources=l.suggestionSources}});c(this,os,()=>`mapbox.${ma.split("/")[1]}.${dt}.${navigator.userAgent}`);c(this,as,e=>["search.keystroke","search.select"].includes(e)?"2.2":"2.0");c(this,ls,e=>{if(!e||!e.event)return!1;let i=["event","created","sessionIdentifier","queryString"],n=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],o=e.event;return o==="search.start"?r(this,Gt).call(this,e,i):o==="search.keystroke"?r(this,Gt).call(this,e,n):o==="search.select"?r(this,Gt).call(this,e,s):!0});c(this,Gt,(e,i)=>i.every(n=>n==="queryString"?typeof e[n]=="string"&&e[n].length>0:e[n]!==void 0));c(this,tt,()=>{r(this,et).length>0&&r(this,Je)&&(r(this,es).call(this,r(this,et)),p(this,et,[])),r(this,ft)&&clearTimeout(r(this,ft)),r(this,Nt)&&p(this,ft,setTimeout(r(this,tt),r(this,Nt)))});c(this,$t,(e,i)=>{r(this,et).push(e),(r(this,et).length>=r(this,Jn)||i)&&r(this,tt).call(this)});this.remove=()=>{r(this,tt).call(this)};p(this,Ce,e),p(this,tr,r(this,os).call(this)),p(this,ft,setTimeout(r(this,tt),r(this,Nt)))}};Kn=new WeakMap,Zn=new WeakMap,Je=new WeakMap,tr=new WeakMap,Qn=new WeakMap,et=new WeakMap,Ht=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,Jn=new WeakMap,ft=new WeakMap,Ce=new WeakMap,es=new WeakMap,ts=new WeakMap,is=new WeakMap,jt=new WeakMap,rs=new WeakMap,ns=new WeakMap,ss=new WeakMap,os=new WeakMap,as=new WeakMap,ls=new WeakMap,Gt=new WeakMap,tt=new WeakMap,$t=new WeakMap;var De,J,ee,M,gt,Ne,Ut,ir,rr,qt,nr,sr,or,ar,lr,zt,cs,cr,ds,Wt=class extends V{constructor(){super(...arguments);c(this,De,new xi);c(this,J,new Ye(r(this,De)));c(this,ee,void 0);c(this,M,new ve);c(this,gt,new Fe(0));c(this,Ne,void 0);this.options={};this.confirmOnBrowserAutofill=!1;c(this,Ut,!1);c(this,ir,e=>{let i=(e==null?void 0:e.suggestions)?Nn(e.suggestions):null;r(this,M).handleSuggest(i),this.dispatchEvent(new E("suggest",e))});c(this,rr,e=>{r(this,M).handleError(),this.dispatchEvent(new E("suggesterror",e))});c(this,qt,e=>{var n;if(this.dispatchEvent(new E("retrieve",e)),this.retrieveFeature=(n=e.features)==null?void 0:n[0],!r(this,ee))return;let i=e;!i||!i.features||!i.features.length||Di(i.features[0],r(this,ee))});c(this,nr,()=>{var e;try{let i=(e=this.querySelector("input"))!=null?e:null;p(this,ee,i),r(this,M).input=i,i&&i.addEventListener("blur",r(this,cs))}catch(i){p(this,ee,null),r(this,M).input=null,console.error(i.message||i)}});c(this,sr,new MutationObserver(r(this,nr)));c(this,or,e=>{r(this,M).blur(),Wn(r(this,ee),e,this.confirmOnBrowserAutofill,this.accessToken)});this.retrieveFeature=null;this.interceptSearch=null;c(this,ar,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:i,inputText:n}=e.detail,s=this.browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(pe(r(this,ee),r(this,Ne),s),!n){r(this,ds).call(this);return}let o=this.interceptSearch&&this.interceptSearch(n),l=this.interceptSearch?o:n;if(this.interceptSearch&&!o||(l==null?void 0:l.length)<=2){r(this,M).handleSuggest(null);return}r(this,J).suggest(l,this.options),r(this,gt).input(l,i,k(f({},this.options),{sessionToken:r(this,J).sessionToken,accessToken:this.accessToken}),null,r(this,De).responseHeaders)});c(this,lr,e=>{let{suggestion:i,selectedIndex:n}=e.detail;i.accuracy!=="street"?(pe(r(this,ee),r(this,Ne),!0),r(this,J).retrieve(i,this.options),r(this,gt).select(this.input.value,n,r(this,M).suggestions,k(f({},this.options),{sessionToken:r(this,J).sessionToken,accessToken:this.accessToken}),null,r(this,De).responseHeaders)):jn(r(this,ee),r(this,Ne),i)});c(this,zt,()=>{pe(r(this,ee),r(this,Ne),!0),r(this,J).abort()});c(this,cs,e=>{r(this,M).contains(e.relatedTarget)||(r(this,zt).call(this),r(this,M).hideResults())});c(this,cr,()=>{var i;let e=this.browserAutofillEnabled===!0&&((i=r(this,ee).value)==null?void 0:i.length)<=2;pe(r(this,ee),r(this,Ne),e)});c(this,ds,()=>{r(this,M).handleSuggest(null),r(this,gt).clear()})}get accessToken(){return r(this,De).accessToken}set accessToken(e){r(this,De).accessToken=e}get input(){return r(this,ee)}get theme(){return r(this,M).theme}set theme(e){r(this,M).theme=e}get popoverOptions(){return r(this,M).popoverOptions}set popoverOptions(e){r(this,M).popoverOptions=e}get browserAutofillEnabled(){return r(this,Ut)}set browserAutofillEnabled(e){p(this,Ut,e)}connectedCallback(){var i;super.connectedCallback(),H.autofillSessionEnabled=!0,r(this,J).sessionToken=H.autofillSessionToken.id,r(this,M).autofillHost=this,r(this,M).searchService=0;let e=(i=this.querySelector("input"))!=null?i:null;r(this,sr).observe(this,{subtree:!0,childList:!0}),r(this,nr).call(this),r(this,M).addEventListener("input",r(this,ar)),r(this,M).addEventListener("select",r(this,lr)),r(this,M).addEventListener("blur",r(this,zt)),r(this,M).addEventListener("focus",r(this,cr)),r(this,J).addEventListener("suggest",r(this,ir)),r(this,J).addEventListener("suggesterror",r(this,rr)),r(this,J).addEventListener("retrieve",r(this,qt)),document.body.appendChild(r(this,M)),e&&(e.insertAdjacentElement("beforebegin",Ze(r(this,M).dataSeed)),Hn(e),p(this,Ne,e.autocomplete)),Xn(),window.addEventListener("browserautofill",r(this,or))}disconnectedCallback(){r(this,M).remove(),r(this,M).removeEventListener("input",r(this,ar)),r(this,M).removeEventListener("select",r(this,lr)),r(this,M).removeEventListener("blur",r(this,zt)),r(this,M).removeEventListener("focus",r(this,cr)),r(this,J).removeEventListener("suggest",r(this,ir)),r(this,J).removeEventListener("suggesterror",r(this,rr)),r(this,J).removeEventListener("retrieve",r(this,qt)),r(this,gt).remove(),r(this,sr).disconnect(),window.removeEventListener("browserautofill",r(this,or))}attributeChangedCallback(e,i,n){if(e==="access-token"){r(this,De).accessToken=n;return}if(e==="browser-autofill-enabled"){p(this,Ut,Boolean(n));return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n}focus(){r(this,M).focus()}simulateRetrieve(e){let i=this.input;i&&(i.dataset.mapboxSuccess="true"),r(this,M).hideResults();let n={type:"FeatureCollection",features:[e],url:""};r(this,qt).call(this,n)}};De=new WeakMap,J=new WeakMap,ee=new WeakMap,M=new WeakMap,gt=new WeakMap,Ne=new WeakMap,Ut=new WeakMap,ir=new WeakMap,rr=new WeakMap,qt=new WeakMap,nr=new WeakMap,sr=new WeakMap,or=new WeakMap,ar=new WeakMap,lr=new WeakMap,zt=new WeakMap,cs=new WeakMap,cr=new WeakMap,ds=new WeakMap,Wt.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"];window.MapboxAddressAutofill=Wt;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",Wt);var ul=pn(yo());var md={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},hs={placeholder:md};var fd=9,dl={flyTo:!0},gd=["allowReverse","flipCoordinates"],se,vt,oe,de,be,w,bt,dr,ps,ms,vd,yt,ur,hr,pr,it,mr,fr,Vt,gr,Yt,vr,je,br,yr,fs,Xt=class extends V{constructor(){super(...arguments);c(this,ms);c(this,se,void 0);c(this,vt,new $s({}));c(this,oe,new Ye(r(this,vt)));c(this,de,null);c(this,be,void 0);c(this,w,new ve);c(this,bt,new Fe(2));this.options={};c(this,dr,f({},dl));c(this,ps,()=>{let e=f({},this.componentOptions);for(let i in e)gd.indexOf(i)===-1&&delete e[i];return e});c(this,yt,void 0);c(this,ur,e=>_(this,null,function*(){r(this,je).call(this);let i=null;if(this.componentOptions.customSearch){let n=yield this.componentOptions.customSearch(this.value);n&&n.length&&(n.forEach(s=>{s._source="custom"}),i=n)}e&&e.suggestions&&(i?i=i.concat(e.suggestions):i=e.suggestions),r(this,w).handleSuggest(i||null),r(this,se).SearchBox.contains(document.activeElement)||this.focus(),this.dispatchEvent(new E("suggest",e))}));c(this,hr,e=>_(this,null,function*(){if(r(this,je).call(this),this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length?(i.forEach(n=>{n._source="custom"}),r(this,w).handleSuggest(i||null)):r(this,w).handleError()}else r(this,w).handleError();this.dispatchEvent(new E("suggesterror",e))}));c(this,pr,e=>{r(this,je).call(this),this.dispatchEvent(new E("retrieve",e));let i=e;if(!i||!i.features.length)return;let n=kt(i.features[0]);r(this,be).value=n.name;let s=i.features[0];!s||!r(this,de)||(this.componentOptions.flyTo&&r(this,fs).call(this,s),this.marker&&this.mapboxgl&&r(this,fr).call(this,s))});c(this,it,void 0);c(this,mr,()=>{r(this,it)&&(r(this,it).remove(),p(this,it,null))});c(this,fr,e=>{if(!r(this,de)||(r(this,mr).call(this),!e))return;let n=f(f({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);p(this,it,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&r(this,it).setLngLat(e.geometry.coordinates).addTo(r(this,de))});this.interceptSearch=null;c(this,Vt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:i,inputText:n}=e.detail;if(!n){r(this,br).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){r(this,w).hideResults();return}r(this,oe).suggest(o,f(f({},this.options),r(this,ps).call(this))),r(this,bt).input(o,i,k(f({},this.options),{sessionToken:r(this,oe).sessionToken,accessToken:this.accessToken}),r(this,de)),r(this,je).call(this,!0)});c(this,gr,e=>{let{suggestion:i,selectedIndex:n}=e.detail;r(this,oe).retrieve(i,this.options),r(this,bt).select(this.value,n,r(this,w).suggestions,k(f({},this.options),{sessionToken:r(this,oe).sessionToken,accessToken:this.accessToken}),r(this,de)),r(this,je).call(this,!0)});c(this,Yt,()=>{});c(this,vr,e=>{!r(this,se).SearchBox.contains(e.relatedTarget)&&!r(this,w).contains(e.relatedTarget)&&(r(this,Yt).call(this),r(this,w).hideResults(),this.dispatchEvent(new E("blur")))});c(this,je,(e=!1)=>{e?(r(this,se).ClearBtn.style.display="none",r(this,se).LoadingIcon.style.display="block"):(r(this,se).LoadingIcon.style.display="none",r(this,se).ClearBtn.style.display=this.value?"block":"none")});c(this,br,()=>{this.value="",r(this,je).call(this),r(this,fr).call(this,null),r(this,w).handleSuggest(null),r(this,w).focus(),r(this,bt).clear(),r(this,oe).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;c(this,yr,()=>{let e=r(this,de),i=f({},this.options);if(e.getZoom()<=fd){delete i.proximity,this.options=i;return}let n=e.getCenter();this.options=k(f({},i),{proximity:n})});c(this,fs,e=>{let i=r(this,de);if(!i)return;let n=e.properties.feature_type,s,o=e.properties.bbox;if(o)s=Tn(i,K.convert(o).toFlatArray());else{let l=e.geometry.coordinates,a=Mn(n);s={center:l,zoom:a,speed:Ei}}s=Object.assign(s,this.componentOptions.flyTo),i.flyTo(s)})}get accessToken(){return r(this,vt).accessToken}set accessToken(e){r(this,vt).accessToken=e}get value(){return r(this,be).value}set value(e){r(this,be).value=e||""}get input(){return r(this,be)}get template(){return na}get templateStyle(){return ne}get templateUserStyle(){return j(".SearchBox",r(this,w).theme)}get componentOptions(){return r(this,dr)}set componentOptions(e){p(this,dr,f(f({},dl),e))}get theme(){return r(this,w).theme}set theme(e){if(r(this,w).theme=e,!r(this,se)||!e)return;this.updateTemplateUserStyle(j(".SearchBox",e)),r(this,w).updatePopover();let{SearchIcon:i}=r(this,se);i.innerHTML=z("search",e)}get popoverOptions(){return r(this,w).popoverOptions}set popoverOptions(e){r(this,w).popoverOptions=e}get placeholder(){return r(this,yt)||ze(this,ms,vd).call(this)}set placeholder(e){p(this,yt,e),r(this,be)&&(r(this,be).placeholder=this.placeholder,r(this,be).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),p(this,se,te(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=f({},this.theme);let{Input:e,ClearBtn:i,SearchBox:n}=r(this,se);n.addEventListener("focusout",r(this,vr)),p(this,be,e),r(this,w).input=e,r(this,w).searchService=2,r(this,w).addEventListener("input",r(this,Vt)),r(this,w).addEventListener("select",r(this,gr)),r(this,w).addEventListener("blur",r(this,Yt)),r(this,oe).addEventListener("suggest",r(this,ur)),r(this,oe).addEventListener("suggesterror",r(this,hr)),r(this,oe).addEventListener("retrieve",r(this,pr)),i.addEventListener("click",r(this,br)),this.placeholder=r(this,yt),this.parentElement.appendChild(r(this,w)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ze(r(this,w).dataSeed)))}disconnectedCallback(){let{SearchBox:e}=r(this,se);e.removeEventListener("focusout",r(this,vr)),r(this,w).remove(),r(this,w).input=null,r(this,w).removeEventListener("input",r(this,Vt)),r(this,w).removeEventListener("select",r(this,gr)),r(this,w).removeEventListener("blur",r(this,Yt)),r(this,oe).removeEventListener("suggest",r(this,ur)),r(this,oe).removeEventListener("suggesterror",r(this,hr)),r(this,oe).removeEventListener("retrieve",r(this,pr)),r(this,bt).remove()}attributeChangedCallback(e,i,n){if(e==="access-token"){r(this,vt).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}if(e==="allow-reverse"){this.componentOptions.allowReverse=["true",""].includes(n);return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=["true",""].includes(n);return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=r(this,yt))}focus(){r(this,w).focus()}search(e){this.value=e;let i={lastInput:e,inputText:e};r(this,Vt).call(this,new E("input",i))}bindMap(e){r(this,de)&&r(this,de).off("moveend",r(this,yr)),e&&e.on("moveend",r(this,yr)),p(this,de,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let i=document.createElement("div");return i.className="mapboxgl-ctrl",i.style.width="300px",i.appendChild(this),i}onRemove(){this.remove(),this.unbindMap(),r(this,mr).call(this)}getDefaultPosition(){return"top-right"}};se=new WeakMap,vt=new WeakMap,oe=new WeakMap,de=new WeakMap,be=new WeakMap,w=new WeakMap,bt=new WeakMap,dr=new WeakMap,ps=new WeakMap,ms=new WeakSet,vd=function(){if(this.options.language){let e=this.options.language.split(",")[0],i=ul.default.language(e),n=hs.placeholder[i];if(n)return n}return"Search"},yt=new WeakMap,ur=new WeakMap,hr=new WeakMap,pr=new WeakMap,it=new WeakMap,mr=new WeakMap,fr=new WeakMap,Vt=new WeakMap,gr=new WeakMap,Yt=new WeakMap,vr=new WeakMap,je=new WeakMap,br=new WeakMap,yr=new WeakMap,fs=new WeakMap,Xt.observedAttributes=["access-token","theme","popover-options","placeholder","allow-reverse","flip-coordinates","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=Xt;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Xt);var pl=pn(yo());var bd=9,hl={flyTo:!0},yd=["flipCoordinates"],ae,Ge,le,ue,ye,L,xt,xr,gs,vs,xd,Et,Er,Sr,Ar,rt,Tr,Mr,Kt,wr,Zt,Lr,$e,kr,Cr,bs,Qt=class extends V{constructor(){super(...arguments);c(this,vs);c(this,ae,void 0);c(this,Ge,new Qo({}));c(this,le,new Ye(r(this,Ge)));c(this,ue,null);c(this,ye,void 0);c(this,L,new ve);c(this,xt,new Fe(1));this.options={};c(this,xr,f({},hl));c(this,gs,()=>{let e=f({},this.componentOptions);for(let i in e)yd.indexOf(i)===-1&&delete e[i];return e});c(this,Et,void 0);c(this,Er,e=>_(this,null,function*(){r(this,$e).call(this);let i=null;if(this.componentOptions.customSearch){let n=yield this.componentOptions.customSearch(this.value);n&&n.length&&(n.forEach(s=>{s._source="custom"}),i=n)}e&&e.features&&(i?i=i.concat(e.features):i=e.features),r(this,L).handleSuggest(i||null),r(this,ae).Geocoder.contains(document.activeElement)||this.focus(),this.dispatchEvent(new E("suggest",e))}));c(this,Sr,e=>_(this,null,function*(){if(r(this,$e).call(this),this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length?(i.forEach(n=>{n._source="custom"}),r(this,L).handleSuggest(i||null)):r(this,L).handleError()}else r(this,L).handleError();this.dispatchEvent(new E("suggesterror",e))}));c(this,Ar,e=>{r(this,$e).call(this),this.dispatchEvent(new E("retrieve",e));let i=e;!i||(r(this,ye).value=i.properties.full_address,!r(this,ue))||(this.componentOptions.flyTo&&r(this,bs).call(this,i),this.marker&&this.mapboxgl&&r(this,Mr).call(this,i))});c(this,rt,void 0);c(this,Tr,()=>{r(this,rt)&&(r(this,rt).remove(),p(this,rt,null))});c(this,Mr,e=>{if(!r(this,ue)||(r(this,Tr).call(this),!e))return;let n=f(f({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);p(this,rt,new this.mapboxgl.Marker(n)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&r(this,rt).setLngLat(e.geometry.coordinates).addTo(r(this,ue))});this.interceptSearch=null;c(this,Kt,e=>{this.dispatchEvent(new E("input",e.detail.inputText));let{lastInput:i,inputText:n}=e.detail;if(!n){r(this,kr).call(this);return}let s=this.interceptSearch&&this.interceptSearch(n),o=this.interceptSearch?s:n;if(this.interceptSearch&&!s){r(this,L).hideResults();return}r(this,le).suggest(o,f(f({},this.options),r(this,gs).call(this))),r(this,xt).input(o,i,k(f({},this.options),{sessionToken:r(this,le).sessionToken,accessToken:this.accessToken}),r(this,ue),r(this,Ge).responseHeaders),r(this,$e).call(this,!0)});c(this,wr,e=>{let{suggestion:i,selectedIndex:n}=e.detail;r(this,le).retrieve(i,this.options),r(this,xt).select(this.value,n,r(this,L).suggestions,k(f({},this.options),{sessionToken:r(this,le).sessionToken,accessToken:this.accessToken}),r(this,ue),r(this,Ge).responseHeaders),r(this,$e).call(this,!0)});c(this,Zt,()=>{});c(this,Lr,e=>{!r(this,ae).Geocoder.contains(e.relatedTarget)&&!r(this,L).contains(e.relatedTarget)&&(r(this,Zt).call(this),r(this,L).hideResults(),this.dispatchEvent(new E("blur")))});c(this,$e,(e=!1)=>{e?(r(this,ae).ClearBtn.style.display="none",r(this,ae).LoadingIcon.style.display="block"):(r(this,ae).LoadingIcon.style.display="none",r(this,ae).ClearBtn.style.display=this.value?"block":"none")});c(this,kr,()=>{this.value="",r(this,$e).call(this),r(this,Mr).call(this,null),r(this,L).handleSuggest(null),r(this,L).focus(),r(this,xt).clear(),r(this,le).incrementSession(),this.dispatchEvent(new E("clear"))});this.marker=!0;c(this,Cr,()=>{let e=r(this,ue),i=f({},this.options);if(e.getZoom()<=bd){delete i.proximity,this.options=i;return}let n=e.getCenter();this.options=k(f({},i),{proximity:n})});c(this,bs,e=>{let i=r(this,ue);if(!i)return;let n=e.properties.feature_type,s,o=e.properties.bbox;if(o)s=Tn(i,K.convert(o).toFlatArray());else{let l=e.geometry.coordinates,a=Mn(n);s={center:l,zoom:a,speed:Ei}}s=Object.assign(s,this.componentOptions.flyTo),i.flyTo(s)})}get accessToken(){return r(this,Ge).accessToken}set accessToken(e){r(this,Ge).accessToken=e}get value(){return r(this,ye).value}set value(e){r(this,ye).value=e||""}get input(){return r(this,ye)}get template(){return sa}get templateStyle(){return ne}get templateUserStyle(){return j(".Geocoder",r(this,L).theme)}get componentOptions(){return r(this,xr)}set componentOptions(e){p(this,xr,f(f({},hl),e))}get theme(){return r(this,L).theme}set theme(e){if(r(this,L).theme=e,!r(this,ae)||!e)return;this.updateTemplateUserStyle(j(".Geocoder",e)),r(this,L).updatePopover();let{SearchIcon:i}=r(this,ae);i.innerHTML=z("search",e)}get popoverOptions(){return r(this,L).popoverOptions}set popoverOptions(e){r(this,L).popoverOptions=e}get placeholder(){return r(this,Et)||ze(this,vs,xd).call(this)}set placeholder(e){p(this,Et,e),r(this,ye)&&(r(this,ye).placeholder=this.placeholder,r(this,ye).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),p(this,ae,te(this,{Geocoder:".Geocoder",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=f({},this.theme);let{Input:e,ClearBtn:i,Geocoder:n}=r(this,ae);n.addEventListener("focusout",r(this,Lr)),p(this,ye,e),r(this,L).input=e,r(this,L).searchService=1,r(this,L).addEventListener("input",r(this,Kt)),r(this,L).addEventListener("select",r(this,wr)),r(this,L).addEventListener("blur",r(this,Zt)),r(this,le).addEventListener("suggest",r(this,Er)),r(this,le).addEventListener("suggesterror",r(this,Sr)),r(this,le).addEventListener("retrieve",r(this,Ar)),i.addEventListener("click",r(this,kr)),this.placeholder=r(this,Et),this.parentElement.appendChild(r(this,L)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Ze(r(this,L).dataSeed)))}disconnectedCallback(){let{Geocoder:e}=r(this,ae);e.removeEventListener("focusout",r(this,Lr)),r(this,L).remove(),r(this,L).input=null,r(this,L).removeEventListener("input",r(this,Kt)),r(this,L).removeEventListener("select",r(this,wr)),r(this,L).removeEventListener("blur",r(this,Zt)),r(this,le).removeEventListener("suggest",r(this,Er)),r(this,le).removeEventListener("suggesterror",r(this,Sr)),r(this,le).removeEventListener("retrieve",r(this,Ar)),r(this,xt).remove()}attributeChangedCallback(e,i,n){if(e==="access-token"){r(this,Ge).accessToken=n;return}if(e==="theme"){this.theme=Pe(n);return}if(e==="popover-options"){this.popoverOptions=Pe(n);return}if(e==="placeholder"){this.placeholder=n;return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=["true",""].includes(n);return}let s=e.split("-").join("_");n||delete this.options[s],this.options[s]=n,s==="language"&&(this.placeholder=r(this,Et))}focus(){r(this,L).focus()}search(e){this.value=e;let i={lastInput:e,inputText:e};r(this,Kt).call(this,new E("input",i))}bindMap(e){r(this,ue)&&r(this,ue).off("moveend",r(this,Cr)),e&&e.on("moveend",r(this,Cr)),p(this,ue,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let i=document.createElement("div");return i.className="mapboxgl-ctrl",i.style.width="300px",i.appendChild(this),i}onRemove(){this.remove(),this.unbindMap(),r(this,Tr).call(this)}getDefaultPosition(){return"top-right"}};ae=new WeakMap,Ge=new WeakMap,le=new WeakMap,ue=new WeakMap,ye=new WeakMap,L=new WeakMap,xt=new WeakMap,xr=new WeakMap,gs=new WeakMap,vs=new WeakSet,xd=function(){if(this.options.language){let e=this.options.language.split(",")[0],i=pl.default.language(e),n=hs.placeholder[i];if(n)return n}return"Search"},Et=new WeakMap,Er=new WeakMap,Sr=new WeakMap,Ar=new WeakMap,rt=new WeakMap,Tr=new WeakMap,Mr=new WeakMap,Kt=new WeakMap,wr=new WeakMap,Zt=new WeakMap,Lr=new WeakMap,$e=new WeakMap,kr=new WeakMap,Cr=new WeakMap,bs=new WeakMap,Qt.observedAttributes=["access-token","theme","popover-options","placeholder","flip-coordinates","autocomplete","language","country","bbox","limit","proximity","types","worldview","permanent"];window.MapboxGeocoder=Qt;window.customElements.get("mapbox-geocoder")||customElements.define("mapbox-geocoder",Qt);var vl=pn(ml());var fl=new vl.default({size:512,antimeridian:!0}),Tt=1280;function gl(t,e){let{width:i,height:n}=mn(t,!0);switch(e){case"center":return[0,0];case"top":return[0,n/2];case"bottom":return[0,-1*n/2];case"left":return[i/2,0];case"right":return[-1*i/2,0];case"top-left":return[i/2,n/2];case"top-right":return[-1*i/2,n/2];case"bottom-left":return[i/2,-1*n/2];case"bottom-right":return[-1*i/2,-1*n/2]}}var Ir,ys,St,Or,Rr,xs,Pr,_r,Es,Br,Hr,At,Ss,Fr,So=class{constructor(e,i,n,s,o,l){c(this,Ir,void 0);c(this,ys,()=>{[this.anchorOffsetX,this.anchorOffsetY]=gl(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});c(this,St,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});c(this,Or,!1);c(this,Rr,void 0);c(this,xs,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),r(this,At).call(this,e),window.addEventListener("pointermove",r(this,_r)),window.addEventListener("pointerup",r(this,Pr)))});c(this,Pr,()=>{window.removeEventListener("pointermove",r(this,_r)),window.removeEventListener("pointerup",r(this,Pr))});c(this,_r,e=>{e.preventDefault(),e.stopPropagation();let i=this.curPointerXPos-e.pageX,n=this.curPointerYPos-e.pageY;this.markerDeltaX+=i,this.markerDeltaY-=n,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let s=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],o=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a},r(this,At).call(this,e)});c(this,Es,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),r(this,At).call(this,e),window.addEventListener("pointermove",r(this,Hr)),window.addEventListener("pointerup",r(this,Br)))});c(this,Br,()=>{window.removeEventListener("pointermove",r(this,Hr)),window.removeEventListener("pointerup",r(this,Br))});c(this,Hr,e=>{e.preventDefault();let i=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));i=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,i),0);let n=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));n=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,n),0),this.imgContainerElement.scrollTop=i,this.imgContainerElement.scrollLeft=n;let s=Math.round(n-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),o=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-i);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+s,this.imgCenterPx[1]-o],!this.keepMarkerCentered){let l=this.markerDeltaX+s,a=this.markerDeltaY+o;this.markerTransform={globalX:l,globalY:a}}r(this,Fr).call(this,n,i),r(this,At).call(this,e)});c(this,At,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});c(this,Ss,()=>{let{anchorX:e,anchorY:i,globalX:n,globalY:s,correctionX:o,correctionY:l}=r(this,St),a=e-n+o,d=i+s+l;this.markerElement.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${d}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,i=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=i,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,i=this.imgCenterOffset.y,n=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,s=this.imgElement.height/2-i-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=n,this.imgContainerElement.scrollTop=s,r(this,Fr).call(this,n,s)};c(this,Fr,(e,i)=>{let n=this.imgCenterOffset.x,s=this.imgCenterOffset.y,{correctionX:o,correctionY:l}=this.markerTransform,a={};if(e/2<n*-1){let d=n*-1-e/2;a.correctionX=d*2}else e<0?a.correctionX=e:o!==0&&(a.correctionX=0);if(i/2<s*-1){let d=s*-1-i/2;a.correctionY=d*2}else i<0?a.correctionY=i:l!==0&&(a.correctionY=0);this.markerTransform=a});this.markerElement=n,this.imgContainerElement=e,this.imgElement=i,this.keepMarkerCentered=s,this.zoom=o,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",r(this,Es)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",r(this,xs)),new ResizeObserver(r(this,ys)).observe(this.markerElement)}get anchor(){return r(this,Ir)}set anchor(e){p(this,Ir,e),[this.anchorOffsetX,this.anchorOffsetY]=gl(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return r(this,St)}set markerTransform(e){p(this,St,f(f({},r(this,St)),e)),r(this,Ss).call(this)}get isActive(){return r(this,Or)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",p(this,Or,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(at(e,this.imgCenterPx))return r(this,Rr);{let i=fl.ll(e,this.zoom);return[Xs(i[0],6),Xs(i[1],6)]}}set coordinate(e){p(this,Rr,e),this.imgCenterPx=this.imgCenterAdjustedPx=fl.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};Ir=new WeakMap,ys=new WeakMap,St=new WeakMap,Or=new WeakMap,Rr=new WeakMap,xs=new WeakMap,Pr=new WeakMap,_r=new WeakMap,Es=new WeakMap,Br=new WeakMap,Hr=new WeakMap,At=new WeakMap,Ss=new WeakMap,Fr=new WeakMap;var bl='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var yl=16,Ad=$(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${bl}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),Td=$(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),Md=$(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),Ao="Adjust pin",To="Save",Mo="Cancel",wd=$(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${Ao}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${To}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${Mo}</div>
  </div>
</template>
`),Jt,Mt,ei,Ie,nt,xe,Ee,O,U,Dr,Nr,ti,wt,jr,Gr,$r,Ur,qr,zr,ii,Wr,Vr,Yr,Xr,As,Ts,Kr,ri,ni,Zr,Qr,Ms,Jr,ws,si=class extends V{constructor(){super(...arguments);c(this,Jt,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";c(this,Mt,!1);c(this,ei,!1);c(this,Ie,void 0);c(this,nt,"");c(this,xe,void 0);c(this,Ee,void 0);c(this,O,void 0);c(this,U,void 0);c(this,Dr,void 0);c(this,Nr,{});c(this,ti,!1);c(this,wt,"default");c(this,jr,void 0);c(this,Gr,void 0);c(this,$r,void 0);c(this,Ur,["mapbox","streets-v11"]);c(this,qr,void 0);c(this,zr,void 0);c(this,ii,()=>{let{ImageContainer:e,ButtonAdjust:i,ButtonSave:n,ButtonCancel:s}=r(this,O);r(this,Mt)?(e.classList.add(`${this.dataset.seed}--draggable`),r(this,U).isActive=!0,i.setAttribute("aria-hidden","true"),n.removeAttribute("aria-hidden"),s.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),r(this,U).isActive=!1,i.removeAttribute("aria-hidden"),n.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true"))});c(this,Wr,()=>{p(this,Mt,!0),r(this,ii).call(this)});c(this,Vr,()=>{if(this.feature.properties.full_address&&!at(this.feature.geometry.coordinates,r(this,U).coordinate)){let[e,i]=r(this,U).coordinate;Vn(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:i}},labels:["address_minimap"]})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(r(this,U).coordinate),p(this,Mt,!1),r(this,ii).call(this)});c(this,Yr,()=>{r(this,U).reCenter(),p(this,Mt,!1),r(this,ii).call(this)});c(this,Xr,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});c(this,As,()=>{r(this,ei)||r(this,U).reCenter(),p(this,ei,!0),r(this,U)&&r(this,U).handleMinimapResize()});c(this,Ts,()=>{p(this,ei,!1)});c(this,Kr,e=>{if(r(this,xe)===0||r(this,Ee)===0)return"";let[i,n]=this.defaultMapStyle,s=wn(i,n),o=this.mapStyleMode==="default"?s:Jo,l=ea+H.autofillSessionToken.toString(),a=o+B.convert(e).toArray().join(",")+","+yl+",0/"+Math.min(r(this,xe)*2,Tt)+"x"+Math.min(r(this,Ee)*2,Tt)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return H.autofillSessionEnabled&&(a+=`&sku=${l}`),a});c(this,ri,()=>{if(r(this,Ie)){let e=r(this,Ie).geometry.coordinates;p(this,nt,r(this,Kr).call(this,e));let{Image:i}=r(this,O);i.src=r(this,nt)}});c(this,ni,e=>`url("${fa(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);c(this,Zr,()=>{let{MapboxAddressMinimap:e,ImageContainer:i,Image:n}=r(this,O),{width:s,height:o}=mn(this.container),[l,a]=[r(this,xe),r(this,Ee)];p(this,xe,Math.min(s,Tt)),p(this,Ee,Math.min(o,Tt)),e.style.setProperty("width",`${r(this,xe)}px`),e.style.setProperty("height",`${r(this,Ee)}px`),i.style.setProperty("height",`${r(this,Ee)}px`),i.style.setProperty("width",`${r(this,xe)}px`);let[d,u]=[n.width,n.height];r(this,xe)>l&&r(this,xe)>d/2&&d<Tt||r(this,Ee)>a&&r(this,Ee)>u/2&&u<Tt?r(this,ri).call(this):r(this,U)&&r(this,U).handleMinimapResize()});c(this,Qr,()=>{if(this.querySelector(".MinimapFooter"))return;let i=this.prepareTemplate(Md),n=this.querySelector(".MapboxAddressMinimap");if(!n||(n.appendChild(i),this.querySelector(".MinimapEditButtons")))return;let o=this.prepareTemplate(wd),l=this.querySelector(".MinimapInnerFrame");if(!l)return;l.appendChild(o),p(this,O,k(f({},r(this,O)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:a,ButtonSave:d,ButtonCancel:u}=r(this,O);a.addEventListener("click",r(this,Wr)),d.addEventListener("click",r(this,Vr)),u.addEventListener("click",r(this,Yr))});c(this,Ms,()=>{if(!r(this,O))return;let{EditButtons:e,ButtonAdjust:i,ButtonSave:n,ButtonCancel:s}=r(this,O),o=this.querySelector(".MinimapFooter");o==null||o.remove(),e==null||e.remove(),i&&(i.remove(),i.removeEventListener("click",r(this,Wr))),n&&(n.remove(),n.removeEventListener("click",r(this,Vr))),s&&(s.remove(),s.removeEventListener("click",r(this,Yr))),delete r(this,O).EditButtons,delete r(this,O).ButtonAdjust,delete r(this,O).ButtonSave,delete r(this,O).ButtonCancel});c(this,Jr,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let i=this.prepareTemplate(Td),n=this.querySelector(".MinimapInnerFrame");!n||(n.appendChild(i),r(this,O).MapStyleToggle=i,i.addEventListener("click",r(this,Xr)),i.style.backgroundImage=r(this,ni).call(this,this.mapStyleMode==="default"?"satellite":"default"),i.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});c(this,ws,()=>{if(!r(this,O))return;let{MapStyleToggle:e}=r(this,O);!e||(e.remove(),e.removeEventListener("click",r(this,Xr)),delete r(this,O).MapStyleToggle)})}get canAdjustMarker(){return r(this,Jt)}set canAdjustMarker(e){p(this,Jt,e),this.isConnected&&(e?r(this,Qr).call(this):r(this,Ms).call(this))}get accessToken(){return r(this,Dr)||H.accessToken}set accessToken(e){p(this,Dr,e)}get feature(){return r(this,Ie)}set feature(e){p(this,Ie,e),e?this.show():this.hide()}get template(){return Ad}get templateStyle(){return ne}get templateUserStyle(){return j(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return r(this,ti)}set satelliteToggle(e){p(this,ti,e),this.isConnected&&(e?r(this,Jr).call(this):r(this,ws).call(this))}get theme(){return r(this,Nr)}set theme(e){if(p(this,Nr,e),!r(this,O)||!e)return;this.updateTemplateUserStyle(j(".MapboxAddressMinimap",e));let{Marker:i,MapStyleToggle:n}=r(this,O);i.innerHTML=z("marker",e),n&&(n.style.backgroundImage=r(this,ni).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return r(this,jr)||Ao}set adjustBtnText(e){p(this,jr,e);let i=this.querySelector(".MinimapButtonAdjust");i.textContent=e||Ao}get saveBtnText(){return r(this,Gr)||To}set saveBtnText(e){p(this,Gr,e);let i=this.querySelector(".MinimapButtonSave");i.textContent=e||To}get cancelBtnText(){return r(this,$r)||Mo}set cancelBtnText(e){p(this,$r,e);let i=this.querySelector(".MinimapButtonCancel");i.textContent=e||Mo}get mapStyleMode(){return r(this,wt)}set mapStyleMode(e){let i=r(this,wt);if(i===e||(p(this,wt,e),!r(this,O)))return;let{MapStyleToggle:n}=r(this,O);!n||(n.style.backgroundImage=r(this,ni).call(this,i),n.setAttribute("title",`Switch to ${i==="satellite"?"Satellite":"Default"}`),r(this,ri).call(this))}get defaultMapStyle(){return r(this,Ur)}set defaultMapStyle(e){p(this,Ur,e),r(this,ri).call(this)}get footer(){return r(this,qr)}set footer(e){p(this,qr,e);let i=this.querySelector(".MinimapFooter");i&&(typeof e=="string"?(i.textContent=e,i.removeAttribute("aria-hidden")):e?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true"))}get container(){return r(this,zr)}set container(e){e&&(e.style.position="relative",p(this,zr,e))}show(){if(!r(this,Ie))return;let e=r(this,Ie).geometry.coordinates;r(this,U).coordinate=e,p(this,nt,r(this,Kr).call(this,e));let{MapboxAddressMinimap:i,Image:n}=r(this,O);n.src=r(this,nt),i.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=r(this,O);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),p(this,O,te(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=r(this,wt),this.theme=f({},this.theme),r(this,Jt)&&!r(this,O).EditButtons&&r(this,Qr).call(this),r(this,ti)&&!r(this,O).MapStyleToggle&&r(this,Jr).call(this),this.container=this.parentElement,new ResizeObserver(r(this,Zr)).observe(this.container),r(this,Zr).call(this);let{MapboxAddressMinimap:i,ImageContainer:n,Image:s,Marker:o}=r(this,O);p(this,U,new So(n,s,o,this.keepMarkerCentered,yl,this.markerAnchor)),r(this,U).reCenter(),s.onload=r(this,As),s.onerror=r(this,Ts),s.src=r(this,nt),r(this,Ie)?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true")}attributeChangedCallback(e,i,n){if(e==="access-token")this.accessToken=n;else if(e==="can-adjust-marker")this.canAdjustMarker=["true",""].includes(n);else if(e==="keep-marker-centered")this.keepMarkerCentered=["true",""].includes(n);else if(e==="marker-anchor"){let s=n;this.markerAnchor=s,r(this,U)&&(r(this,U).anchor=s)}else e==="satellite-toggle"&&(this.satelliteToggle=["true",""].includes(n))}};Jt=new WeakMap,Mt=new WeakMap,ei=new WeakMap,Ie=new WeakMap,nt=new WeakMap,xe=new WeakMap,Ee=new WeakMap,O=new WeakMap,U=new WeakMap,Dr=new WeakMap,Nr=new WeakMap,ti=new WeakMap,wt=new WeakMap,jr=new WeakMap,Gr=new WeakMap,$r=new WeakMap,Ur=new WeakMap,qr=new WeakMap,zr=new WeakMap,ii=new WeakMap,Wr=new WeakMap,Vr=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,As=new WeakMap,Ts=new WeakMap,Kr=new WeakMap,ri=new WeakMap,ni=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,Ms=new WeakMap,Jr=new WeakMap,ws=new WeakMap,si.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=si;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",si);var G,Se,Z,oi,ai,Ue,en,tn,li,rn,nn,Ls,sn,on,ci,xl=class{constructor(e,i,n){c(this,G,void 0);c(this,Se,void 0);c(this,Z,void 0);c(this,oi,void 0);this.options={};this.retrieveFeature=null;this.listbox=new ve;c(this,ai,new Fe(0));c(this,Ue,void 0);c(this,en,e=>{let{lastInput:i,inputText:n}=e.detail,s=r(this,Se).browserAutofillEnabled===!0&&(n==null?void 0:n.length)<=2;if(pe(r(this,G),r(this,Ue),s),!n){r(this,Ls).call(this);return}if((n==null?void 0:n.length)<=2){this.listbox.handleSuggest(null);return}r(this,Z).suggest(n,this.options),r(this,ai).input(n,i,k(f({},this.options),{sessionToken:r(this,Z).sessionToken,accessToken:r(this,Se).accessToken}),null,r(this,oi).responseHeaders)});c(this,tn,e=>{let{suggestion:i,selectedIndex:n}=e.detail;i.accuracy!=="street"?(pe(r(this,G),r(this,Ue),!0),r(this,Z).retrieve(i,this.options),r(this,ai).select(this.input.value,n,this.listbox.suggestions,k(f({},this.options),{sessionToken:r(this,Z).sessionToken,accessToken:r(this,Se).accessToken}),null,r(this,oi).responseHeaders)):jn(r(this,G),r(this,Ue),i)});c(this,li,()=>{pe(r(this,G),r(this,Ue),!0),r(this,Z).abort()});c(this,rn,e=>{this.listbox.contains(e.relatedTarget)||(r(this,li).call(this),this.listbox.hideResults())});c(this,nn,()=>{var i;let e=r(this,Se).browserAutofillEnabled===!0&&((i=r(this,G).value)==null?void 0:i.length)<=2;pe(r(this,G),r(this,Ue),e)});c(this,Ls,()=>{this.listbox.handleSuggest(null),r(this,ai).clear()});c(this,sn,e=>{let i=(e==null?void 0:e.suggestions)?Nn(e.suggestions):null;this.listbox.handleSuggest(i);let n=new E("suggest",e);Object.defineProperty(n,"target",{value:r(this,G)}),r(this,Se).fire("suggest",n)});c(this,on,e=>{this.listbox.handleError();let i=new E("suggesterror",e);Object.defineProperty(i,"target",{value:r(this,G)}),r(this,Se).fire("suggesterror",i)});c(this,ci,e=>{var s;let i=new E("retrieve",e);if(Object.defineProperty(i,"target",{value:r(this,G)}),r(this,Se).fire("retrieve",i),this.retrieveFeature=(s=e.features)==null?void 0:s[0],!r(this,G))return;let n=e;!n||!n.features||!n.features.length||Di(n.features[0],r(this,G))});p(this,G,i),p(this,Se,e),p(this,Z,new Ye(n)),r(this,Z).sessionToken=H.autofillSessionToken.id,p(this,oi,n),this.listbox.input=r(this,G),this.listbox.autofillHost=this,this.listbox.searchService=0,r(this,G).addEventListener("blur",r(this,rn)),this.listbox.addEventListener("input",r(this,en)),this.listbox.addEventListener("select",r(this,tn)),this.listbox.addEventListener("blur",r(this,li)),this.listbox.addEventListener("focus",r(this,nn)),r(this,Z).addEventListener("suggest",r(this,sn)),r(this,Z).addEventListener("suggesterror",r(this,on)),r(this,Z).addEventListener("retrieve",r(this,ci)),document.body.appendChild(this.listbox),i&&(i.insertAdjacentElement("beforebegin",Ze(this.listbox.dataSeed)),Hn(i),p(this,Ue,i.autocomplete))}get input(){return r(this,G)}remove(){this.listbox.remove(),r(this,G).removeEventListener("blur",r(this,rn)),this.listbox.removeEventListener("input",r(this,en)),this.listbox.removeEventListener("select",r(this,tn)),this.listbox.removeEventListener("blur",r(this,li)),this.listbox.removeEventListener("focus",r(this,nn)),r(this,Z).removeEventListener("suggest",r(this,sn)),r(this,Z).removeEventListener("suggesterror",r(this,on)),r(this,Z).removeEventListener("retrieve",r(this,ci))}simulateRetrieve(e){let i=r(this,G);i&&(i.dataset.mapboxSuccess="true"),this.listbox.hideResults();let n={type:"FeatureCollection",features:[e],url:""};r(this,ci).call(this,n)}};G=new WeakMap,Se=new WeakMap,Z=new WeakMap,oi=new WeakMap,ai=new WeakMap,Ue=new WeakMap,en=new WeakMap,tn=new WeakMap,li=new WeakMap,rn=new WeakMap,nn=new WeakMap,Ls=new WeakMap,sn=new WeakMap,on=new WeakMap,ci=new WeakMap;var di,ui,hi,an,ln,cn,dn,un,El=class extends Ws{constructor({accessToken:e,options:i,theme:n,popoverOptions:s,confirmOnBrowserAutofill:o,browserAutofillEnabled:l}){super();this.instances=[];c(this,di,void 0);c(this,ui,new xi);c(this,hi,void 0);c(this,an,void 0);c(this,ln,void 0);this.confirmOnBrowserAutofill=!1;this.browserAutofillEnabled=!1;c(this,cn,()=>{at(Hi(),r(this,di))||this.update()});c(this,dn,new MutationObserver(r(this,cn)));c(this,un,e=>_(this,null,function*(){this.instances.forEach(i=>i.listbox.blur());for(let i of this.instances){let n=i.listbox.input;yield Wn(n,e,this.confirmOnBrowserAutofill,this.accessToken)}}));Xn(),window.addEventListener("browserautofill",r(this,un)),H.autofillSessionEnabled=!0,this.accessToken=e||H.accessToken,i&&(this.options=i),n&&(this.theme=n),s&&(this.popoverOptions=s),o&&(this.confirmOnBrowserAutofill=o),l&&(this.browserAutofillEnabled=l),this.update()}get accessToken(){return r(this,ui).accessToken}set accessToken(e){r(this,ui).accessToken=e}get options(){return r(this,hi)}set options(e){p(this,hi,f(f({},r(this,hi)),e)),this.instances.forEach(i=>{i.options=f(f({},i.options),e)})}get theme(){return r(this,an)}set theme(e){p(this,an,e),this.instances.forEach(i=>{i.listbox.theme=e})}get popoverOptions(){return r(this,ln)}set popoverOptions(e){p(this,ln,e),this.instances.forEach(i=>{i.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),p(this,di,Hi()),this.instances=[],r(this,di).forEach(e=>{let i=new xl(this,e,r(this,ui));i.options=this.options,i.listbox.theme=this.theme,i.listbox.popoverOptions=this.popoverOptions,this.instances.push(i)})}observe(){r(this,dn).observe(document,{subtree:!0,childList:!0}),r(this,cn).call(this)}unobserve(){r(this,dn).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",r(this,un))}};di=new WeakMap,ui=new WeakMap,hi=new WeakMap,an=new WeakMap,ln=new WeakMap,cn=new WeakMap,dn=new WeakMap,un=new WeakMap;function Sl(t){return new El(t)}return Ol(Ld);})();
/*!
* focus-trap 6.7.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
//# sourceMappingURL=mapboxsearch.js.map
